<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</h1>
</div>
<h1 id="modelica.mechanics.multibody.examples.systems.robotr3.components"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3</a>.Components</h1>
<p><strong>Library of components of the robot</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This library contains the different components of the r3 robot. Usually, there is no need to use this library directly.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="79%" />
<col width="20%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusS.png" alt="image12" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">Data bus for one robot axis</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBusS.png" alt="image13" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus">ControlBus</a></td>
<td align="left">Data bus for all axes of robot</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1S.png" alt="image14" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1">PathPlanning1</a></td>
<td align="left">Generate reference angles for fastest kinematic movement</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1S.png" alt="image15" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6">PathPlanning6</a></td>
<td align="left">Generate reference angles for fastest kinematic movement</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBusS.png" alt="image16" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus">PathToAxisControlBus</a></td>
<td align="left">Map path planning to one axis control bus</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1S.png" alt="image17" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1">GearType1</a></td>
<td align="left">Motor inertia and gearbox model for r3 joints 1,2,3</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2S.png" alt="image18" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2">GearType2</a></td>
<td align="left">Motor inertia and gearbox model for r3 joints 4,5,6</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MotorS.png" alt="image19" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor">Motor</a></td>
<td align="left">Motor model including current controller of r3 motors</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControllerS.png" alt="image20" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller">Controller</a></td>
<td align="left">P-PI cascade controller for one axis</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1S.png" alt="image21" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1">AxisType1</a></td>
<td align="left">Axis model of the r3 joints 1,2,3</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1S.png" alt="image22" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2">AxisType2</a></td>
<td align="left">Axis model of the r3 joints 4,5,6</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructureS.png" alt="image23" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure">MechanicalStructure</a></td>
<td align="left">Model of the mechanical part of the r3 robot (without animation)</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image24-modelica.mechanics.multibody.examples.systems.robotr3.components.axiscontrolbus"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusI.png" alt="image24" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.AxisControlBus</h1>
<p><strong>Data bus for one robot axis</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>Signal bus that is used to communicate all signals for <strong>one</strong> axis. This is an expandable connector which has a &quot;default&quot; set of signals. Note, the input/output causalities of the signals are determined from the connections to this bus.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.SignalSubBus">Modelica.Icons.SignalSubBus</a> (Icon for signal sub-bus).</p>
<h2 id="contents">Contents</h2>
<table>
<col width="54%" />
<col width="13%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">motion_ref</td>
<td align="left">= true, if reference motion is not in rest</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">angle_ref</td>
<td align="left">Reference angle of axis flange [rad]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">angle</td>
<td align="left">Angle of axis flange [rad]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">speed_ref</td>
<td align="left">Reference speed of axis flange [rad/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">speed</td>
<td align="left">Speed of axis flange [rad/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration">AngularAcceleration</a></td>
<td align="left">acceleration_ref</td>
<td align="left">Reference acceleration of axis flange [rad/s2]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration">AngularAcceleration</a></td>
<td align="left">acceleration</td>
<td align="left">Acceleration of axis flange [rad/s2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current_ref</td>
<td align="left">Reference current of motor [A]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current</td>
<td align="left">Current of motor [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">motorAngle</td>
<td align="left">Angle of motor flange [rad]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">motorSpeed</td>
<td align="left">Speed of motor flange [rad/s]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>expandable connector AxisControlBus &quot;Data bus for one robot axis&quot;
  extends Modelica.Icons.SignalSubBus;
  import SI = Modelica.SIunits;

  Boolean motion_ref &quot;= true, if reference motion is not in rest&quot;;
  SI.Angle angle_ref &quot;Reference angle of axis flange&quot;;
  SI.Angle angle &quot;Angle of axis flange&quot;;
  SI.AngularVelocity speed_ref &quot;Reference speed of axis flange&quot;;
  SI.AngularVelocity speed &quot;Speed of axis flange&quot;;
  SI.AngularAcceleration acceleration_ref 
    &quot;Reference acceleration of axis flange&quot;;
  SI.AngularAcceleration acceleration &quot;Acceleration of axis flange&quot;;
  SI.Current current_ref &quot;Reference current of motor&quot;;
  SI.Current current &quot;Current of motor&quot;;
  SI.Angle motorAngle &quot;Angle of motor flange&quot;;
  SI.AngularVelocity motorSpeed &quot;Speed of motor flange&quot;;

end AxisControlBus;</code></pre>
<hr />
<h1 id="image25-modelica.mechanics.multibody.examples.systems.robotr3.components.controlbus"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBusI.png" alt="image25" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.ControlBus</h1>
<p><strong>Data bus for all axes of robot</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Signal bus that is used to communicate <strong>all signals</strong> of the robot. This is an expandable connector which has a &quot;default&quot; set of signals. Note, the input/output causalities of the signals are determined from the connections to this bus.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.SignalBus">Modelica.Icons.SignalBus</a> (Icon for signal bus).</p>
<h2 id="contents-1">Contents</h2>
<table>
<col width="81%" />
<col width="9%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus1</td>
<td align="left">Bus of axis 1</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus2</td>
<td align="left">Bus of axis 2</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus3</td>
<td align="left">Bus of axis 3</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus4</td>
<td align="left">Bus of axis 4</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus5</td>
<td align="left">Bus of axis 5</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus6</td>
<td align="left">Bus of axis 6</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>expandable connector ControlBus &quot;Data bus for all axes of robot&quot;
  extends Modelica.Icons.SignalBus;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus1 &quot;Bus of axis 1&quot;;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus2 &quot;Bus of axis 2&quot;;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus3 &quot;Bus of axis 3&quot;;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus4 &quot;Bus of axis 4&quot;;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus5 &quot;Bus of axis 5&quot;;
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus6 &quot;Bus of axis 6&quot;;

end ControlBus;</code></pre>
<hr />
<h1 id="image26-modelica.mechanics.multibody.examples.systems.robotr3.components.pathplanning1"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1I.png" alt="image26" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.PathPlanning1</h1>
<p><strong>Generate reference angles for fastest kinematic movement</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>Given</p>
<ul>
<li>start and end angle of an axis</li>
<li>maximum speed of the axis</li>
<li>maximum acceleration of the axis</li>
</ul>
<p>this component computes the fastest movement under the given constraints. This means, that:</p>
<ol>
<li>The axis accelerates with the maximum acceleration until the maximum speed is reached.</li>
<li>Drives with the maximum speed as long as possible.</li>
<li>Decelerates with the negative of the maximum acceleration until rest.</li>
</ol>
<p>The acceleration, constant velocity and deceleration phase are determined in such a way that the movement starts form the start angles and ends at the end angles. The output of this block are the computed angles, angular velocities and angular acceleration and this information is stored as reference motion on the controlBus of the r3 robot.</p>
<p>::</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="43%" />
<col width="7%" />
<col width="5%" />
<col width="42%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">angleBegDeg</td>
<td align="left">0</td>
<td align="left">Start angle [deg]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">angleEndDeg</td>
<td align="left">1</td>
<td align="left">End angle [deg]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">speedMax</td>
<td align="left">3</td>
<td align="left">Maximum axis speed [rad/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration">AngularAcceleration</a></td>
<td align="left">accMax</td>
<td align="left">2.5</td>
<td align="left">Maximum axis acceleration [rad/s2]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">startTime</td>
<td align="left">0</td>
<td align="left">Start time of movement [s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">swingTime</td>
<td align="left">0.5</td>
<td align="left">Additional time after reference motion is in rest before simulation is stopped [s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="84%" />
<col width="7%" />
<col width="8%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus">ControlBus</a></td>
<td align="left">controlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>model PathPlanning1 
  &quot;Generate reference angles for fastest kinematic movement&quot;

  import SI = Modelica.SIunits;
  import Cv = Modelica.SIunits.Conversions;
  parameter Real angleBegDeg(unit=&quot;deg&quot;) = 0 &quot;Start angle&quot;;
  parameter Real angleEndDeg(unit=&quot;deg&quot;) = 1 &quot;End angle&quot;;
  parameter SI.AngularVelocity speedMax = 3 &quot;Maximum axis speed&quot;;
  parameter SI.AngularAcceleration accMax = 2.5 &quot;Maximum axis acceleration&quot;;
  parameter SI.Time startTime=0 &quot;Start time of movement&quot;;
  parameter SI.Time swingTime=0.5 
    &quot;Additional time after reference motion is in rest before simulation is stopped&quot;;
  final parameter SI.Angle angleBeg=Cv.from_deg(angleBegDeg) &quot;Start angles&quot;;
  final parameter SI.Angle angleEnd=Cv.from_deg(angleEndDeg) &quot;End angles&quot;;
  ControlBus controlBus;
  Modelica.Blocks.Sources.KinematicPTP2 path(
    q_end={angleEnd},
    qd_max={speedMax},
    qdd_max={accMax},
    startTime=startTime,
    q_begin={angleBeg});
  PathToAxisControlBus pathToAxis1(final nAxis=1, final axisUsed=1);

  Blocks.Logical.TerminateSimulation terminateSimulation(condition=time &gt;= path.endTime
         + swingTime);
equation 
  connect(path.q, pathToAxis1.q);
  connect(path.qd, pathToAxis1.qd);
  connect(path.qdd, pathToAxis1.qdd);
  connect(path.moving, pathToAxis1.moving);
  connect(pathToAxis1.axisControlBus, controlBus.axisControlBus1);
end PathPlanning1;</code></pre>
<hr />
<h1 id="image27-modelica.mechanics.multibody.examples.systems.robotr3.components.pathplanning6"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6I.png" alt="image27" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.PathPlanning6</h1>
<p><strong>Generate reference angles for fastest kinematic movement</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>Given</p>
<ul>
<li>start and end angles of every axis</li>
<li>maximum speed of every axis</li>
<li>maximum acceleration of every axis</li>
</ul>
<p>this component computes the fastest movement under the given constraints. This means, that:</p>
<ol>
<li>Every axis accelerates with the maximum acceleration until the maximum speed is reached.</li>
<li>Drives with the maximum speed as long as possible.</li>
<li>Decelerates with the negative of the maximum acceleration until rest.</li>
</ol>
<p>The acceleration, constant velocity and deceleration phase are determined in such a way that the movement starts form the start angles and ends at the end angles. The output of this block are the computed angles, angular velocities and angular acceleration and this information is stored as reference motion on the controlBus of the r3 robot.</p>
<p>::</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="40%" />
<col width="10%" />
<col width="9%" />
<col width="39%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">naxis</td>
<td align="left">6</td>
<td align="left">number of driven axis</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">angleBegDeg[naxis]</td>
<td align="left">zeros(naxis)</td>
<td align="left">Start angles [deg]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">angleEndDeg[naxis]</td>
<td align="left">ones(naxis)</td>
<td align="left">End angles [deg]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">speedMax[naxis]</td>
<td align="left">fill(3, naxis)</td>
<td align="left">Maximum axis speed [rad/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration">AngularAcceleration</a></td>
<td align="left">accMax[naxis]</td>
<td align="left">fill(2.5, naxis)</td>
<td align="left">Maximum axis acceleration [rad/s2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">startTime</td>
<td align="left">0</td>
<td align="left">Start time of movement [s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">swingTime</td>
<td align="left">0.5</td>
<td align="left">Additional time after reference motion is in rest before simulation is stopped [s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="84%" />
<col width="7%" />
<col width="8%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus">ControlBus</a></td>
<td align="left">controlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>model PathPlanning6 
  &quot;Generate reference angles for fastest kinematic movement&quot;

  import SI = Modelica.SIunits;
  import Cv = Modelica.SIunits.Conversions;
  parameter Integer naxis=6 &quot;number of driven axis&quot;;
  parameter Real angleBegDeg[naxis](unit=&quot;deg&quot;) = zeros(naxis) &quot;Start angles&quot;;
  parameter Real angleEndDeg[naxis](unit=&quot;deg&quot;) = ones(naxis) &quot;End angles&quot;;
  parameter SI.AngularVelocity speedMax[naxis]=fill(3, naxis) 
    &quot;Maximum axis speed&quot;;
  parameter SI.AngularAcceleration accMax[naxis]=fill(2.5, naxis) 
    &quot;Maximum axis acceleration&quot;;
  parameter SI.Time startTime=0 &quot;Start time of movement&quot;;
  parameter SI.Time swingTime=0.5 
    &quot;Additional time after reference motion is in rest before simulation is stopped&quot;;
  final parameter SI.Angle angleBeg[:]=Cv.from_deg(angleBegDeg) &quot;Start angles&quot;;
  final parameter SI.Angle angleEnd[:]=Cv.from_deg(angleEndDeg) &quot;End angles&quot;;
  ControlBus controlBus;
  Modelica.Blocks.Sources.KinematicPTP2 path(
    q_end=angleEnd,
    qd_max=speedMax,
    qdd_max=accMax,
    startTime=startTime,
    q_begin=angleBeg);
  PathToAxisControlBus pathToAxis1(nAxis=naxis, axisUsed=1);
  PathToAxisControlBus pathToAxis2(nAxis=naxis, axisUsed=2);
  PathToAxisControlBus pathToAxis3(nAxis=naxis, axisUsed=3);
  PathToAxisControlBus pathToAxis4(nAxis=naxis, axisUsed=4);
  PathToAxisControlBus pathToAxis5(nAxis=naxis, axisUsed=5);
  PathToAxisControlBus pathToAxis6(nAxis=naxis, axisUsed=6);

  Blocks.Logical.TerminateSimulation terminateSimulation(condition=time &gt;= path.endTime
         + swingTime);
equation 
  connect(path.q, pathToAxis1.q);
  connect(path.qd, pathToAxis1.qd);
  connect(path.qdd, pathToAxis1.qdd);
  connect(path.moving, pathToAxis1.moving);
  connect(path.q, pathToAxis2.q);
  connect(path.qd, pathToAxis2.qd);
  connect(path.qdd, pathToAxis2.qdd);
  connect(path.moving, pathToAxis2.moving);
  connect(path.q, pathToAxis3.q);
  connect(path.qd, pathToAxis3.qd);
  connect(path.qdd, pathToAxis3.qdd);
  connect(path.moving, pathToAxis3.moving);
  connect(path.q, pathToAxis4.q);
  connect(path.qd, pathToAxis4.qd);
  connect(path.qdd, pathToAxis4.qdd);
  connect(path.moving, pathToAxis4.moving);
  connect(path.q, pathToAxis5.q);
  connect(path.qd, pathToAxis5.qd);
  connect(path.qdd, pathToAxis5.qdd);
  connect(path.moving, pathToAxis5.moving);
  connect(path.q, pathToAxis6.q);
  connect(path.qd, pathToAxis6.qd);
  connect(path.qdd, pathToAxis6.qdd);
  connect(path.moving, pathToAxis6.moving);
  connect(pathToAxis1.axisControlBus, controlBus.axisControlBus1);
  connect(pathToAxis2.axisControlBus, controlBus.axisControlBus2);
  connect(pathToAxis3.axisControlBus, controlBus.axisControlBus3);
  connect(pathToAxis4.axisControlBus, controlBus.axisControlBus4);
  connect(pathToAxis5.axisControlBus, controlBus.axisControlBus5);
  connect(pathToAxis6.axisControlBus, controlBus.axisControlBus6);
end PathPlanning6;</code></pre>
<hr />
<h1 id="image28-modelica.mechanics.multibody.examples.systems.robotr3.components.pathtoaxiscontrolbus"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBusI.png" alt="image28" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.PathToAxisControlBus</h1>
<p><strong>Map path planning to one axis control bus</strong></p>
<h2 id="information-5">Information</h2>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="13%" />
<col width="14%" />
<col width="13%" />
<col width="58%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">nAxis</td>
<td align="left">6</td>
<td align="left">Number of driven axis</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">axisUsed</td>
<td align="left">1</td>
<td align="left">Map path planning of axisUsed to axisControlBus</td>
</tr>
</tbody>
</table>
<h2 id="connectors-2">Connectors</h2>
<table>
<col width="83%" />
<col width="9%" />
<col width="7%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">q[nAxis]</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">qd[nAxis]</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">qdd[nAxis]</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput">BooleanInput</a></td>
<td align="left">moving[nAxis]</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>model PathToAxisControlBus 
  &quot;Map path planning to one axis control bus&quot;
  extends Blocks.Interfaces.BlockIcon;

  parameter Integer nAxis=6 &quot;Number of driven axis&quot;;
  parameter Integer axisUsed=1 
    &quot;Map path planning of axisUsed to axisControlBus&quot;;
  Blocks.Interfaces.RealInput q[nAxis];
  Blocks.Interfaces.RealInput qd[nAxis];
  Blocks.Interfaces.RealInput qdd[nAxis];
  AxisControlBus axisControlBus;
  Blocks.Routing.RealPassThrough q_axisUsed;
  Blocks.Routing.RealPassThrough qd_axisUsed;
  Blocks.Routing.RealPassThrough qdd_axisUsed;
  Blocks.Interfaces.BooleanInput moving[nAxis];
  Blocks.Routing.BooleanPassThrough motion_ref_axisUsed;
equation 
  connect(q_axisUsed.u, q[axisUsed]);
  connect(qd_axisUsed.u, qd[axisUsed]);
  connect(qdd_axisUsed.u, qdd[axisUsed]);
  connect(motion_ref_axisUsed.u, moving[axisUsed]);
  connect(motion_ref_axisUsed.y, axisControlBus.motion_ref);
  connect(qdd_axisUsed.y, axisControlBus.acceleration_ref);
  connect(qd_axisUsed.y, axisControlBus.speed_ref);
  connect(q_axisUsed.y, axisControlBus.angle_ref);
end PathToAxisControlBus;</code></pre>
<hr />
<h1 id="image29-modelica.mechanics.multibody.examples.systems.robotr3.components.geartype1"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1I.png" alt="image29" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.GearType1</h1>
<p><strong>Motor inertia and gearbox model for r3 joints 1,2,3</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>Models the gearbox used in the first three joints with all its effects, like elasticity and friction. Coulomb friction is approximated by a friction element acting at the &quot;motor&quot;-side. In reality, bearing friction should be also incorporated at the driven side of the gearbox. However, this would require considerable more effort for the measurement of the friction parameters. Default values for all parameters are given for joint 1. Model relativeStates is used to define the relative angle and relative angular velocity across the spring (=gear elasticity) as state variables. The reason is, that a default initial value of zero of these states makes always sense. If the absolute angle and the absolute angular velocity of model Jmotor would be used as states, and the load angle (= joint angle of robot) is NOT zero, one has always to ensure that the initial values of the motor angle and of the joint angle are modified correspondingly. Otherwise, the spring has an unrealistic deflection at initial time. Since relative quantities are used as state variables, this simplifies the definition of initial values considerably.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges">Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</a> (Partial model for a component with two rotational 1-dim. shaft flanges).</p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="40%" />
<col width="5%" />
<col width="9%" />
<col width="43%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">i</td>
<td align="left">-105</td>
<td align="left">gear ratio</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">c</td>
<td align="left">43</td>
<td align="left">Spring constant [N.m/rad]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">d</td>
<td align="left">0.005</td>
<td align="left">Damper constant [N.m.s/rad]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Torque">Torque</a></td>
<td align="left">Rv0</td>
<td align="left">0.4</td>
<td align="left">Viscous friction torque at zero velocity [N.m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">Rv1</td>
<td align="left">(0.13/160)</td>
<td align="left">Viscous friction coefficient (R=Rv0+Rv1*abs(qd)) [N.m.s/rad]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">1</td>
<td align="left">Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</td>
</tr>
</tbody>
</table>
<h2 id="connectors-3">Connectors</h2>
<table>
<col width="74%" />
<col width="9%" />
<col width="16%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Flange of left shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Flange of right shaft</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>model GearType1 
  &quot;Motor inertia and gearbox model for r3 joints 1,2,3 &quot;
  extends Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges;
  parameter Real i=-105 &quot;gear ratio&quot;;
  parameter Real c(unit=&quot;N.m/rad&quot;) = 43 &quot;Spring constant&quot;;
  parameter Real d(unit=&quot;N.m.s/rad&quot;) = 0.005 &quot;Damper constant&quot;;
  parameter SI.Torque Rv0=0.4 &quot;Viscous friction torque at zero velocity&quot;;
  parameter Real Rv1(unit=&quot;N.m.s/rad&quot;) = (0.13/160) 
    &quot;Viscous friction coefficient (R=Rv0+Rv1*abs(qd))&quot;;
  parameter Real peak=1 
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;;
  SI.AngularAcceleration a_rel=der(spring.w_rel) 
    &quot;Relative angular acceleration of spring&quot;;
  constant SI.AngularVelocity unitAngularVelocity = 1;
  constant SI.Torque unitTorque = 1;

  Modelica.Mechanics.Rotational.Components.IdealGear gear(
                                               ratio=i, useSupport=false);
  Modelica.Mechanics.Rotational.Components.SpringDamper spring(
                                                    c=c, d=d);
  Modelica.Mechanics.Rotational.Components.BearingFriction bearingFriction(
                                                                tau_pos=[0,
         Rv0/unitTorque; 1, (Rv0 + Rv1*unitAngularVelocity)/unitTorque],
      useSupport=false);
equation 
  connect(spring.flange_b, gear.flange_a);
  connect(bearingFriction.flange_b, spring.flange_a);
  connect(gear.flange_b, flange_b);
  connect(bearingFriction.flange_a, flange_a);
initial equation 
  spring.w_rel = 0;
  a_rel = 0;
end GearType1;</code></pre>
<hr />
<h1 id="image30-modelica.mechanics.multibody.examples.systems.robotr3.components.geartype2"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2I.png" alt="image30" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.GearType2</h1>
<p><strong>Motor inertia and gearbox model for r3 joints 4,5,6</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>The elasticity and damping in the gearboxes of the outermost three joints of the robot is neglected. Default values for all parameters are given for joint 4.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges">Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</a> (Partial model for a component with two rotational 1-dim. shaft flanges).</p>
<h2 id="parameters-4">Parameters</h2>
<table>
<col width="40%" />
<col width="5%" />
<col width="10%" />
<col width="43%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">i</td>
<td align="left">-99</td>
<td align="left">Gear ratio</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Torque">Torque</a></td>
<td align="left">Rv0</td>
<td align="left">21.8</td>
<td align="left">Viscous friction torque at zero velocity [N.m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">Rv1</td>
<td align="left">9.8</td>
<td align="left">Viscous friction coefficient in [Nms/rad] (R=Rv0+Rv1*abs(qd))</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">(26.7/21.8)</td>
<td align="left">Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</td>
</tr>
</tbody>
</table>
<h2 id="connectors-4">Connectors</h2>
<table>
<col width="74%" />
<col width="9%" />
<col width="16%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Flange of left shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Flange of right shaft</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>model GearType2 
  &quot;Motor inertia and gearbox model for r3 joints 4,5,6  &quot;
  extends Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges;
  parameter Real i=-99 &quot;Gear ratio&quot;;
  parameter SI.Torque Rv0=21.8 &quot;Viscous friction torque at zero velocity&quot;;
  parameter Real Rv1=9.8 
    &quot;Viscous friction coefficient in [Nms/rad] (R=Rv0+Rv1*abs(qd))&quot;;
  parameter Real peak=(26.7/21.8) 
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;;

  constant SI.AngularVelocity unitAngularVelocity = 1;
  constant SI.Torque unitTorque = 1;
  Modelica.Mechanics.Rotational.Components.IdealGear gear(
                                               ratio=i, useSupport=false);
  Modelica.Mechanics.Rotational.Components.BearingFriction bearingFriction(
                                                                tau_pos=[0,
         Rv0/unitTorque; 1, (Rv0 + Rv1*unitAngularVelocity)/unitTorque], peak=peak,
    useSupport=false);
equation 
  connect(gear.flange_b, bearingFriction.flange_a);
  connect(bearingFriction.flange_b, flange_b);
  connect(gear.flange_a, flange_a);
end GearType2;</code></pre>
<hr />
<h1 id="image31-modelica.mechanics.multibody.examples.systems.robotr3.components.motor"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MotorI.png" alt="image31" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.Motor</h1>
<p><strong>Motor model including current controller of r3 motors</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>Default values are given for the motor of joint 1. The input of the motor is the desired current (the actual current is proportional to the torque produced by the motor).</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.MotorIcon">Modelica.Icons.MotorIcon</a> (This icon will be removed in future Modelica versions.).</p>
<h2 id="parameters-5">Parameters</h2>
<table>
<col width="56%" />
<col width="7%" />
<col width="8%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Inertia">Inertia</a></td>
<td align="left">J</td>
<td align="left">0.0013</td>
<td align="left">Moment of inertia of motor [kg.m2]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">k</td>
<td align="left">1.1616</td>
<td align="left">Gain of motor</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">w</td>
<td align="left">4590</td>
<td align="left">Time constant of motor</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">D</td>
<td align="left">0.6</td>
<td align="left">Damping constant of motor</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity">AngularVelocity</a></td>
<td align="left">w_max</td>
<td align="left">315</td>
<td align="left">Maximum speed of motor [rad/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">i_max</td>
<td align="left">9</td>
<td align="left">Maximum current of motor [A]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-5">Connectors</h2>
<table>
<col width="83%" />
<col width="9%" />
<col width="7%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_motor</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>model Motor &quot;Motor model including current controller of r3 motors &quot;
  extends Modelica.Icons.MotorIcon;
  parameter SI.Inertia J(min=0)=0.0013 &quot;Moment of inertia of motor&quot;;
  parameter Real k=1.1616 &quot;Gain of motor&quot;;
  parameter Real w=4590 &quot;Time constant of motor&quot;;
  parameter Real D=0.6 &quot;Damping constant of motor&quot;;
  parameter SI.AngularVelocity w_max=315 &quot;Maximum speed of motor&quot;;
  parameter SI.Current i_max=9 &quot;Maximum current of motor&quot;;

  Modelica.Mechanics.Rotational.Interfaces.Flange_b flange_motor;
  Modelica.Electrical.Analog.Sources.SignalVoltage Vs;
  Modelica.Electrical.Analog.Ideal.IdealOpAmp diff;
  Modelica.Electrical.Analog.Ideal.IdealOpAmp power;
  Electrical.Analog.Basic.EMF emf( k=k, useSupport=false);
  Modelica.Electrical.Analog.Basic.Inductor La(L=(250/(2*D*w)));
  Modelica.Electrical.Analog.Basic.Resistor Ra(R=250);
  Modelica.Electrical.Analog.Basic.Resistor Rd2(R=100);
  Modelica.Electrical.Analog.Basic.Capacitor C(C=0.004*D/w);
  Modelica.Electrical.Analog.Ideal.IdealOpAmp OpI;
  Modelica.Electrical.Analog.Basic.Resistor Rd1(R=100);
  Modelica.Electrical.Analog.Basic.Resistor Ri(R=10);
  Modelica.Electrical.Analog.Basic.Resistor Rp1(R=200);
  Modelica.Electrical.Analog.Basic.Resistor Rp2(R=50);
  Modelica.Electrical.Analog.Basic.Resistor Rd4(R=100);
  Modelica.Electrical.Analog.Sources.SignalVoltage hall2;
  Modelica.Electrical.Analog.Basic.Resistor Rd3(R=100);
  Modelica.Electrical.Analog.Basic.Ground g1;
  Modelica.Electrical.Analog.Basic.Ground g2;
  Modelica.Electrical.Analog.Basic.Ground g3;
  Modelica.Electrical.Analog.Sensors.CurrentSensor hall1;
  Modelica.Electrical.Analog.Basic.Ground g4;
  Modelica.Electrical.Analog.Basic.Ground g5;
  Modelica.Mechanics.Rotational.Sensors.AngleSensor phi;
  Modelica.Mechanics.Rotational.Sensors.SpeedSensor speed;
  Modelica.Mechanics.Rotational.Components.Inertia Jmotor(
                                               J=J);
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus;
  Blocks.Math.Gain convert1(k=1);
  Blocks.Math.Gain convert2(k=1);
initial equation 
  // initialize motor in steady state
  der(C.v) = 0;
  der(La.i) = 0;


equation 
  connect(La.n, emf.p);
  connect(Ra.n, La.p);
  connect(Rd2.n, diff.n1);
  connect(C.n, OpI.p2);
  connect(OpI.p2, power.p1);
  connect(Vs.p, Rd2.p);
  connect(diff.n1, Rd1.p);
  connect(Rd1.n, diff.p2);
  connect(diff.p2, Ri.p);
  connect(Ri.n, OpI.n1);
  connect(OpI.n1, C.p);
  connect(power.n1, Rp1.p);
  connect(power.p2, Rp1.n);
  connect(Rp1.p, Rp2.p);
  connect(power.p2, Ra.p);
  connect(Rd3.p, hall2.p);
  connect(Rd3.n, diff.p1);
  connect(Rd3.n, Rd4.p);
  connect(Vs.n, g1.p);
  connect(g2.p, hall2.n);
  connect(Rd4.n, g3.p);
  connect(g3.p, OpI.p1);
  connect(g5.p, Rp2.n);
  connect(emf.n, hall1.p);
  connect(hall1.n, g4.p);
  connect(emf.flange, phi.flange);
  connect(emf.flange, speed.flange);
  connect(OpI.n2, power.n2);
  connect(OpI.p1, OpI.n2);
  connect(OpI.p1, diff.n2);
  connect(Jmotor.flange_b, flange_motor);
  connect(phi.phi, axisControlBus.motorAngle);
  connect(speed.w, axisControlBus.motorSpeed);
  connect(hall1.i, axisControlBus.current);
  connect(hall1.i, convert1.u);
  connect(convert1.y, hall2.v);
  connect(convert2.u, axisControlBus.current_ref);
  connect(convert2.y, Vs.v);
  connect(emf.flange, Jmotor.flange_a);
end Motor;</code></pre>
<hr />
<h1 id="image32-modelica.mechanics.multibody.examples.systems.robotr3.components.controller"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControllerI.png" alt="image32" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.Controller</h1>
<p><strong>P-PI cascade controller for one axis</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>This controller has an inner PI-controller to control the motor speed, and an outer P-controller to control the motor position of one axis. The reference signals are with respect to the gear-output, and the gear ratio is used in the controller to determine the motor reference signals. All signals are communicated via the &quot;axisControlBus&quot;.</p>
<p>::</p>
<h2 id="parameters-6">Parameters</h2>
<table>
<col width="42%" />
<col width="7%" />
<col width="8%" />
<col width="41%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">kp</td>
<td align="left">10</td>
<td align="left">Gain of position controller</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">ks</td>
<td align="left">1</td>
<td align="left">Gain of speed controller</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">Ts</td>
<td align="left">0.01</td>
<td align="left">Time constant of integrator of speed controller [s]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">ratio</td>
<td align="left">1</td>
<td align="left">Gear ratio of gearbox</td>
</tr>
</tbody>
</table>
<h2 id="connectors-6">Connectors</h2>
<table>
<col width="83%" />
<col width="9%" />
<col width="7%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>model Controller &quot;P-PI cascade controller for one axis&quot;
  parameter Real kp=10 &quot;Gain of position controller&quot;;
  parameter Real ks=1 &quot;Gain of speed controller&quot;;
  parameter SI.Time Ts=0.01 &quot;Time constant of integrator of speed controller&quot;;
  parameter Real ratio=1 &quot;Gear ratio of gearbox&quot;;

  Modelica.Blocks.Math.Gain gain1(k=ratio);
  Modelica.Blocks.Continuous.PI PI(k=ks, T=Ts);
  Modelica.Blocks.Math.Feedback feedback1;
  Modelica.Blocks.Math.Gain P(k=kp);
  Modelica.Blocks.Math.Add3 add3(k3=-1);
  Modelica.Blocks.Math.Gain gain2(k=ratio);
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus;
equation 
  connect(gain1.y, feedback1.u1);
  connect(feedback1.y, P.u);
  connect(P.y, add3.u2);
  connect(gain2.y, add3.u1);
  connect(add3.y, PI.u);
  connect(gain2.u, axisControlBus.speed_ref);
  connect(gain1.u, axisControlBus.angle_ref);
  connect(feedback1.u2, axisControlBus.motorAngle);
  connect(add3.u3, axisControlBus.motorSpeed);
  connect(PI.y, axisControlBus.current_ref);
end Controller;</code></pre>
<hr />
<h1 id="image33-modelica.mechanics.multibody.examples.systems.robotr3.components.axistype1"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1I.png" alt="image33" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.AxisType1</h1>
<p><strong>Axis model of the r3 joints 1,2,3</strong></p>
<h2 id="information-10">Information</h2>
<p>Extends from <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2">AxisType2</a> (Axis model of the r3 joints 4,5,6 ).</p>
<h2 id="parameters-7">Parameters</h2>
<table>
<col width="42%" />
<col width="6%" />
<col width="10%" />
<col width="40%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Controller</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">kp</td>
<td align="left">10</td>
<td align="left">Gain of position controller</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ks</td>
<td align="left">1</td>
<td align="left">Gain of speed controller</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">Ts</td>
<td align="left">0.01</td>
<td align="left">Time constant of integrator of speed controller [s]</td>
</tr>
<tr class="odd">
<td align="left">Motor</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">k</td>
<td align="left">1.1616</td>
<td align="left">Gain of motor</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">w</td>
<td align="left">4590</td>
<td align="left">Time constant of motor</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">D</td>
<td align="left">0.6</td>
<td align="left">Damping constant of motor</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Inertia">Inertia</a></td>
<td align="left">J</td>
<td align="left">0.0013</td>
<td align="left">Moment of inertia of motor [kg.m2]</td>
</tr>
<tr class="even">
<td align="left">Gear</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ratio</td>
<td align="left">-105</td>
<td align="left">Gear ratio</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Torque">Torque</a></td>
<td align="left">Rv0</td>
<td align="left">0.4</td>
<td align="left">Viscous friction torque at zero velocity in [Nm] [N.m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">Rv1</td>
<td align="left">(0.13/160)</td>
<td align="left">Viscous friction coefficient in [Nms/rad] [N.m.s/rad]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">1</td>
<td align="left">Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">c</td>
<td align="left">43</td>
<td align="left">Spring constant [N.m/rad]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">cd</td>
<td align="left">0.005</td>
<td align="left">Damper constant [N.m.s/rad]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-7">Connectors</h2>
<table>
<col width="83%" />
<col width="9%" />
<col width="7%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>model AxisType1 &quot;Axis model of the r3 joints 1,2,3 &quot;
  extends AxisType2(redeclare GearType1 gear(c=c, d=cd));
  parameter Real c(unit=&quot;N.m/rad&quot;) = 43 &quot;Spring constant&quot;;
  parameter Real cd(unit=&quot;N.m.s/rad&quot;) = 0.005 &quot;Damper constant&quot;;
end AxisType1;</code></pre>
<hr />
<h1 id="image34-modelica.mechanics.multibody.examples.systems.robotr3.components.axistype2"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1I.png" alt="image34" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.AxisType2</h1>
<p><strong>Axis model of the r3 joints 4,5,6</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>The axis model consists of the <strong>controller</strong>, the <strong>motor</strong> including current controller and the <strong>gearbox</strong> including gear elasticity and bearing friction. The only difference to the axis model of joints 4,5,6 (= model axisType2) is that elasticity and damping in the gear boxes are not neglected.</p>
<p>The input signals of this component are the desired angle and desired angular velocity of the joint. The reference signals have to be &quot;smooth&quot; (position has to be differentiable at least 2 times). Otherwise, the gear elasticity leads to significant oscillations.</p>
<p>Default values of the parameters are given for the axis of joint 1.</p>
<p>::</p>
<h2 id="parameters-8">Parameters</h2>
<table>
<col width="60%" />
<col width="3%" />
<col width="13%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2">GearType2</a></td>
<td align="left">gear</td>
<td align="left">redeclare GearType2 gear(Rv0...</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Controller</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">kp</td>
<td align="left">10</td>
<td align="left">Gain of position controller</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">ks</td>
<td align="left">1</td>
<td align="left">Gain of speed controller</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">Ts</td>
<td align="left">0.01</td>
<td align="left">Time constant of integrator of speed controller [s]</td>
</tr>
<tr class="even">
<td align="left">Motor</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">k</td>
<td align="left">1.1616</td>
<td align="left">Gain of motor</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">w</td>
<td align="left">4590</td>
<td align="left">Time constant of motor</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">D</td>
<td align="left">0.6</td>
<td align="left">Damping constant of motor</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Inertia">Inertia</a></td>
<td align="left">J</td>
<td align="left">0.0013</td>
<td align="left">Moment of inertia of motor [kg.m2]</td>
</tr>
<tr class="odd">
<td align="left">Gear</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">ratio</td>
<td align="left">-105</td>
<td align="left">Gear ratio</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Torque">Torque</a></td>
<td align="left">Rv0</td>
<td align="left">0.4</td>
<td align="left">Viscous friction torque at zero velocity in [Nm] [N.m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">Rv1</td>
<td align="left">(0.13/160)</td>
<td align="left">Viscous friction coefficient in [Nms/rad] [N.m.s/rad]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">1</td>
<td align="left">Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</td>
</tr>
</tbody>
</table>
<h2 id="connectors-8">Connectors</h2>
<table>
<col width="83%" />
<col width="9%" />
<col width="7%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">AxisControlBus</a></td>
<td align="left">axisControlBus</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>model AxisType2 &quot;Axis model of the r3 joints 4,5,6 &quot;
  parameter Real kp=10 &quot;Gain of position controller&quot;;
  parameter Real ks=1 &quot;Gain of speed controller&quot;;
  parameter SI.Time Ts=0.01 &quot;Time constant of integrator of speed controller&quot;;
  parameter Real k=1.1616 &quot;Gain of motor&quot;;
  parameter Real w=4590 &quot;Time constant of motor&quot;;
  parameter Real D=0.6 &quot;Damping constant of motor&quot;;
  parameter SI.Inertia J(min=0) = 0.0013 &quot;Moment of inertia of motor&quot;;
  parameter Real ratio=-105 &quot;Gear ratio&quot;;
  parameter SI.Torque Rv0=0.4 
    &quot;Viscous friction torque at zero velocity in [Nm]&quot;;
  parameter Real Rv1(unit=&quot;N.m.s/rad&quot;) = (0.13/160) 
    &quot;Viscous friction coefficient in [Nms/rad]&quot;;
  parameter Real peak=1 
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;;

  Modelica.Mechanics.Rotational.Interfaces.Flange_b flange;
  replaceable GearType2 gear(
    Rv0=Rv0,
    Rv1=Rv1,
    peak=peak,
    i=ratio);
  Motor motor(
    J=J,
    k=k,
    w=w,
    D=D);
  RobotR3.Components.Controller controller(
    kp=kp,
    ks=ks,
    Ts=Ts,
    ratio=ratio);
  Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus
    axisControlBus;
  Modelica.Mechanics.Rotational.Sensors.AngleSensor angleSensor;
  Modelica.Mechanics.Rotational.Sensors.SpeedSensor speedSensor;
  Modelica.Mechanics.Rotational.Sensors.AccSensor accSensor;
  Modelica.Mechanics.Rotational.Components.InitializeFlange
    initializeFlange(                          stateSelect=StateSelect.prefer);
  Blocks.Sources.Constant const(k=0);
equation 
  connect(gear.flange_b, flange);
  connect(gear.flange_b, angleSensor.flange);
  connect(gear.flange_b, speedSensor.flange);
  connect(motor.flange_motor, gear.flange_a);
  connect(gear.flange_b, accSensor.flange);
  connect(controller.axisControlBus, axisControlBus);
  connect(motor.axisControlBus, axisControlBus);
  connect(angleSensor.phi, axisControlBus.angle);
  connect(speedSensor.w, axisControlBus.speed);
  connect(accSensor.a, axisControlBus.acceleration);
  connect(axisControlBus.angle_ref, initializeFlange.phi_start);
  connect(axisControlBus.speed_ref, initializeFlange.w_start);
  connect(initializeFlange.flange, flange);
  connect(const.y, initializeFlange.a_start);
end AxisType2;</code></pre>
<hr />
<h1 id="image35-modelica.mechanics.multibody.examples.systems.robotr3.components.mechanicalstructure"><img src="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructureI.png" alt="image35" /> <a href="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components">Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</a>.MechanicalStructure</h1>
<p><strong>Model of the mechanical part of the r3 robot (without animation)</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>This model contains the mechanical components of the r3 robot (multibody system).</p>
<p>::</p>
<h2 id="parameters-9">Parameters</h2>
<table>
<col width="49%" />
<col width="9%" />
<col width="9%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">animation</td>
<td align="left">true</td>
<td align="left">= true, if animation shall be enabled</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Mass">Mass</a></td>
<td align="left">mLoad</td>
<td align="left">15</td>
<td align="left">Mass of load [kg]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">rLoad[3]</td>
<td align="left">{0,0.25,0}</td>
<td align="left">Distance from last flange to load mass&gt; [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Acceleration">Acceleration</a></td>
<td align="left">g</td>
<td align="left">9.81</td>
<td align="left">Gravity acceleration [m/s2]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-9">Connectors</h2>
<table>
<col width="81%" />
<col width="7%" />
<col width="11%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis1</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis2</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis3</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis4</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis5</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">axis6</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>model MechanicalStructure 
  &quot;Model of the mechanical part of the r3 robot (without animation)&quot;

  parameter Boolean animation=true &quot;= true, if animation shall be enabled&quot;;
  parameter SI.Mass mLoad(min=0)=15 &quot;Mass of load&quot;;
  parameter SI.Position rLoad[3]={0,0.25,0} 
    &quot;Distance from last flange to load mass&gt;&quot;;
  parameter SI.Acceleration g=9.81 &quot;Gravity acceleration&quot;;
  SI.Angle q[6] &quot;Joint angles&quot;;
  SI.AngularVelocity qd[6] &quot;Joint speeds&quot;;
  SI.AngularAcceleration qdd[6] &quot;Joint accelerations&quot;;
  SI.Torque tau[6] &quot;Joint driving torques&quot;;
  //r0={0,0.351,0},

  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis1;
  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis2;
  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis3;
  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis4;
  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis5;
  Modelica.Mechanics.Rotational.Interfaces.Flange_a axis6;
  inner Modelica.Mechanics.MultiBody.World world(
    g=(g)*Modelica.Math.Vectors.length(
                                  ({0,-1,0})),
    n={0,-1,0},
    animateWorld=false,
    animateGravity=false,
    enableAnimation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r1(n={0,1,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r2(n={1,0,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r3(n={1,0,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r4(n={0,1,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r5(n={1,0,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Joints.Revolute r6(n={0,1,0},useAxisFlange=true,
      animation=animation);
  Modelica.Mechanics.MultiBody.Parts.BodyShape b0(
    r={0,0.351,0},
    shapeType=&quot;0&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.225,
    width=0.3,
    height=0.3,
    color={0,0,255},
    animation=animation,
    animateSphere=false,
    r_CM={0,0,0},
    m=1);
  Modelica.Mechanics.MultiBody.Parts.BodyShape b1(
    r={0,0.324,0.3},
    I_22=1.16,
    shapeType=&quot;1&quot;,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.25,
    width=0.15,
    height=0.2,
    animation=animation,
    animateSphere=false,
    color={255,0,0},
    r_CM={0,0,0},
    m=1);
  Modelica.Mechanics.MultiBody.Parts.BodyShape b2(
    r={0,0.65,0},
    r_CM={0.172,0.205,0},
    m=56.5,
    I_11=2.58,
    I_22=0.64,
    I_33=2.73,
    I_21=-0.46,
    shapeType=&quot;2&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.5,
    width=0.2,
    height=0.15,
    animation=animation,
    animateSphere=false,
    color={255,178,0});
  Modelica.Mechanics.MultiBody.Parts.BodyShape b3(
    r={0,0.414,-0.155},
    r_CM={0.064,-0.034,0},
    m=26.4,
    I_11=0.279,
    I_22=0.245,
    I_33=0.413,
    I_21=-0.070,
    shapeType=&quot;3&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.15,
    width=0.15,
    height=0.15,
    animation=animation,
    animateSphere=false,
    color={255,0,0});
  Modelica.Mechanics.MultiBody.Parts.BodyShape b4(
    r={0,0.186,0},
    r_CM={0,0,0},
    m=28.7,
    I_11=1.67,
    I_22=0.081,
    I_33=1.67,
    shapeType=&quot;4&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.73,
    width=0.1,
    height=0.1,
    animation=animation,
    animateSphere=false,
    color={255,178,0});
  Modelica.Mechanics.MultiBody.Parts.BodyShape b5(
    r={0,0.125,0},
    r_CM={0,0,0},
    m=5.2,
    I_11=1.25,
    I_22=0.81,
    I_33=1.53,
    shapeType=&quot;5&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.225,
    width=0.075,
    height=0.1,
    animation=animation,
    animateSphere=false,
    color={0,0,255});
  Modelica.Mechanics.MultiBody.Parts.BodyShape b6(
    r={0,0,0},
    r_CM={0.05,0.05,0.05},
    m=0.5,
    shapeType=&quot;6&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    animation=animation,
    animateSphere=false,
    color={0,0,255});
  Modelica.Mechanics.MultiBody.Parts.BodyShape load(
    r_CM=rLoad,
    m=mLoad,
    r_shape={0,0,0},
    widthDirection={1,0,0},
    width=0.05,
    height=0.05,
    color={255,0,0},
    lengthDirection=rLoad,
    length=Modelica.Math.Vectors.length(              rLoad),
    animation=animation);
equation 
  connect(r6.frame_b, b6.frame_a);
  q = {r1.phi,r2.phi,r3.phi,r4.phi,r5.phi,r6.phi};
  qd = der(q);
  qdd = der(qd);
  tau = {r1.axis.tau,r2.axis.tau,r3.axis.tau,r4.axis.tau,r5.axis.tau,r6.
    axis.tau};
  connect(load.frame_a, b6.frame_b);
  connect(world.frame_b, b0.frame_a);
  connect(b0.frame_b, r1.frame_a);
  connect(b1.frame_b, r2.frame_a);
  connect(r1.frame_b, b1.frame_a);
  connect(r2.frame_b, b2.frame_a);
  connect(b2.frame_b, r3.frame_a);
  connect(r2.axis, axis2);
  connect(r1.axis, axis1);
  connect(r3.frame_b, b3.frame_a);
  connect(b3.frame_b, r4.frame_a);
  connect(r3.axis, axis3);
  connect(r4.axis, axis4);
  connect(r4.frame_b, b4.frame_a);
  connect(b4.frame_b, r5.frame_a);
  connect(r5.axis, axis5);
  connect(r5.frame_b, b5.frame_a);
  connect(b5.frame_b, r6.frame_a);
  connect(r6.axis, axis6);
end MechanicalStructure;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:25 2010.</p>
</body>
</html>
