<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Electrical.Spice3.Internal.Diode</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Electrical.Spice3.Internal.Diode</h1>
</div>
<h1 id="modelica.electrical.spice3.internal.diode"><a href="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal">Modelica.Electrical.Spice3.Internal</a>.Diode</h1>
<p><strong>Records and functions for diode model</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This package Diode contains functions and record with data of the semiconductor diode model.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="81%" />
<col width="18%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image14" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">Record for Diode model line parameters</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image15" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables">DiodeModelLineVariables</a></td>
<td align="left">Record for Diode model line variables</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image16" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams">DiodeParams</a></td>
<td align="left">Record for Diode device parameters</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image17" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables">DiodeVariables</a></td>
<td align="left">Variables for the diode model</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image18" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc">DiodeCalc</a></td>
<td align="left">Diode variables</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" alt="image19" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances">CurrentsCapacitances</a></td>
<td align="left">Diode variables</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image20" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquations">diodeModelLineInitEquations</a></td>
<td align="left">Initial precalculation of model line parameters</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image21" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeInitEquations">diodeInitEquations</a></td>
<td align="left">Initial calculation</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image22" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeCalcTempDependencies">diodeCalcTempDependencies</a></td>
<td align="left">Temperature dependency calculation</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image23" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeNoBypassCode">diodeNoBypassCode</a></td>
<td align="left">Calculation of currents</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image24" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeCalcAdditionalValues">diodeCalcAdditionalValues</a></td>
<td align="left">Calculation of additional values</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image25" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParameters">diodeRenameParameters</a></td>
<td align="left">Technology parameter renaming</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image26" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDev">diodeRenameParametersDev</a></td>
<td align="left">Temperature calculation</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" alt="image27" /> <a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDevTemp">diodeRenameParametersDevTemp</a></td>
<td align="left">Temperature calculation</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodemodellineparams"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.DiodeModelLineParams</h1>
<p><strong>Record for Diode model line parameters</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>This record contains the model line (also called model card) parameters that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>record DiodeModelLineParams &quot;Record for Diode model line parameters&quot;

  Modelica.SIunits.Current m_satCur( start = 1.0e-14) &quot;IS, Saturation current&quot;;
  Modelica.SIunits.Resistance m_resist( start = 0.0) &quot;RS, Ohmic resistance&quot;;
  Real m_emissionCoeff( start = 1.0) &quot;N, Emission Coefficient&quot;;
  Modelica.SIunits.Time m_transitTime( start = 0.0) &quot;TT, Transit Time&quot;;
  Modelica.SIunits.Capacitance m_junctionCap( start = 0.0) 
    &quot;CJO, Junction capacitance&quot;;
  Modelica.SIunits.Voltage m_junctionPot( start = 1.0) &quot;VJ, Junction potential&quot;;
  Real m_gradingCoeff( start = 0.5) &quot;M, Grading coefficient&quot;;
  Modelica.SIunits.ActivationEnergy m_activationEnergy( start = 1.11) 
    &quot;EG, Activation energy&quot;;
  Real m_saturationCurrentExp( start = 3.0) 
    &quot;XTI, Saturation current temperature exp.&quot;;
  Real m_depletionCapCoeff( start = 0.5) 
    &quot;FC, Forward bias junction fit parameter&quot;;
  Modelica.SIunits.Voltage m_breakdownVoltage &quot;BV, Reverse breakdown voltage&quot;;
  Real m_pBvIsGiven &quot;BV is given value&quot;;
  Modelica.SIunits.Current m_breakdownCurrent( start = 1.0e-3) 
    &quot;IBV, Current at reverse breakdown voltage&quot;;
  Modelica.SIunits.Temp_C m_nomTemp( start=SpiceConstants.CKTnomTemp) 
    &quot;TNOM, Parameter measurement temperature&quot;;
  Real m_fNcoef( start = 0.0) &quot;KF, flicker noise coefficient&quot;;
  Real m_fNexp( start = 1.0) &quot;AF, flicker noise exponent&quot;;
  Modelica.SIunits.Conductance m_conductance &quot;G, Ohmic conductance&quot;;

end DiodeModelLineParams;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodemodellinevariables"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.DiodeModelLineVariables</h1>
<p><strong>Record for Diode model line variables</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>This record contains the model line (also called model card) variables that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>record DiodeModelLineVariables 
  &quot;Record for Diode model line variables&quot;

  Real m_gradingCoeff;
  Real m_activationEnergy;
  Real m_depletionCapCoeff;
  Modelica.SIunits.Conductance m_conductance;

end DiodeModelLineVariables;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodeparams"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.DiodeParams</h1>
<p><strong>Record for Diode device parameters</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>This record contains the device parameters that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>record DiodeParams &quot;Record for Diode device parameters&quot;

  Real m_area(start = 1.0) &quot;AREA, Area factor&quot;;
  Boolean m_bOff(start = false) &quot;OFF, Initially off&quot;;
  Modelica.SIunits.Voltage m_dIC(start = 0.0) &quot;IC, Initial device voltage&quot;;
  Real m_pIcIsGiven &quot;IC is giben value&quot;;
  Boolean m_bSensArea(start = false) 
    &quot;SENS_AREA, flag to request sensitivity WRT area&quot;;

end DiodeParams;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodevariables"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.DiodeVariables</h1>
<p><strong>Variables for the diode model</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>This record contains the model variables that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>record DiodeVariables &quot;Variables for the diode model&quot;

  Real m_pBvIsGiven &quot;Additional BV is given variable&quot;;

end DiodeVariables;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodecalc"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.DiodeCalc</h1>
<p><strong>Diode variables</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>This record contains the model variables that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>record DiodeCalc &quot;Diode variables&quot;

  Modelica.SIunits.Voltage m_tJctPot;
  Modelica.SIunits.Capacitance m_tJctCap;
  Real m_tF1;
  Real m_f2;
  Real m_f3;
  Modelica.SIunits.Current m_tSatCur;
  Modelica.SIunits.Voltage m_tVcrit;
  Real m_dVte;
  Modelica.SIunits.Voltage m_tBrkdwnV;

end DiodeCalc;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.currentscapacitances"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.CurrentsCapacitances</h1>
<p><strong>Diode variables</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>This record contains the model variables that are used for the diode model in SPICE3.</p>
<p>::</p>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>record CurrentsCapacitances &quot;Diode variables&quot;

  Modelica.SIunits.Current m_dCurrent;

end CurrentsCapacitances;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodemodellineinitequations"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeModelLineInitEquations</h1>
<p><strong>Initial precalculation of model line parameters</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>Within this function some parameters are initially precalculated from model line parameters.</p>
<p>::</p>
<h2 id="inputs">Inputs</h2>
<table>
<col width="66%" />
<col width="4%" />
<col width="5%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">in_p</td>
<td align="left">
</td>
<td align="left">Input record with diode model line parameters</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="70%" />
<col width="5%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables">DiodeModelLineVariables</a></td>
<td align="left">out_v</td>
<td align="left">Output record with diode model line variables</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>function diodeModelLineInitEquations 
  &quot;Initial precalculation of model line parameters&quot;

  input DiodeModelLineParams in_p 
    &quot;Input record with diode model line parameters&quot;;

  output DiodeModelLineVariables out_v 
    &quot;Output record with diode model line variables&quot;;

algorithm 
  // limit grading coeff to max of 0.9
  if (in_p.m_gradingCoeff &gt; 0.9) then
    out_v.m_gradingCoeff := 0.9;
  end if;
  // limit activation energy to min of 0.1
  if (in_p.m_activationEnergy &lt; 0.1) then
    out_v.m_activationEnergy := 0.1;
  end if;
  // limit depletion cap coeff to max of 0.95
  if (in_p.m_depletionCapCoeff &gt; 0.95) then
    out_v.m_depletionCapCoeff := 0.95;
  end if;

  out_v.m_conductance := if (in_p.m_resist == 0.0) then 0.0 else 1.0 / in_p.m_resist;

end diodeModelLineInitEquations;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodeinitequations"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeInitEquations</h1>
<p><strong>Initial calculation</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>In this function some initial calculations for the diode model are done, especially concerning the handling of the breakthrough voltage.</p>
<p>::</p>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="66%" />
<col width="4%" />
<col width="5%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">in_p</td>
<td align="left">
</td>
<td align="left">Input record with diode model line parameters</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="71%" />
<col width="6%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables">DiodeVariables</a></td>
<td align="left">out_v</td>
<td align="left">Output record with diode variables</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>function diodeInitEquations &quot;Initial calculation&quot;

  input DiodeModelLineParams in_p 
    &quot;Input record with diode model line parameters&quot;;

  output DiodeVariables out_v &quot;Output record with diode variables&quot;;

algorithm 
 out_v.m_pBvIsGiven := in_p.m_pBvIsGiven;
  if (out_v.m_pBvIsGiven &gt; 0.5) then
    if (in_p.m_breakdownVoltage &gt; 1.0e+100) then
      out_v.m_pBvIsGiven := 1.0e-41; // set to false
    end if;
  end if;

end diodeInitEquations;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodecalctempdependencies"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeCalcTempDependencies</h1>
<p><strong>Temperature dependency calculation</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>In this function for the diode model temperature dependencies are calculated using temperature treating functions from the equation package.</p>
<p>::</p>
<h2 id="inputs-2">Inputs</h2>
<table>
<col width="67%" />
<col width="5%" />
<col width="5%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">in_p</td>
<td align="left">
</td>
<td align="left">Input record diode model line parameters</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams">DiodeParams</a></td>
<td align="left">in_dp</td>
<td align="left">
</td>
<td align="left">Input record diode paramters</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model">Model</a></td>
<td align="left">in_m</td>
<td align="left">
</td>
<td align="left">Input record Model</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables">DiodeVariables</a></td>
<td align="left">in_v</td>
<td align="left">
</td>
<td align="left">Input record diode variables</td>
</tr>
</tbody>
</table>
<h2 id="outputs-2">Outputs</h2>
<table>
<col width="69%" />
<col width="6%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc">DiodeCalc</a></td>
<td align="left">out_c</td>
<td align="left">Output record with calculated values</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>function diodeCalcTempDependencies 
  &quot;Temperature dependency calculation&quot;

  input DiodeModelLineParams in_p &quot;Input record diode model line parameters&quot;;
  input DiodeParams in_dp &quot;Input record diode paramters&quot;;
  input Model.Model in_m &quot;Input record Model&quot;;
  input DiodeVariables in_v &quot;Input record diode variables&quot;;

  output DiodeCalc out_c &quot;Output record with calculated values&quot;;

algorithm 
  (out_c.m_tJctPot,out_c.m_tJctCap) :=
    Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3(
          in_p.m_junctionPot,
          in_p.m_junctionCap,
          in_p.m_gradingCoeff,
          in_m.m_dTemp,
          in_p.m_nomTemp);
  out_c.m_tJctCap := in_dp.m_area * out_c.m_tJctCap;
  (out_c.m_tF1,out_c.m_f2,out_c.m_f3) :=
    Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs(
          in_p.m_gradingCoeff,
          in_p.m_depletionCapCoeff,
          out_c.m_tJctPot);

  out_c.m_tSatCur :=
    Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3(
          in_p.m_satCur,
          in_m.m_dTemp,
          in_p.m_nomTemp,
          in_p.m_emissionCoeff,
          in_p.m_activationEnergy,
          in_p.m_saturationCurrentExp);
  out_c.m_tVcrit :=
    Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit(
          in_m.m_dTemp,
          in_p.m_emissionCoeff,
          out_c.m_tSatCur);
  out_c.m_dVte := in_m.m_dTemp*SpiceConstants.CONSTKoverQ*in_p.m_emissionCoeff;
  if (in_v.m_pBvIsGiven &gt; 0.5) then
    out_c.m_tBrkdwnV :=
      Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3(
            in_p.m_breakdownVoltage,
            in_p.m_breakdownCurrent,
            out_c.m_tSatCur,
            in_m.m_dTemp,
            in_p.m_emissionCoeff);
  end if;
  out_c.m_tSatCur := in_dp.m_area * out_c.m_tSatCur;

end diodeCalcTempDependencies;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodenobypasscode"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeNoBypassCode</h1>
<p><strong>Calculation of currents</strong></p>
<h2 id="information-10">Information</h2>
<p>::</p>
<p>This function NoBypassCode calculates the currents (and the capacitances) that are necessary for the currents to be used in the toplevel model.</p>
<p>::</p>
<h2 id="inputs-3">Inputs</h2>
<table>
<col width="60%" />
<col width="12%" />
<col width="5%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">in_p</td>
<td align="left">
</td>
<td align="left">Input record model line parameters for diode</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams">DiodeParams</a></td>
<td align="left">in_dp</td>
<td align="left">
</td>
<td align="left">Input record with parameters for diode</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc">DiodeCalc</a></td>
<td align="left">in_c</td>
<td align="left">
</td>
<td align="left">Input record DiodeCalc</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model">Model</a></td>
<td align="left">in_m</td>
<td align="left">
</td>
<td align="left">Input record model</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">in_m_mbInit</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">in_m_pVoltageValues[2]</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-3">Outputs</h2>
<table>
<col width="66%" />
<col width="5%" />
<col width="28%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances">CurrentsCapacitances</a></td>
<td align="left">out_cc</td>
<td align="left">Output record with calculated currents and capacitances</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance">Capacitance</a></td>
<td align="left">m_dCap</td>
<td align="left">Output capacitance [F]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>function diodeNoBypassCode &quot;Calculation of currents&quot;

  input DiodeModelLineParams in_p 
    &quot;Input record model line parameters for diode&quot;;
  input DiodeParams in_dp &quot;Input record with parameters for diode&quot;;
  input DiodeCalc in_c &quot;Input record DiodeCalc&quot;;
  input Model.Model in_m &quot;Input record model&quot;;
  input Boolean in_m_mbInit;
  input Modelica.SIunits.Voltage[2] in_m_pVoltageValues; /* DPP, DN */

  output CurrentsCapacitances out_cc 
    &quot;Output record with calculated currents and capacitances&quot;;

  output Modelica.SIunits.Capacitance m_dCap &quot;Output capacitance&quot;;

protected 
  Modelica.SIunits.Voltage m_dPNVoltage &quot;Voltage&quot;;
  Modelica.SIunits.Current m_dCurrent &quot;Current&quot;;
  Modelica.SIunits.Conductance m_dCond &quot;Conductance&quot;;
  Modelica.SIunits.Charge m_dCharge &quot;Charge&quot;;
  Modelica.SIunits.Current m_dCapCurrent &quot;Current&quot;;

algorithm 
  m_dPNVoltage := in_m_pVoltageValues[1] - in_m_pVoltageValues[2];

  if (SpiceRoot.useInitialConditions() and in_dp.m_pIcIsGiven &gt; 0.5) then
    m_dPNVoltage := in_dp.m_dIC;
  elseif (SpiceRoot.initJunctionVoltages()) then
    if (in_dp.m_bOff) then
      m_dPNVoltage := 0.0;
    else
      m_dPNVoltage := in_c.m_tVcrit;
    end if;
  end if;

  if (in_p.m_pBvIsGiven &gt; 0.5) then
    (out_cc.m_dCurrent,m_dCond) :=
      Modelica.Electrical.Spice3.Internal.Functions.junction3(
            m_dPNVoltage,
            in_m.m_dTemp,
            in_p.m_emissionCoeff,
            in_c.m_tSatCur,
            in_c.m_tBrkdwnV);
  else
    (out_cc.m_dCurrent,m_dCond) :=
      Modelica.Electrical.Spice3.Internal.Functions.junction2(
            m_dPNVoltage,
            in_m.m_dTemp,
            in_p.m_emissionCoeff,
            in_c.m_tSatCur);
  end if;

  (m_dCap,m_dCharge) :=
    Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime(
          in_c.m_tJctCap,
          m_dPNVoltage,
          in_c.m_tJctPot*in_p.m_depletionCapCoeff,
          in_p.m_gradingCoeff,
          in_p.m_junctionPot,
          in_c.m_tF1,
          in_c.m_f2,
          in_c.m_f3,
          in_p.m_transitTime,
          m_dCond,
          m_dCurrent);

end diodeNoBypassCode;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.diodecalcadditionalvalues"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeCalcAdditionalValues</h1>
<p><strong>Calculation of additional values</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>This function is prepared for additional calculations but it is plain (inputs are written to the outputs) in the actual version of this library.</p>
<p>::</p>
<h2 id="inputs-4">Inputs</h2>
<table>
<col width="60%" />
<col width="12%" />
<col width="5%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables">DiodeVariables</a></td>
<td align="left">in_v</td>
<td align="left">
</td>
<td align="left">Input record with diode variables</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">in_p</td>
<td align="left">
</td>
<td align="left">Input record with diode model line parameters</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams">DiodeParams</a></td>
<td align="left">in_dp</td>
<td align="left">
</td>
<td align="left">Input record with diode parameters</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">in_m_pVoltageValues[2]</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-4">Outputs</h2>
<table>
<col width="71%" />
<col width="6%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables">DiodeVariables</a></td>
<td align="left">out_v</td>
<td align="left">Output record with diode variables</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>function diodeCalcAdditionalValues &quot;Calculation of additional values&quot;

  input DiodeVariables in_v &quot;Input record with diode variables&quot;;
  input DiodeModelLineParams in_p 
    &quot;Input record with diode model line parameters&quot;;
  input DiodeParams in_dp &quot;Input record with diode parameters&quot;;
  input Modelica.SIunits.Voltage[2] in_m_pVoltageValues; /* DP, DPP */

  output DiodeVariables out_v &quot;Output record with diode variables&quot;;

algorithm 
  out_v := in_v;

end diodeCalcAdditionalValues;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.dioderenameparameters"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeRenameParameters</h1>
<p><strong>Technology parameter renaming</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>This function assigns the external (given by the user, e.g., IS) technology parameters to the internal parameters (e.g., m_satCur). It also does the analysis of the IsGiven values.</p>
<p>::</p>
<h2 id="inputs-5">Inputs</h2>
<table>
<col width="64%" />
<col width="5%" />
<col width="6%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardDIODE">ModelcardDIODE</a></td>
<td align="left">ex</td>
<td align="left">
</td>
<td align="left">Modelcard with technologie parameters</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants">SpiceConstants</a></td>
<td align="left">con</td>
<td align="left">
</td>
<td align="left">Spice constants</td>
</tr>
</tbody>
</table>
<h2 id="outputs-5">Outputs</h2>
<table>
<col width="71%" />
<col width="5%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams">DiodeModelLineParams</a></td>
<td align="left">intern</td>
<td align="left">Output record diode model line parameters</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>function diodeRenameParameters &quot;Technology parameter renaming&quot;

  input ModelcardDIODE ex &quot;Modelcard with technologie parameters&quot;;
  input SpiceConstants con &quot;Spice constants&quot;;

  output DiodeModelLineParams intern 
    &quot;Output record diode model line parameters&quot;;

algorithm 
   intern.m_satCur := ex.IS;
   intern.m_resist:=ex.RS;
   intern.m_emissionCoeff := ex.N;
   intern.m_transitTime := ex.TT;
   intern.m_junctionCap := ex.CJO;
   intern.m_junctionPot := ex.VJ;

   intern.m_gradingCoeff := if (ex.M &gt; 0.9) then 0.9 else ex.M;
   intern.m_activationEnergy := if (ex.EG &lt; 0.1) then 0.1 else ex.EG;
   intern.m_saturationCurrentExp := ex.XTI;
   intern.m_depletionCapCoeff := if (ex.FC &gt; 0.95) then 0.95 else ex.FC;

   intern.m_pBvIsGiven := if (ex.BV &gt; -1e40) then 1 else 0;
   intern.m_breakdownVoltage := if (ex.BV &gt; -1e40) then ex.BV else 0;

   intern.m_breakdownCurrent := ex.IBV;
  intern.m_nomTemp := ex.TNOM + SpiceConstants.CONSTCtoK;
   intern.m_fNcoef := ex.KF;
   intern.m_fNexp := ex.AF;

   intern.m_conductance := if (ex.RS == 0) then  0 else 1/ex.RS;

end diodeRenameParameters;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.dioderenameparametersdev"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeRenameParametersDev</h1>
<p><strong>Temperature calculation</strong></p>
<h2 id="information-13">Information</h2>
<p>::</p>
<p>This function assigns the external (given by the user, e.g., AREA) device parameters to the internal parameters (e.g., m_area). It also does the analysis of the IsGiven values.</p>
<p>::</p>
<h2 id="inputs-6">Inputs</h2>
<table>
<col width="35%" />
<col width="8%" />
<col width="6%" />
<col width="49%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">TEMP</td>
<td align="left">
</td>
<td align="left">Temperature [K]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">AREA</td>
<td align="left">
</td>
<td align="left">Area factor</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">IC</td>
<td align="left">
</td>
<td align="left">Initial condition value (VD, not implemented yet</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">OFF</td>
<td align="left">
</td>
<td align="left">Optional initial condition: false - IC not used, true - IC used, not implemented yet</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">SENS_AREA</td>
<td align="left">
</td>
<td align="left">Flag to request sensitivity WRT area, not implemented yet</td>
</tr>
</tbody>
</table>
<h2 id="outputs-6">Outputs</h2>
<table>
<col width="67%" />
<col width="4%" />
<col width="28%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams">DiodeParams</a></td>
<td align="left">dev</td>
<td align="left">Output record with calculated diode parameters</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-12">Modelica definition</h2>
<pre><code>function diodeRenameParametersDev &quot;Temperature calculation&quot;
  input Modelica.SIunits.Temp_K TEMP &quot;Temperature&quot;;
  input Real AREA &quot;Area factor&quot;;
  input Real IC &quot;Initial condition value (VD, not implemented yet&quot;;
  input Boolean OFF 
    &quot;Optional initial condition: false - IC not used, true - IC used, not implemented yet&quot;;
  input Boolean SENS_AREA 
    &quot;Flag to request sensitivity WRT area, not implemented yet&quot;;

  output DiodeParams dev &quot;Output record with calculated diode parameters&quot;;

algorithm 
/*device parameters*/
  dev.m_area := AREA;

  dev.m_pIcIsGiven := if (IC &gt; -1e40) then 1 else 0;
  dev.m_dIC := if 
                 (IC &gt; -1e40) then IC else 0;
  dev.m_bOff := OFF;
  dev.m_bSensArea := SENS_AREA;

end diodeRenameParametersDev;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.diode.dioderenameparametersdevtemp"><a href="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode">Modelica.Electrical.Spice3.Internal.Diode</a>.diodeRenameParametersDevTemp</h1>
<p><strong>Temperature calculation</strong></p>
<h2 id="information-14">Information</h2>
<p>::</p>
<p>This function calculates device parameters wehich are temperature dependent.</p>
<p>::</p>
<h2 id="inputs-7">Inputs</h2>
<table>
<col width="58%" />
<col width="8%" />
<col width="11%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_C">Temp_C</a></td>
<td align="left">TEMP</td>
<td align="left">
</td>
<td align="left">Temperature [degC]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-7">Outputs</h2>
<table>
<col width="74%" />
<col width="9%" />
<col width="15%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model">Model</a></td>
<td align="left">dev_temp</td>
<td align="left">Input record Model</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-13">Modelica definition</h2>
<pre><code>function diodeRenameParametersDevTemp &quot;Temperature calculation&quot;

  input Modelica.SIunits.Temp_C TEMP &quot;Temperature&quot;;
  output Model.Model dev_temp &quot;Input record Model&quot;;

algorithm 
  dev_temp.m_dTemp := TEMP + SpiceConstants.CONSTCtoK;

end diodeRenameParametersDevTemp;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.</p>
</body>
</html>
