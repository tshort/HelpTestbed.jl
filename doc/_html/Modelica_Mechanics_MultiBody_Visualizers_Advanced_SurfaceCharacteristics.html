<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics</h1>
</div>
<h1 id="modelica.mechanics.multibody.visualizers.advanced.surfacecharacteristics"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.SurfaceCharacteristics</h1>
<p><strong>Functions returning surface descriptions</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This package contains functions that are used to define parameterized surfaces for use with the <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Surface">Surface</a> model.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="69%" />
<col width="30%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics.torusS.png" alt="image2" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced_SurfaceCharacteristics.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics.torus">torus</a></td>
<td align="left">Function defining the surface characteristic of a torus</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics.torusS.png" alt="image3" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced_SurfaceCharacteristics.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics.pipeWithScalarField">pipeWithScalarField</a></td>
<td align="left">Function defining the surface characteristic of a pipe where a scalar field value is displayed with color along the pipe axis</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.mechanics.multibody.visualizers.advanced.surfacecharacteristics.torus"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced_SurfaceCharacteristics.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics">Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics</a>.torus</h1>
<p><strong>Function defining the surface characteristic of a torus</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>Function <strong>torus</strong> computes the X,Y,Z arrays to visualize a torus with model <a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers.Torus">Torus</a>. The left image below shows a torus with ri=0.5 m and ro = 0.2 m. The right images below shows the torus with the additional parameter settings:</p>
<pre><code>opening    =   45 degree
startAngle = -135 degree
stopAngle  =  135 degree</code></pre>
<blockquote>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/Torus.png" alt="image4" /><p class="caption">image4</p>
</div>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic">Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic</a>.</p>
<h2 id="inputs">Inputs</h2>
<table>
<col width="37%" />
<col width="14%" />
<col width="16%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">nu</td>
<td align="left">
</td>
<td align="left">Number of points in u-Dimension</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">nv</td>
<td align="left">
</td>
<td align="left">Number of points in v-Dimension</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">multiColoredSurface</td>
<td align="left">false</td>
<td align="left">= true: Color is defined for each surface point</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Radius">Radius</a></td>
<td align="left">ri</td>
<td align="left">1</td>
<td align="left">Inner radius of torus [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Radius">Radius</a></td>
<td align="left">ro</td>
<td align="left">0.2</td>
<td align="left">Outer radius of torus (=width/2) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">opening</td>
<td align="left">0</td>
<td align="left">Opening angle of torus [rad]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">startAngle</td>
<td align="left">-Modelica.Constants.pi</td>
<td align="left">Start angle of torus slice [rad]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">stopAngle</td>
<td align="left">Modelica.Constants.pi</td>
<td align="left">End angle of torus slice [rad]</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="28%" />
<col width="37%" />
<col width="33%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">X[nu, nv]</td>
<td align="left">[nu,nv] positions of points in x-Direction resolved in surface frame [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">Y[nu, nv]</td>
<td align="left">[nu,nv] positions of points in y-Direction resolved in surface frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">Z[nu, nv]</td>
<td align="left">[nu,nv] positions of points in z-Direction resolved in surface frame [m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">C[if multiColoredSurface then nu else 0, if multiColoredSurface then nv else 0, 3]</td>
<td align="left">[nu,nv,3] Color array, defining the color for each surface point</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>function torus 
  &quot;Function defining the surface characteristic of a torus&quot;
  extends Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic(
            final multiColoredSurface=false);
  input Modelica.SIunits.Radius ri=1 &quot;Inner radius of torus&quot;;
  input Modelica.SIunits.Radius ro=0.2 &quot;Outer radius of torus (=width/2)&quot;;
  input Modelica.SIunits.Angle opening=0 &quot;Opening angle of torus&quot;;
  input Modelica.SIunits.Angle startAngle= -Modelica.Constants.pi 
    &quot;Start angle of torus slice&quot;;
  input Modelica.SIunits.Angle stopAngle= Modelica.Constants.pi 
    &quot;End angle of torus slice&quot;;
protected 
  Modelica.SIunits.Angle alpha;
  Modelica.SIunits.Angle beta;
  Modelica.SIunits.Angle phi_start;
  Modelica.SIunits.Angle phi_stop;
algorithm 
  phi_start :=-Modelica.Constants.pi + opening;
  phi_stop  :=Modelica.Constants.pi - opening;
  for i in 1:nu loop
      alpha := startAngle + (stopAngle-startAngle)*(i-1)/(nu-1);
      for j in 1:nv loop
          beta := phi_start + (phi_stop-phi_start)*(j-1)/(nv-1);
          X[i,j] := (ri + ro*cos(beta))*sin(alpha);
          Y[i,j] := ro*sin(beta);
          Z[i,j] := (ri + ro*cos(beta))*cos(alpha);
      end for;
  end for;
end torus;</code></pre>
<hr />
<h1 id="modelica.mechanics.multibody.visualizers.advanced.surfacecharacteristics.pipewithscalarfield"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced_SurfaceCharacteristics.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics">Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics</a>.pipeWithScalarField</h1>
<p><strong>Function defining the surface characteristic of a pipe where a scalar field value is displayed with color along the pipe axis</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Function <strong>pipeWithScalarField</strong> computes the X,Y,Z,C arrays in order to visualize a pipe and a scalar field along the pipe axis with model <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.PipeWithScalarField">PipeWithScalarField</a>. The latter is shown by mapping scalar field to color values with a color map and utilizing this color at the perimeter associated with the corresponding axis location. Typically the scalar field value is a temperature, but might be also another quantity. Predefined color maps are available from <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors_ColorMaps.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps">MultiBody.Visualizers.Colors.ColorMaps</a> and can be selected via input argument &quot;colorMap&quot;. A color map with the corresponding scalar field values can be exported as vector-graphics in svg-format with function <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg">MultiBody.Visualizers.Colors.colorMapToSvg</a>. An example is shown in the next figure:</p>
<blockquote>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/PipeWithScalarField.png" alt="image5" /><p class="caption">image5</p>
</div>
</blockquote>
<p>The color coding is shown in the next figure. It was generated with <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg">Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg</a> using the following call:</p>
<blockquote>
<pre><code>colorMapToSvg(Modelica.Mechanics.MultiBody.Visualizer.Colors.ColorMap.jet(),
              height=50, nScalars=6, T_max=100, heading=&quot;Temperature in C&quot;);</code></pre>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/PipeWithScalarField-ColorMap.png" alt="image6" /><p class="caption">image6</p>
</div>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic">Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic</a>.</p>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="39%" />
<col width="14%" />
<col width="7%" />
<col width="39%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">nu</td>
<td align="left">
</td>
<td align="left">Number of points in u-Dimension</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">nv</td>
<td align="left">
</td>
<td align="left">Number of points in v-Dimension</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">multiColoredSurface</td>
<td align="left">true</td>
<td align="left">= true: Color is defined for each surface point</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Radius">Radius</a></td>
<td align="left">rOuter</td>
<td align="left">
</td>
<td align="left">Outer radius of cylinder [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">
</td>
<td align="left">Length of cylinder [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">xsi[:]</td>
<td align="left">
</td>
<td align="left">Relative position along the pipe with x[1] = 0, x[end] = 1 [m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">T[size(xsi, 1)]</td>
<td align="left">
</td>
<td align="left">Scalar field value at position xsi*length</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">T_min</td>
<td align="left">
</td>
<td align="left">T &lt;= T_min is mapped to colorMap[1,:]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">T_max</td>
<td align="left">
</td>
<td align="left">T &gt;= T_max is mapped to colorMap[end,:]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">colorMap[:, 3]</td>
<td align="left">
</td>
<td align="left">Color map to map scalar T to a corresponding color</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="28%" />
<col width="37%" />
<col width="33%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">X[nu, nv]</td>
<td align="left">[nu,nv] positions of points in x-Direction resolved in surface frame [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">Y[nu, nv]</td>
<td align="left">[nu,nv] positions of points in y-Direction resolved in surface frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">Z[nu, nv]</td>
<td align="left">[nu,nv] positions of points in z-Direction resolved in surface frame [m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">C[if multiColoredSurface then nu else 0, if multiColoredSurface then nv else 0, 3]</td>
<td align="left">[nu,nv,3] Color array, defining the color for each surface point</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>function pipeWithScalarField 
  &quot;Function defining the surface characteristic of a pipe where a scalar field value is displayed with color along the pipe axis&quot;
  import C = Modelica.Constants;
  extends Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic(
            final multiColoredSurface=true);
  input Modelica.SIunits.Radius rOuter &quot;Outer radius of cylinder&quot;;
  input Modelica.SIunits.Length length &quot;Length of cylinder&quot;;
  input Modelica.SIunits.Position xsi[:] 
    &quot;Relative position along the pipe with x[1] = 0, x[end] = 1&quot;;
  input Real T[size(xsi,1)] &quot;Scalar field value at position xsi*length&quot;;
  input Real T_min &quot;T &lt;= T_min is mapped to colorMap[1,:]&quot;;
  input Real T_max &quot;T &gt;= T_max is mapped to colorMap[end,:]&quot;;
  input Real colorMap[:,3] &quot;Color map to map scalar T to a corresponding color&quot;;
protected 
  Real beta;
  Real xsi_i;
  Real Ti;
  Real Ci[3];
  Integer k;
algorithm 
  k:=1;
  for i in 1:nu loop
     // Compute actual xsi-position along cylinder axis
     xsi_i := (i-1)/(nu-1);

     // Interpolate in xsi and T to determine the corresponding value of Ti(xsi_i)
     (Ti,k) := Modelica.Math.Vectors.interpolate(xsi, T, xsi_i, k);

     // Map the scalar field value Ti to a color value
     Ci := Modelica.Mechanics.MultiBody.Visualizers.Colors.scalarToColor(
                                              Ti, T_min, T_max, colorMap);

     // Determine outputs
     for j in 1:nv loop
        beta := 2*Modelica.Constants.pi*(j-1)/(nv-1);
        X[i,j] := length*xsi_i;
        Y[i,j] := rOuter*sin(beta);
        Z[i,j] := rOuter*cos(beta);
        C[i,j,:] := Ci;
     end for;
  end for;
end pipeWithScalarField;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:40 2010.</p>
</body>
</html>
