<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</h1>
</div>
<h1 id="modelica.fluid.fittings.baseclasses.quadraticturbulent"><a href="Modelica_Fluid_Fittings_BaseClasses.html#Modelica.Fluid.Fittings.BaseClasses">Modelica.Fluid.Fittings.BaseClasses</a>.QuadraticTurbulent</h1>
<p><strong>Pressure loss components that are mainly defined by a quadratic turbulent regime with constant loss factor data</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This library provides pressure loss factors of a pipe segment (orifice, bending etc.) with a minimum amount of data. If available, data can be provided for <strong>both flow directions</strong>, i.e., flow from port_a to port_b and from port_b to port_a, as well as for the <strong>laminar</strong> and the <strong>turbulent</strong> region. It is also an option to provide the loss factor <strong>only</strong> for the <strong>turbulent</strong> region for a flow from port_a to port_b. Basically, the pressure drop is defined by the following equation:</p>
<pre><code>Δp = 0.5*ζ*ρ*v*|v|
   = 0.5*ζ/A^2 * (1/ρ) * m_flow*|m_flow|
   = 8*ζ/(π^2*D^4*ρ) * m_flow*|m_flow|</code></pre>
<p>where</p>
<ul>
<li>Δp is the pressure drop: Δp = port_a.p - port_b.p</li>
<li>v is the mean velocity.</li>
<li>ρ is the density.</li>
<li>ζ is the loss factor that depends on the geometry of the pipe. In the turbulent flow regime, it is assumed that ζ is constant and is given by &quot;zeta1&quot; and &quot;zeta2&quot; depending on the flow direction.</li>
<li></li>
<li>D is the diameter of the pipe segment. If this is not a circular cross section, D = 4*A/P, where A is the cross section area and P is the wetted perimeter.</li>
</ul>
<p>::</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="67%" />
<col width="32%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorDataS.png" alt="image9" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" alt="image10" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp">massFlowRate_dp</a></td>
<td align="left">Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" alt="image11" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp_and_Re">massFlowRate_dp_and_Re</a></td>
<td align="left">Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" alt="image12" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow">pressureLoss_m_flow</a></td>
<td align="left">Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" alt="image13" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_and_Re">pressureLoss_m_flow_and_Re</a></td>
<td align="left">Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelS.png" alt="image14" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel">BaseModel</a></td>
<td align="left">Generic pressure drop component with constant turbulent loss factor data and without an icon</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFrictionS.png" alt="image15" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction">TestWallFriction</a></td>
<td align="left">Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionAreaS.png" alt="image16" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea">BaseModelNonconstantCrossSectionArea</a></td>
<td align="left">Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressureS.png" alt="image17" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressure">pressureLoss_m_flow_totalPressure</a></td>
<td align="left">Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image18-modelica.fluid.fittings.baseclasses.quadraticturbulent.lossfactordata"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorDataI.png" alt="image18" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.LossFactorData</h1>
<p><strong>Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>This record defines the pressure loss factors of a pipe segment (orifice, bending etc.) with a minimum amount of data. If available, data should be provided for <strong>both flow directions</strong>, i.e., flow from port_a to port_b and from port_b to port_a, as well as for the <strong>laminar</strong> and the <strong>turbulent</strong> region. It is also an option to provide the loss factor <strong>only</strong> for the <strong>turbulent</strong> region for a flow from port_a to port_b.</p>
<p>The following equations are used:</p>
<pre><code>Δp = 0.5*ζ*ρ*v*|v|
   = 0.5*ζ/A^2 * (1/ρ) * m_flow*|m_flow|
   = 8*ζ/(π^2*D^4*ρ) * m_flow*|m_flow|
     Re = |v|*D*ρ/μ</code></pre>
<table>
<col width="20%" />
<col width="25%" />
<col width="53%" />
<tbody>
<tr class="odd">
<td align="left"><strong>flow type</strong></td>
<td align="left"><strong>ζ</strong> =</td>
<td align="left"><strong>flow region</strong></td>
</tr>
<tr class="even">
<td align="left">turbulent</td>
<td align="left"><strong>zeta1</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v ≥ 0</td>
</tr>
<tr class="odd">
<td align="left">
</td>
<td align="left"><strong>zeta2</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v &lt; 0</td>
</tr>
<tr class="even">
<td align="left">laminar</td>
<td align="left"><strong>c0</strong>/Re</td>
<td align="left">both flow directions, Re small; c0 = const.</td>
</tr>
</tbody>
</table>
<p>where</p>
<ul>
<li>Δp is the pressure drop: Δp = port_a.p - port_b.p</li>
<li>v is the mean velocity.</li>
<li>ρ is the density.</li>
<li>ζ is the loss factor that depends on the geometry of the pipe. In the turbulent flow regime, it is assumed that ζ is constant and is given by &quot;zeta1&quot; and &quot;zeta2&quot; depending on the flow direction. When the Reynolds number Re is below &quot;Re_turbulent&quot;, the flow is laminar for small flow velocities. For higher velocities there is a transition region from laminar to turbulent flow. The loss factor for laminar flow at small velocities is defined by the often occuring approximation c0/Re. If c0 is different for the two flow directions, the mean value has to be used (c0 = (c0_ab + c0_ba)/2).</li>
<li></li>
<li>The equation &quot;Δp = 0.5*ζ*ρ*v*|v|&quot; is either with respect to port_a or to port_b, depending on the definition of the particular loss factor ζ (in some references loss factors are defined with respect to port_a, in other references with respect to port_b).</li>
<li>Re = |v|*D_Re*ρ/μ = |m_flow|*D_Re/(A_Re*μ) is the Reynolds number at the smallest cross section area. This is often at port_a or at port_b, but can also be between the two ports. In the record, the diameter D_Re of this smallest cross section area has to be provided, as well, as Re_turbulent, the absolute value of the Reynolds number at which the turbulent flow starts. If Re_turbulent is different for the two flow directions, use the smaller value as Re_turbulent.</li>
<li>D is the diameter of the pipe. If the pipe has not a circular cross section, D = 4*A/P, where A is the cross section area and P is the wetted perimeter.</li>
<li>A is the cross section area with A = π(D/2)^2.</li>
<li>μ is the dynamic viscosity.</li>
</ul>
<p>The laminar and the transition region is usually of not much technical interest because the operating point is mostly in the turbulent regime. For simplification and for numercial reasons, this whole region is described by two polynomials of third order, one polynomial for m_flow ≥ 0 and one for m_flow &lt; 0. The polynomials start at Re = |m_flow|*4/(π*D_Re*μ), where D_Re is the smallest diameter between port_a and port_b. The common derivative of the two polynomials at Re = 0 is computed from the equation &quot;c0/Re&quot;. Note, the pressure drop equation above in the laminar region is always defined with respect to the smallest diameter D_Re.</p>
<p>If no data for c0 is available, the derivative at Re = 0 is computed in such a way, that the second derivatives of the two polynomials are identical at Re = 0. The polynomials are constructed, such that they smoothly touch the characteristic curves in the turbulent regions. The whole characteristic is therefore <strong>continuous</strong> and has a <strong>finite</strong>, <strong>continuous first derivative everywhere</strong>. In some cases, the constructed polynomials would &quot;vibrate&quot;. This is avoided by reducing the derivative at Re=0 in such a way that the polynomials are guaranteed to be monotonically increasing. The used sufficient criteria for monotonicity follows from:</p>
<blockquote>
<dl>
<dt>Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd><p><strong>Monotone piecewise cubic interpolation</strong>. SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</p>
</dd>
</dl>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Record">Modelica.Icons.Record</a> (Icon for records).</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="40%" />
<col width="10%" />
<col width="6%" />
<col width="42%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter_a</td>
<td align="left">
</td>
<td align="left">Diameter at port_a [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter_b</td>
<td align="left">
</td>
<td align="left">Diameter at port_b [m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">zeta1</td>
<td align="left">
</td>
<td align="left">Loss factor for flow port_a -&gt; port_b</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">zeta2</td>
<td align="left">
</td>
<td align="left">Loss factor for flow port_b -&gt; port_a</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re_turbulent</td>
<td align="left">
</td>
<td align="left">Loss factors suited for Re &gt;= Re_turbulent [1]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">D_Re</td>
<td align="left">
</td>
<td align="left">Diameter used to compute Re [m]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">zeta1_at_a</td>
<td align="left">true</td>
<td align="left">dp = zeta1*(if zeta1_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">zeta2_at_a</td>
<td align="left">false</td>
<td align="left">dp = -zeta2*(if zeta2_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">zetaLaminarKnown</td>
<td align="left">false</td>
<td align="left">= true, if zeta = c0/Re in laminar region</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">c0</td>
<td align="left">1</td>
<td align="left">zeta = c0/Re; dp = zeta*rho_Re*v_Re^2/2, Re=v_Re*D_Re*rho_Re/mu_Re)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>record LossFactorData 
  &quot;Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types&quot;

       extends Modelica.Icons.Record;

 SI.Diameter diameter_a &quot;Diameter at port_a&quot;;
 SI.Diameter diameter_b &quot;Diameter at port_b&quot;;
 Real zeta1 &quot;Loss factor for flow port_a -&gt; port_b&quot;;
 Real zeta2 &quot;Loss factor for flow port_b -&gt; port_a&quot;;
 SI.ReynoldsNumber Re_turbulent &quot;Loss factors suited for Re &gt;= Re_turbulent&quot;;
 SI.Diameter D_Re &quot;Diameter used to compute Re&quot;;
 Boolean zeta1_at_a = true 
    &quot;dp = zeta1*(if zeta1_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)&quot;;
 Boolean zeta2_at_a = false 
    &quot;dp = -zeta2*(if zeta2_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)&quot;;
 Boolean zetaLaminarKnown = false &quot;= true, if zeta = c0/Re in laminar region&quot;;
 Real c0 = 1 
    &quot;zeta = c0/Re; dp = zeta*rho_Re*v_Re^2/2, Re=v_Re*D_Re*rho_Re/mu_Re)&quot;;

  encapsulated function wallFriction 
    &quot;Return pressure loss data due to friction in a straight pipe with walls of nonuniform roughness (not useful for smooth pipes, since zeta is no function of Re)&quot;
     import Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData;
     import lg = Modelica.Math.log10;
     import SI = Modelica.SIunits;

    input SI.Length length &quot;Length of pipe&quot;;
    input SI.Diameter diameter &quot;Inner diameter of pipe&quot;;
    input SI.Length roughness(min=1e-10) 
      &quot;Absolute roughness of pipe (&gt; 0 required, details see info layer)&quot;;
    output LossFactorData data &quot;Pressure loss factors for both flow directions&quot;;
  protected 
    Real Delta = roughness/diameter &quot;relative roughness&quot;;
  algorithm 
    data.diameter_a          := diameter;
    data.diameter_b          := diameter;
    data.zeta1        := (length/diameter)/(2*lg(3.7 /Delta))^2;
    data.zeta2        := data.zeta1;
    data.Re_turbulent := 4000 
      &quot;&gt;= 560/Delta flow does not depend on Re, but interpolation is bad&quot;;
    data.D_Re         := diameter;
    data.zeta1_at_a   := true;
    data.zeta2_at_a   := false;
    data.zetaLaminarKnown := true;
    data.c0               := 64*(length/diameter);
  end wallFriction;

  encapsulated function suddenExpansion 
    &quot;Return pressure loss data for sudden expansion or contraction in a pipe (for both flow directions)&quot;
     import Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData;
     import SI = Modelica.SIunits;
    input SI.Diameter diameter_a &quot;Inner diameter of pipe at port_a&quot;;
    input SI.Diameter diameter_b &quot;Inner diameter of pipe at port_b&quot;;
    output LossFactorData data &quot;Pressure loss factors for both flow directions&quot;;
  protected 
    Real A_rel;
  algorithm 
    data.diameter_a          := diameter_a;
    data.diameter_b          := diameter_b;
    data.Re_turbulent := 100;
    data.zetaLaminarKnown := true;
    data.c0 := 30;

    if diameter_a &lt;= diameter_b then
       A_rel :=(diameter_a/diameter_b)^2;
       data.zeta1 :=(1 - A_rel)^2;
       data.zeta2 :=0.5*(1 - A_rel)^0.75;
       data.zeta1_at_a :=true;
       data.zeta2_at_a :=true;
       data.D_Re := diameter_a;
    else
       A_rel :=(diameter_b/diameter_a)^2;
       data.zeta1 :=0.5*(1 - A_rel)^0.75;
       data.zeta2 :=(1 - A_rel)^2;
       data.zeta1_at_a :=false;
       data.zeta2_at_a :=false;
       data.D_Re := diameter_b;
    end if;
  end suddenExpansion;

  encapsulated function sharpEdgedOrifice 
    &quot;Return pressure loss data for sharp edged orifice (for both flow directions)&quot;
     import NonSI = Modelica.SIunits.Conversions.NonSIunits;
     import Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData;
     import SI = Modelica.SIunits;
     input SI.Diameter diameter 
      &quot;Inner diameter of pipe (= same at port_a and port_b)&quot;;
     input SI.Diameter leastDiameter &quot;Smallest diameter of orifice&quot;;
     input SI.Diameter length &quot;Length of orifice&quot;;
     input NonSI.Angle_deg alpha &quot;Angle of orifice&quot;;
     output LossFactorData data 
      &quot;Pressure loss factors for both flow directions&quot;;
  protected 
     Real D_rel=leastDiameter/diameter;
     Real LD=length/leastDiameter;
     Real k=0.13 + 0.34*10^(-(3.4*LD + 88.4*LD^2.3));
  algorithm 
     data.diameter_a := diameter;
     data.diameter_b := diameter;
     data.zeta1 := ((1 - D_rel) + 0.707*(1 - D_rel)^0.375)^2*(1/D_rel)^2;
     data.zeta2 := k*(1 - D_rel)^0.75 + (1 - D_rel)^2 + 2*sqrt(k*(1 -
       D_rel)^0.375) + (1 - D_rel);
     data.Re_turbulent := 1e4;
     data.D_Re := leastDiameter;
     data.zeta1_at_a := true;
     data.zeta2_at_a := false;
     data.zetaLaminarKnown := false;
     data.c0 := 0;
  end sharpEdgedOrifice;

end LossFactorData;</code></pre>
<hr />
<h1 id="image19-modelica.fluid.fittings.baseclasses.quadraticturbulent.massflowrate_dp"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" alt="image19" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.massFlowRate_dp</h1>
<p><strong>Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Compute mass flow rate from constant loss factor and pressure drop (m_flow = f(dp)). For small pressure drops (dp &lt; dp_small), the characteristic is approximated by a polynomial in order to have a finite derivative at zero mass flow rate.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs">Inputs</h2>
<table>
<col width="66%" />
<col width="6%" />
<col width="5%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">dp</td>
<td align="left">
</td>
<td align="left">Pressure drop (dp = port_a.p - port_b.p) [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a</td>
<td align="left">
</td>
<td align="left">Density at port_a [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b</td>
<td align="left">
</td>
<td align="left">Density at port_b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Constant loss factors for both flow directions</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">1</td>
<td align="left">Turbulent flow if |dp| &gt;= dp_small [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="54%" />
<col width="8%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from port_a to port_b [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>function massFlowRate_dp 
  &quot;Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))&quot;
        //import Modelica.Fluid.PressureLosses.BaseClasses.lossConstant_D_zeta;
  extends Modelica.Icons.Function;

  input SI.Pressure dp &quot;Pressure drop (dp = port_a.p - port_b.p)&quot;;
  input SI.Density rho_a &quot;Density at port_a&quot;;
  input SI.Density rho_b &quot;Density at port_b&quot;;
  input LossFactorData data &quot;Constant loss factors for both flow directions&quot;;
  input SI.AbsolutePressure dp_small = 1 &quot;Turbulent flow if |dp| &gt;= dp_small&quot;;
  output SI.MassFlowRate m_flow &quot;Mass flow rate from port_a to port_b&quot;;

protected 
  Real k1 = lossConstant_D_zeta(if data.zeta1_at_a then data.diameter_a else data.diameter_b,data.zeta1);
  Real k2 = lossConstant_D_zeta(if data.zeta2_at_a then data.diameter_a else data.diameter_b,data.zeta2);
algorithm 
  /*
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
  */
  m_flow :=Utilities.regRoot2(dp, dp_small, rho_a/k1, rho_b/k2);
end massFlowRate_dp;</code></pre>
<hr />
<h1 id="image20-modelica.fluid.fittings.baseclasses.quadraticturbulent.massflowrate_dp_and_re"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" alt="image20" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.massFlowRate_dp_and_Re</h1>
<p><strong>Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>Compute mass flow rate from constant loss factor and pressure drop (m_flow = f(dp)). If the Reynolds-number Re ≥ data.Re_turbulent, the flow is treated as a turbulent flow with constant loss factor zeta. If the Reynolds-number Re &lt; data.Re_turbulent, the flow is laminar and/or in a transition region between laminar and turbulent. This region is approximated by two polynomials of third order, one polynomial for m_flow ≥ 0 and one for m_flow &lt; 0. The common derivative of the two polynomials at Re = 0 is computed from the equation &quot;data.c0/Re&quot;.</p>
<p>If no data for c0 is available, the derivative at Re = 0 is computed in such a way, that the second derivatives of the two polynomials are identical at Re = 0. The polynomials are constructed, such that they smoothly touch the characteristic curves in the turbulent regions. The whole characteristic is therefore <strong>continuous</strong> and has a <strong>finite</strong>, <strong>continuous first derivative everywhere</strong>. In some cases, the constructed polynomials would &quot;vibrate&quot;. This is avoided by reducing the derivative at Re=0 in such a way that the polynomials are guaranteed to be monotonically increasing. The used sufficient criteria for monotonicity follows from:</p>
<blockquote>
<dl>
<dt>Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd><p><strong>Monotone piecewise cubic interpolation</strong>. SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</p>
</dd>
</dl>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="67%" />
<col width="4%" />
<col width="5%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">dp</td>
<td align="left">
</td>
<td align="left">Pressure drop (dp = port_a.p - port_b.p) [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a</td>
<td align="left">
</td>
<td align="left">Density at port_a [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b</td>
<td align="left">
</td>
<td align="left">Density at port_b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">mu_a</td>
<td align="left">
</td>
<td align="left">Dynamic viscosity at port_a [Pa.s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">mu_b</td>
<td align="left">
</td>
<td align="left">Dynamic viscosity at port_b [Pa.s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Constant loss factors for both flow directions</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="54%" />
<col width="8%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from port_a to port_b [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>function massFlowRate_dp_and_Re 
  &quot;Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))&quot;
        extends Modelica.Icons.Function;

  input SI.Pressure dp &quot;Pressure drop (dp = port_a.p - port_b.p)&quot;;
  input SI.Density rho_a &quot;Density at port_a&quot;;
  input SI.Density rho_b &quot;Density at port_b&quot;;
  input SI.DynamicViscosity mu_a &quot;Dynamic viscosity at port_a&quot;;
  input SI.DynamicViscosity mu_b &quot;Dynamic viscosity at port_b&quot;;
  input LossFactorData data &quot;Constant loss factors for both flow directions&quot;;
  output SI.MassFlowRate m_flow &quot;Mass flow rate from port_a to port_b&quot;;

protected 
  constant Real pi=Modelica.Constants.pi;
  Real k0=2*data.c0/(pi*data.D_Re^3);
  Real k1 = lossConstant_D_zeta(if data.zeta1_at_a then data.diameter_a else data.diameter_b,data.zeta1);
  Real k2 = lossConstant_D_zeta(if data.zeta2_at_a then data.diameter_a else data.diameter_b,data.zeta2);
  Real yd0 &quot;Derivative of m_flow=m_flow(dp) at zero, if data.zetaLaminarKnown&quot;;
  SI.AbsolutePressure dp_turbulent 
    &quot;The turbulent region is: |dp| &gt;= dp_turbulent&quot;;
algorithm 
/*
Turbulent region:
   Re = m_flow*(4/pi)/(D_Re*mu)
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
   m_flow_turbulent = (pi/4)*D_Re*mu*Re_turbulent
   dp_turbulent     =  k/rho *(D_Re*mu*pi/4)^2 * Re_turbulent^2

   The start of the turbulent region is computed with mean values
   of dynamic viscosity mu and density rho. Otherwise, one has
   to introduce different &quot;delta&quot; values for both flow directions.
   In order to simplify the approach, only one delta is used.

Laminar region:
   dp = 0.5*zeta/(A^2*d) * m_flow * |m_flow|
      = 0.5 * c0/(|m_flow|*(4/pi)/(D_Re*mu)) / ((pi*(D_Re/2)^2)^2*d) * m_flow*|m_flow|
      = 0.5 * c0*(pi/4)*(D_Re*mu) * 16/(pi^2*D_Re^4*d) * m_flow*|m_flow|
      = 2*c0/(pi*D_Re^3) * mu/rho * m_flow
      = k0 * mu/rho * m_flow
   k0 = 2*c0/(pi*D_Re^3)

   In order that the derivative of dp=f(m_flow) is continuous
   at m_flow=0, the mean values of mu and d are used in the
   laminar region: mu/rho = (mu_a + mu_b)/(rho_a + rho_b)
   If data.zetaLaminarKnown = false then mu_a and mu_b are potentially zero
   (because dummy values) and therefore the division is only performed
   if zetaLaminarKnown = true.
*/
   dp_turbulent :=(k1 + k2)/(rho_a + rho_b)*
                  ((mu_a + mu_b)*data.D_Re*pi/8)^2*data.Re_turbulent^2;
   yd0 :=if data.zetaLaminarKnown then 
            (rho_a + rho_b)/(k0*(mu_a + mu_b)) else 0;
   m_flow := Utilities.regRoot2(dp, dp_turbulent, rho_a/k1, rho_b/k2,
                                               data.zetaLaminarKnown, yd0);
end massFlowRate_dp_and_Re;</code></pre>
<hr />
<h1 id="image21-modelica.fluid.fittings.baseclasses.quadraticturbulent.pressureloss_m_flow"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" alt="image21" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.pressureLoss_m_flow</h1>
<p><strong>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)). For small mass flow rates(|m_flow| &lt; m_flow_small), the characteristic is approximated by a polynomial in order to have a finite derivative at zero mass flow rate.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-2">Inputs</h2>
<table>
<col width="63%" />
<col width="7%" />
<col width="4%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate from port_a to port_b [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a</td>
<td align="left">
</td>
<td align="left">Density at port_a [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b</td>
<td align="left">
</td>
<td align="left">Density at port_b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Constant loss factors for both flow directions</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">0.01</td>
<td align="left">Turbulent flow if |m_flow| &gt;= m_flow_small [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-2">Outputs</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="40%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">dp</td>
<td align="left">Pressure drop (dp = port_a.p - port_b.p) [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>function pressureLoss_m_flow 
  &quot;Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))&quot;
        extends Modelica.Icons.Function;

  input SI.MassFlowRate m_flow &quot;Mass flow rate from port_a to port_b&quot;;
  input SI.Density rho_a &quot;Density at port_a&quot;;
  input SI.Density rho_b &quot;Density at port_b&quot;;
  input LossFactorData data &quot;Constant loss factors for both flow directions&quot;;
  input SI.MassFlowRate m_flow_small = 0.01 
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;;
  output SI.Pressure dp &quot;Pressure drop (dp = port_a.p - port_b.p)&quot;;

protected 
  Real k1 = lossConstant_D_zeta(if data.zeta1_at_a then data.diameter_a else data.diameter_b,data.zeta1);
  Real k2 = lossConstant_D_zeta(if data.zeta2_at_a then data.diameter_a else data.diameter_b,data.zeta2);
algorithm 
  /*
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
  */
  dp :=Utilities.regSquare2(m_flow, m_flow_small, k1/rho_a, k2/rho_b);
end pressureLoss_m_flow;</code></pre>
<hr />
<h1 id="image22-modelica.fluid.fittings.baseclasses.quadraticturbulent.pressureloss_m_flow_and_re"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" alt="image22" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.pressureLoss_m_flow_and_Re</h1>
<p><strong>Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)). If the Reynolds-number Re ≥ data.Re_turbulent, the flow is treated as a turbulent flow with constant loss factor zeta. If the Reynolds-number Re &lt; data.Re_turbulent, the flow is laminar and/or in a transition region between laminar and turbulent. This region is approximated by two polynomials of third order, one polynomial for m_flow ≥ 0 and one for m_flow &lt; 0. The common derivative of the two polynomials at Re = 0 is computed from the equation &quot;data.c0/Re&quot;.</p>
<p>If no data for c0 is available, the derivative at Re = 0 is computed in such a way, that the second derivatives of the two polynomials are identical at Re = 0. The polynomials are constructed, such that they smoothly touch the characteristic curves in the turbulent regions. The whole characteristic is therefore <strong>continuous</strong> and has a <strong>finite</strong>, <strong>continuous first derivative everywhere</strong>. In some cases, the constructed polynomials would &quot;vibrate&quot;. This is avoided by reducing the derivative at Re=0 in such a way that the polynomials are guaranteed to be monotonically increasing. The used sufficient criteria for monotonicity follows from:</p>
<blockquote>
<dl>
<dt>Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd><p><strong>Monotone piecewise cubic interpolation</strong>. SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</p>
</dd>
</dl>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-3">Inputs</h2>
<table>
<col width="67%" />
<col width="5%" />
<col width="5%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate from port_a to port_b [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a</td>
<td align="left">
</td>
<td align="left">Density at port_a [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b</td>
<td align="left">
</td>
<td align="left">Density at port_b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">mu_a</td>
<td align="left">
</td>
<td align="left">Dynamic viscosity at port_a [Pa.s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">mu_b</td>
<td align="left">
</td>
<td align="left">Dynamic viscosity at port_b [Pa.s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Constant loss factors for both flow directions</td>
</tr>
</tbody>
</table>
<h2 id="outputs-3">Outputs</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="40%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">dp</td>
<td align="left">Pressure drop (dp = port_a.p - port_b.p) [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>function pressureLoss_m_flow_and_Re 
  &quot;Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))&quot;
        extends Modelica.Icons.Function;

  input SI.MassFlowRate m_flow &quot;Mass flow rate from port_a to port_b&quot;;
  input SI.Density rho_a &quot;Density at port_a&quot;;
  input SI.Density rho_b &quot;Density at port_b&quot;;
  input SI.DynamicViscosity mu_a &quot;Dynamic viscosity at port_a&quot;;
  input SI.DynamicViscosity mu_b &quot;Dynamic viscosity at port_b&quot;;
  input LossFactorData data &quot;Constant loss factors for both flow directions&quot;;
  output SI.Pressure dp &quot;Pressure drop (dp = port_a.p - port_b.p)&quot;;

protected 
  constant Real pi=Modelica.Constants.pi;
  Real k0 = 2*data.c0/(pi*data.D_Re^3);
  Real k1 = lossConstant_D_zeta(if data.zeta1_at_a then data.diameter_a else data.diameter_b,data.zeta1);
  Real k2 = lossConstant_D_zeta(if data.zeta2_at_a then data.diameter_a else data.diameter_b,data.zeta2);
  Real yd0 &quot;Derivative of dp = f(m_flow) at zero, if data.zetaLaminarKnown&quot;;
  SI.MassFlowRate m_flow_turbulent 
    &quot;The turbulent region is: |m_flow| &gt;= m_flow_turbulent&quot;;
algorithm 
/*
Turbulent region:
   Re = m_flow*(4/pi)/(D_Re*mu)
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
   m_flow_turbulent = (pi/4)*D_Re*mu*Re_turbulent
   dp_turbulent     =  k/rho *(D_Re*mu*pi/4)^2 * Re_turbulent^2

   The start of the turbulent region is computed with mean values
   of dynamic viscosity mu and density rho. Otherwise, one has
   to introduce different &quot;delta&quot; values for both flow directions.
   In order to simplify the approach, only one delta is used.

Laminar region:
   dp = 0.5*zeta/(A^2*d) * m_flow * |m_flow|
      = 0.5 * c0/(|m_flow|*(4/pi)/(D_Re*mu)) / ((pi*(D_Re/2)^2)^2*d) * m_flow*|m_flow|
      = 0.5 * c0*(pi/4)*(D_Re*mu) * 16/(pi^2*D_Re^4*d) * m_flow*|m_flow|
      = 2*c0/(pi*D_Re^3) * mu/rho * m_flow
      = k0 * mu/rho * m_flow
   k0 = 2*c0/(pi*D_Re^3)

   In order that the derivative of dp=f(m_flow) is continuous
   at m_flow=0, the mean values of mu and d are used in the
   laminar region: mu/rho = (mu_a + mu_b)/(rho_a + rho_b)
   If data.zetaLaminarKnown = false then mu_a and mu_b are potentially zero
   (because dummy values) and therefore the division is only performed
   if zetaLaminarKnown = true.
*/
  m_flow_turbulent :=(pi/8)*data.D_Re*(mu_a + mu_b)*data.Re_turbulent;
  yd0 :=if data.zetaLaminarKnown then k0*(mu_a + mu_b)/(rho_a + rho_b) else 0;
  dp :=Utilities.regSquare2(m_flow, m_flow_turbulent, k1/rho_a, k2/rho_b,
                                           data.zetaLaminarKnown, yd0);
end pressureLoss_m_flow_and_Re;</code></pre>
<hr />
<h1 id="image23-modelica.fluid.fittings.baseclasses.quadraticturbulent.basemodel"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelI.png" alt="image23" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.BaseModel</h1>
<p><strong>Generic pressure drop component with constant turbulent loss factor data and without an icon</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>This model computes the pressure loss of a pipe segment (orifice, bending etc.) with a minimum amount of data provided via parameter <strong>data</strong>. If available, data should be provided for <strong>both flow directions</strong>, i.e., flow from port_a to port_b and from port_b to port_a, as well as for the <strong>laminar</strong> and the <strong>turbulent</strong> region. It is also an option to provide the loss factor <strong>only</strong> for the <strong>turbulent</strong> region for a flow from port_a to port_b.</p>
<p>The following equations are used:</p>
<pre><code>Δp = 0.5*ζ*ρ*v*|v|
   = 0.5*ζ/A^2 * (1/ρ) * m_flow*|m_flow|
     Re = |v|*D*ρ/μ</code></pre>
<table>
<col width="20%" />
<col width="25%" />
<col width="53%" />
<tbody>
<tr class="odd">
<td align="left"><strong>flow type</strong></td>
<td align="left"><strong>ζ</strong> =</td>
<td align="left"><strong>flow region</strong></td>
</tr>
<tr class="even">
<td align="left">turbulent</td>
<td align="left"><strong>zeta1</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v ≥ 0</td>
</tr>
<tr class="odd">
<td align="left">
</td>
<td align="left"><strong>zeta2</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v &lt; 0</td>
</tr>
<tr class="even">
<td align="left">laminar</td>
<td align="left"><strong>c0</strong>/Re</td>
<td align="left">both flow directions, Re small; c0 = const.</td>
</tr>
</tbody>
</table>
<p>where</p>
<ul>
<li>Δp is the pressure drop: Δp = port_a.p - port_b.p</li>
<li>v is the mean velocity.</li>
<li>ρ is the density.</li>
<li>ζ is the loss factor that depends on the geometry of the pipe. In the turbulent flow regime, it is assumed that ζ is constant and is given by &quot;zeta1&quot; and &quot;zeta2&quot; depending on the flow direction. When the Reynolds number Re is below &quot;Re_turbulent&quot;, the flow is laminar for small flow velocities. For higher velocities there is a transition region from laminar to turbulent flow. The loss factor for laminar flow at small velocities is defined by the often occuring approximation c0/Re. If c0 is different for the two flow directions, the mean value has to be used (c0 = (c0_ab + c0_ba)/2).</li>
<li></li>
<li>The equation &quot;Δp = 0.5*ζ*ρ*v*|v|&quot; is either with respect to port_a or to port_b, depending on the definition of the particular loss factor ζ (in some references loss factors are defined with respect to port_a, in other references with respect to port_b).</li>
<li>Re = |v|*D_Re*ρ/μ = |m_flow|*D_Re/(A_Re*μ) is the Reynolds number at the smallest cross section area. This is often at port_a or at port_b, but can also be between the two ports. In the record, the diameter D_Re of this smallest cross section area has to be provided, as well, as Re_turbulent, the absolute value of the Reynolds number at which the turbulent flow starts. If Re_turbulent is different for the two flow directions, use the smaller value as Re_turbulent.</li>
<li>D is the diameter of the pipe. If the pipe has not a circular cross section, D = 4*A/P, where A is the cross section area and P is the wetted perimeter.</li>
<li>A is the cross section area with A = π(D/2)^2.</li>
<li>μ is the dynamic viscosity.</li>
</ul>
<p>The laminar and the transition region is usually of not much technical interest because the operating point is mostly in the turbulent regime. For simplification and for numercial reasons, this whole region is described by two polynomials of third order, one polynomial for m_flow ≥ 0 and one for m_flow &lt; 0. The polynomials start at Re = |m_flow|*4/(π*D_Re*μ), where D_Re is the smallest diameter between port_a and port_b. The common derivative of the two polynomials at Re = 0 is computed from the equation &quot;c0/Re&quot;. Note, the pressure drop equation above in the laminar region is always defined with respect to the smallest diameter D_Re.</p>
<p>If no data for c0 is available, the derivative at Re = 0 is computed in such a way, that the second derivatives of the two polynomials are identical at Re = 0. The polynomials are constructed, such that they smoothly touch the characteristic curves in the turbulent regions. The whole characteristic is therefore <strong>continuous</strong> and has a <strong>finite</strong>, <strong>continuous first derivative everywhere</strong>. In some cases, the constructed polynomials would &quot;vibrate&quot;. This is avoided by reducing the derivative at Re=0 in such a way that the polynomials are guaranteed to be monotonically increasing. The used sufficient criteria for monotonicity follows from:</p>
<blockquote>
<dl>
<dt>Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd><p><strong>Monotone piecewise cubic interpolation</strong>. SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</p>
</dd>
</dl>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport">Modelica.Fluid.Interfaces.PartialTwoPortTransport</a> (Partial element transporting fluid between two ports without storage of mass or energy), <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow">Modelica.Fluid.Interfaces.PartialLumpedFlow</a> (Base class for a lumped momentum balance).</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="40%" />
<col width="28%" />
<col width="8%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">pathLength</td>
<td align="left">0</td>
<td align="left">Length flow path [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Loss factor data</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">Types.Dynamics.SteadyState</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_start</td>
<td align="left">0.01*system.p_start</td>
<td align="left">Guess value of dp = port_a.p - port_b.p [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Guess value of m_flow = port_a.m_flow [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Small mass flow rate for regularization of zero flow [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">from_dp</td>
<td align="left">true</td>
<td align="left">= true, use m_flow = f(dp) else dp = f(m_flow)</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_Re</td>
<td align="left">false</td>
<td align="left">= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">system.dp_small</td>
<td align="left">Turbulent flow if |dp| &gt;= dp_small [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_T</td>
<td align="left">true</td>
<td align="left">= true, if temperatures at port_a and port_b are computed</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_V_flow</td>
<td align="left">true</td>
<td align="left">= true, if volume flow rate at inflowing port is computed</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_Re</td>
<td align="left">false</td>
<td align="left">= true, if Reynolds number is included for plotting</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>partial model BaseModel 
  &quot;Generic pressure drop component with constant turbulent loss factor data and without an icon&quot;

  extends Modelica.Fluid.Interfaces.PartialTwoPortTransport;
  extends Modelica.Fluid.Interfaces.PartialLumpedFlow(
    final pathLength = 0,
    final momentumDynamics = Types.Dynamics.SteadyState);

  parameter LossFactorData data &quot;Loss factor data&quot;;

  // Advanced
  parameter Boolean from_dp = true 
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;;
  parameter Boolean use_Re = false 
    &quot;= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small&quot;;
  parameter Medium.AbsolutePressure dp_small = system.dp_small 
    &quot;Turbulent flow if |dp| &gt;= dp_small&quot;;
  parameter Medium.MassFlowRate m_flow_small = system.m_flow_small 
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;;

  // Diagnostics
  parameter Boolean show_Re = false 
    &quot;= true, if Reynolds number is included for plotting&quot;;
  SI.ReynoldsNumber Re = Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers.ReynoldsNumber_m_flow(
        m_flow,
        noEvent(if m_flow&gt;0 then Medium.dynamicViscosity(state_a) else Medium.dynamicViscosity(state_b)),
        data.D_Re) if show_Re &quot;Reynolds number at diameter data.D_Re&quot;;

  // Variables
  Modelica.SIunits.Pressure dp_fg &quot;pressure loss due to friction and gravity&quot;;
  Modelica.SIunits.Area A_mean = Modelica.Constants.pi/4*(data.diameter_a^2+data.diameter_b^2)/2 
    &quot;mean cross flow area&quot;;

equation 
  Ib_flow = 0;
  F_p = A_mean*(Medium.pressure(state_b) - Medium.pressure(state_a));
  F_fg = A_mean*dp_fg;
  if from_dp then
     m_flow = if use_Re then 
                 massFlowRate_dp_and_Re(
                    dp_fg, Medium.density(state_a), Medium.density(state_b),
                    Medium.dynamicViscosity(state_a),
                    Medium.dynamicViscosity(state_b),
                    data) else 
                 massFlowRate_dp(dp_fg, Medium.density(state_a), Medium.density(state_b), data, dp_small);
  else
     dp_fg = if use_Re then 
             pressureLoss_m_flow_and_Re(
                 m_flow, Medium.density(state_a), Medium.density(state_b),
                 Medium.dynamicViscosity(state_a),
                 Medium.dynamicViscosity(state_b),
                 data) else 
             pressureLoss_m_flow(m_flow, Medium.density(state_a), Medium.density(state_b), data, m_flow_small);
  end if;

  // Isenthalpic state transformation (no storage and no loss of energy)
  port_a.h_outflow = inStream(port_b.h_outflow);
  port_b.h_outflow = inStream(port_a.h_outflow);

end BaseModel;</code></pre>
<hr />
<h1 id="image24-modelica.fluid.fittings.baseclasses.quadraticturbulent.testwallfriction"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFrictionI.png" alt="image24" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.TestWallFriction</h1>
<p><strong>Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel">BaseModel</a> (Generic pressure drop component with constant turbulent loss factor data and without an icon).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="39%" />
<col width="27%" />
<col width="9%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">LossFactorData.wallFriction(...</td>
<td align="left">Loss factor data</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">
</td>
<td align="left">Length of pipe [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter</td>
<td align="left">
</td>
<td align="left">Inner diameter of pipe [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">roughness</td>
<td align="left">
</td>
<td align="left">Absolute roughness of pipe (&gt; 0 required, details see info layer) [m]</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_start</td>
<td align="left">0.01*system.p_start</td>
<td align="left">Guess value of dp = port_a.p - port_b.p [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Guess value of m_flow = port_a.m_flow [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Small mass flow rate for regularization of zero flow [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">from_dp</td>
<td align="left">true</td>
<td align="left">= true, use m_flow = f(dp) else dp = f(m_flow)</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_Re</td>
<td align="left">false</td>
<td align="left">= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">system.dp_small</td>
<td align="left">Turbulent flow if |dp| &gt;= dp_small [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_T</td>
<td align="left">true</td>
<td align="left">= true, if temperatures at port_a and port_b are computed</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_V_flow</td>
<td align="left">true</td>
<td align="left">= true, if volume flow rate at inflowing port is computed</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_Re</td>
<td align="left">false</td>
<td align="left">= true, if Reynolds number is included for plotting</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>model TestWallFriction 
  &quot;Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)&quot;
        extends BaseModel(final data=
          LossFactorData.wallFriction(
          length,
          diameter,
          roughness));
  parameter SI.Length length &quot;Length of pipe&quot;;
  parameter SI.Diameter diameter &quot;Inner diameter of pipe&quot;;
  parameter SI.Length roughness(min=1e-10) 
    &quot;Absolute roughness of pipe (&gt; 0 required, details see info layer)&quot;;
end TestWallFriction;</code></pre>
<hr />
<h1 id="image25-modelica.fluid.fittings.baseclasses.quadraticturbulent.basemodelnonconstantcrosssectionarea"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionAreaI.png" alt="image25" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.BaseModelNonconstantCrossSectionArea</h1>
<p><strong>Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>This model computes the pressure loss of a pipe segment (orifice, bending etc.) with a minimum amount of data provided via parameter <strong>data</strong>. If available, data should be provided for <strong>both flow directions</strong>, i.e., flow from port_a to port_b and from port_b to port_a, as well as for the <strong>laminar</strong> and the <strong>turbulent</strong> region. It is also an option to provide the loss factor <strong>only</strong> for the <strong>turbulent</strong> region for a flow from port_a to port_b.</p>
<p>The following equations are used:</p>
<pre><code>Δp = 0.5*ζ*ρ*v*|v|
   = 0.5*ζ/A^2 * (1/ρ) * m_flow*|m_flow|
     Re = |v|*D*ρ/μ</code></pre>
<table>
<col width="20%" />
<col width="25%" />
<col width="53%" />
<tbody>
<tr class="odd">
<td align="left"><strong>flow type</strong></td>
<td align="left"><strong>ζ</strong> =</td>
<td align="left"><strong>flow region</strong></td>
</tr>
<tr class="even">
<td align="left">turbulent</td>
<td align="left"><strong>zeta1</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v ≥ 0</td>
</tr>
<tr class="odd">
<td align="left">
</td>
<td align="left"><strong>zeta2</strong> = const.</td>
<td align="left">Re ≥ Re_turbulent, v &lt; 0</td>
</tr>
<tr class="even">
<td align="left">laminar</td>
<td align="left"><strong>c0</strong>/Re</td>
<td align="left">both flow directions, Re small; c0 = const.</td>
</tr>
</tbody>
</table>
<p>where</p>
<ul>
<li>Δp is the pressure drop: Δp = port_a.p - port_b.p</li>
<li>v is the mean velocity.</li>
<li>ρ is the density.</li>
<li>ζ is the loss factor that depends on the geometry of the pipe. In the turbulent flow regime, it is assumed that ζ is constant and is given by &quot;zeta1&quot; and &quot;zeta2&quot; depending on the flow direction. When the Reynolds number Re is below &quot;Re_turbulent&quot;, the flow is laminar for small flow velocities. For higher velocities there is a transition region from laminar to turbulent flow. The loss factor for laminar flow at small velocities is defined by the often occuring approximation c0/Re. If c0 is different for the two flow directions, the mean value has to be used (c0 = (c0_ab + c0_ba)/2).</li>
<li></li>
<li>The equation &quot;Δp = 0.5*ζ*ρ*v*|v|&quot; is either with respect to port_a or to port_b, depending on the definition of the particular loss factor ζ (in some references loss factors are defined with respect to port_a, in other references with respect to port_b).</li>
<li>Re = |v|*D_Re*ρ/μ = |m_flow|*D_Re/(A_Re*μ) is the Reynolds number at the smallest cross section area. This is often at port_a or at port_b, but can also be between the two ports. In the record, the diameter D_Re of this smallest cross section area has to be provided, as well, as Re_turbulent, the absolute value of the Reynolds number at which the turbulent flow starts. If Re_turbulent is different for the two flow directions, use the smaller value as Re_turbulent.</li>
<li>D is the diameter of the pipe. If the pipe has not a circular cross section, D = 4*A/P, where A is the cross section area and P is the wetted perimeter.</li>
<li>A is the cross section area with A = π(D/2)^2.</li>
<li>μ is the dynamic viscosity.</li>
</ul>
<p>The laminar and the transition region is usually of not much technical interest because the operating point is mostly in the turbulent regime. For simplification and for numercial reasons, this whole region is described by two polynomials of third order, one polynomial for m_flow ≥ 0 and one for m_flow &lt; 0. The polynomials start at Re = |m_flow|*4/(π*D_Re*μ), where D_Re is the smallest diameter between port_a and port_b. The common derivative of the two polynomials at Re = 0 is computed from the equation &quot;c0/Re&quot;. Note, the pressure drop equation above in the laminar region is always defined with respect to the smallest diameter D_Re.</p>
<p>If no data for c0 is available, the derivative at Re = 0 is computed in such a way, that the second derivatives of the two polynomials are identical at Re = 0. The polynomials are constructed, such that they smoothly touch the characteristic curves in the turbulent regions. The whole characteristic is therefore <strong>continuous</strong> and has a <strong>finite</strong>, <strong>continuous first derivative everywhere</strong>. In some cases, the constructed polynomials would &quot;vibrate&quot;. This is avoided by reducing the derivative at Re=0 in such a way that the polynomials are guaranteed to be monotonically increasing. The used sufficient criteria for monotonicity follows from:</p>
<blockquote>
<dl>
<dt>Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd><p><strong>Monotone piecewise cubic interpolation</strong>. SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</p>
</dd>
</dl>
</blockquote>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport">Modelica.Fluid.Interfaces.PartialTwoPortTransport</a> (Partial element transporting fluid between two ports without storage of mass or energy), <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow">Modelica.Fluid.Interfaces.PartialLumpedFlow</a> (Base class for a lumped momentum balance).</p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="40%" />
<col width="28%" />
<col width="8%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">pathLength</td>
<td align="left">0</td>
<td align="left">Length flow path [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Loss factor data</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">Types.Dynamics.SteadyState</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_start</td>
<td align="left">0.01*system.p_start</td>
<td align="left">Guess value of dp = port_a.p - port_b.p [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Guess value of m_flow = port_a.m_flow [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Small mass flow rate for regularization of zero flow [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">system.dp_small</td>
<td align="left">Turbulent flow if |dp| &gt;= dp_small [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_T</td>
<td align="left">true</td>
<td align="left">= true, if temperatures at port_a and port_b are computed</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_V_flow</td>
<td align="left">true</td>
<td align="left">= true, if volume flow rate at inflowing port is computed</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_Re</td>
<td align="left">false</td>
<td align="left">= true, if Reynolds number is included for plotting</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_totalPressures</td>
<td align="left">false</td>
<td align="left">= true, if total pressures are included for plotting</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_portVelocities</td>
<td align="left">false</td>
<td align="left">= true, if port velocities are included for plotting</td>
</tr>
</tbody>
</table>
<h2 id="connectors-2">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>partial model BaseModelNonconstantCrossSectionArea 
  &quot;Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area&quot;

  extends Modelica.Fluid.Interfaces.PartialTwoPortTransport;
  extends Modelica.Fluid.Interfaces.PartialLumpedFlow(
    final pathLength = 0,
    final momentumDynamics = Types.Dynamics.SteadyState);

  parameter LossFactorData data &quot;Loss factor data&quot;;

  // Advanced
  /// Other settings than the final values are not yet implemented ///
  final parameter Boolean from_dp = false 
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;;
  final parameter Boolean use_Re = false 
    &quot;= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small&quot;;
  // End not yet implemented /////////////////////////////////////////
  parameter Medium.AbsolutePressure dp_small = system.dp_small 
    &quot;Turbulent flow if |dp| &gt;= dp_small&quot;;
  parameter Medium.MassFlowRate m_flow_small = system.m_flow_small 
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;;

  // Diagnostics
  parameter Boolean show_Re = false 
    &quot;= true, if Reynolds number is included for plotting&quot;;
  SI.ReynoldsNumber Re = Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers.ReynoldsNumber_m_flow(
        m_flow,
        noEvent(if m_flow&gt;0 then Medium.dynamicViscosity(state_a) else Medium.dynamicViscosity(state_b)),
        data.D_Re) if show_Re &quot;Reynolds number at diameter data.D_Re&quot;;
  parameter Boolean show_totalPressures = false 
    &quot;= true, if total pressures are included for plotting&quot;;
  SI.AbsolutePressure p_total_a = port_a.p + 0.5 * m_flow^2 /((Modelica.Constants.pi/4 * data.diameter_a^2)^2 * noEvent(if port_a.m_flow &gt; 0 then Medium.density(state_a) else Medium.density(state_b))) if 
    show_totalPressures &quot;Total pressure at port_a&quot;;
  SI.AbsolutePressure p_total_b = port_b.p + 0.5 * m_flow^2 /((Modelica.Constants.pi/4 * data.diameter_b^2)^2 * noEvent(if port_b.m_flow &gt; 0 then Medium.density(state_b) else Medium.density(state_a))) if 
    show_totalPressures &quot;Total pressure at port_a&quot;;
  parameter Boolean show_portVelocities = false 
    &quot;= true, if port velocities are included for plotting&quot;;
  SI.Velocity v_a = port_a.m_flow /(Modelica.Constants.pi/4 * data.diameter_a^2 * noEvent(if port_a.m_flow &gt; 0 then Medium.density(state_a) else Medium.density(state_b))) if 
    show_portVelocities &quot;Fluid velocity into port_a&quot;;
  SI.Velocity v_b = port_b.m_flow /(Modelica.Constants.pi/4 * data.diameter_b^2 * noEvent(if port_b.m_flow &gt; 0 then Medium.density(state_b) else Medium.density(state_a))) if 
    show_portVelocities &quot;Fluid velocity into port_b&quot;;

  // Variables
  Modelica.SIunits.Pressure dp_fg &quot;pressure loss due to friction and gravity&quot;;
  Modelica.SIunits.Area A_mean = Modelica.Constants.pi/4*(data.diameter_a^2+data.diameter_b^2)/2 
    &quot;mean cross flow area&quot;;

  Medium.ThermodynamicState state_b_des 
    &quot;Thermodynamic state at port b for flow a -&gt; b&quot;;
  Medium.ThermodynamicState state_a_nondes 
    &quot;Thermodynamic state at port a for flow a &lt;- b&quot;;

equation 
  Ib_flow = 0;
  F_p = A_mean*(Medium.pressure(state_b) - Medium.pressure(state_a));
  F_fg = A_mean*dp_fg;
  if from_dp then
     m_flow = if use_Re then 
                 massFlowRate_dp_and_Re(
                    dp_fg, Medium.density(state_a), Medium.density(state_b),
                    Medium.dynamicViscosity(state_a),
                    Medium.dynamicViscosity(state_b),
                    data) else 
                 massFlowRate_dp(dp_fg, Medium.density(state_a), Medium.density(state_b), data, dp_small);
  else
     dp_fg = if use_Re then 
             pressureLoss_m_flow_and_Re(
                 m_flow, Medium.density(state_a), Medium.density(state_b),
                 Medium.dynamicViscosity(state_a),
                 Medium.dynamicViscosity(state_b),
                 data) else 
             pressureLoss_m_flow_totalPressure(m_flow,
               Medium.density(state_a),
               Medium.density(state_b_des),
               Medium.density(state_b),
               Medium.density(state_a_nondes),
               data, m_flow_small);
  end if;

  // Isenthalpic state transformation (no storage and no loss of energy)
  port_a.h_outflow = inStream(port_b.h_outflow);
  port_b.h_outflow = inStream(port_a.h_outflow);

  // medium states for downstream properties, may want to change this neglecting the only difference from state_a, state_b, which is in pressure
  // This will remove the extra interation variables
  state_b_des = Medium.setState_phX(port_b.p, inStream(port_a.h_outflow), inStream(port_a.Xi_outflow));
  state_a_nondes = Medium.setState_phX(port_a.p, inStream(port_b.h_outflow), inStream(port_b.Xi_outflow));

end BaseModelNonconstantCrossSectionArea;</code></pre>
<hr />
<h1 id="image26-modelica.fluid.fittings.baseclasses.quadraticturbulent.pressureloss_m_flow_totalpressure"><img src="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressureI.png" alt="image26" /> <a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent">Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</a>.pressureLoss_m_flow_totalPressure</h1>
<p><strong>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)). For small mass flow rates(|m_flow| &lt; m_flow_small), the characteristic is approximated by a polynomial in order to have a finite derivative at zero mass flow rate.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-4">Inputs</h2>
<table>
<col width="59%" />
<col width="7%" />
<col width="4%" />
<col width="28%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate from port_a to port_b [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a_des</td>
<td align="left">
</td>
<td align="left">Density at port_a, mass flow in design direction a -&gt; b [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b_des</td>
<td align="left">
</td>
<td align="left">Density at port_b, mass flow in design direction a -&gt; b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_b_nondes</td>
<td align="left">
</td>
<td align="left">Density at port_b, mass flow against design direction a &lt;- b [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_a_nondes</td>
<td align="left">
</td>
<td align="left">Density at port_a, mass flow against design direction a &lt;- b [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData">LossFactorData</a></td>
<td align="left">data</td>
<td align="left">
</td>
<td align="left">Constant loss factors for both flow directions</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">0.01</td>
<td align="left">Turbulent flow if |m_flow| &gt;= m_flow_small [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-4">Outputs</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="40%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">dp</td>
<td align="left">Pressure drop (dp = port_a.p - port_b.p) [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>function pressureLoss_m_flow_totalPressure 
  &quot;Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))&quot;
        extends Modelica.Icons.Function;

  input SI.MassFlowRate m_flow &quot;Mass flow rate from port_a to port_b&quot;;
  input SI.Density rho_a_des 
    &quot;Density at port_a, mass flow in design direction a -&gt; b&quot;;
  input SI.Density rho_b_des 
    &quot;Density at port_b, mass flow in design direction a -&gt; b&quot;;
  input SI.Density rho_b_nondes 
    &quot;Density at port_b, mass flow against design direction a &lt;- b&quot;;
  input SI.Density rho_a_nondes 
    &quot;Density at port_a, mass flow against design direction a &lt;- b&quot;;
  input LossFactorData data &quot;Constant loss factors for both flow directions&quot;;
  input SI.MassFlowRate m_flow_small = 0.01 
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;;
  output SI.Pressure dp &quot;Pressure drop (dp = port_a.p - port_b.p)&quot;;

protected 
  SI.Area A_a = Modelica.Constants.pi * data.diameter_a^2/4 
    &quot;Cross section area at port_a&quot;;
  SI.Area A_b = Modelica.Constants.pi * data.diameter_b^2/4 
    &quot;Cross section area at port_b&quot;;
algorithm 
    dp := 1/2 * m_flow^2 *( if m_flow &gt; 0 then 
      data.zeta1/(if data.zeta1_at_a then rho_a_des    * A_a^2 else    rho_b_des * A_b^2) - 1/(rho_a_des    * A_a^2) + 1/(rho_b_des    * A_b^2) else 
      -data.zeta2/(if data.zeta2_at_a then rho_a_nondes * A_a^2 else rho_b_nondes * A_b^2) - 1/(rho_a_nondes * A_a^2) + 1/(rho_b_nondes * A_b^2));
end pressureLoss_m_flow_totalPressure;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:18 2010.</p>
</body>
</html>
