<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.MultiBody.Examples.Loops</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.MultiBody.Examples.Loops</h1>
</div>
<h1 id="modelica.mechanics.multibody.examples.loops"><a href="Modelica_Mechanics_MultiBody_Examples.html#Modelica.Mechanics.MultiBody.Examples">Modelica.Mechanics.MultiBody.Examples</a>.Loops</h1>
<p><strong>Examples with kinematic loops</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This package contains different examples to show how mechanical systems with kinematic loops can be modeled.</p>
<h3 id="content">Content</h3>
<table>
<col width="46%" />
<col width="53%" />
<thead>
<tr class="header">
<th align="left"><strong><em>Model</em></strong></th>
<th align="left"><strong><em>Description</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><dl>
<dt><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1a">Engine1a</a></dt>
<dd><p><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1b">Engine1b</a> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1b_analytic">Engine1b_analytic</a></p>
</dd>
</dl></td>
<td align="left"><dl>
<dt>Model of one cylinder engine (Engine1a: simple, without combustion; Engine1b: with combustion; Engine1b_analytic: same as Engine1b but analytic loop handling)</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Examples/Loops/Engine.png" alt="image7" /><p class="caption">image7</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left"><dl>
<dt><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.EngineV6">EngineV6</a></dt>
<dd><p><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.EngineV6_analytic">EngineV6_analytic</a></p>
</dd>
</dl></td>
<td align="left"><dl>
<dt>V6 engine with 6 cylinders, 6 planar loops and 1 degree-of-freedom. Second version with analytic handling of kinematic loops and CAD data animation.</dt>
<dd><p><img src="../Resources/Images/MultiBody/Examples/Loops/EngineV6_small.png" alt="image8" /> <img src="../Resources/Images/MultiBody/Examples/Loops/EngineV6_CAD_smaller.png" alt="image9" /></p>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar1">Fourbar1</a></td>
<td align="left"><dl>
<dt>One kinematic loop with four bars (with only revolute joints; 5 non-linear equations)</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Examples/Loops/Fourbar1_small.png" alt="image10" /><p class="caption">image10</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar2">Fourbar2</a></td>
<td align="left"><dl>
<dt>One kinematic loop with four bars (with UniversalSpherical joint; 1 non-linear equation)</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Examples/Loops/Fourbar2_small.png" alt="image11" /><p class="caption">image11</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar_analytic">Fourbar_analytic</a></td>
<td align="left"><dl>
<dt>One kinematic loop with four bars (with JointSSP joint; analytic solution of non-linear algebraic loop)</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Examples/Loops/Fourbar_analytic_small.png" alt="image12" /><p class="caption">image12</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.PlanarLoops_analytic">PlanarLoops_analytic</a></td>
<td align="left"><dl>
<dt>Mechanism with three planar kinematic loops and one degree-of-freedom with analytic loop handling (with JointRRR joints)</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Examples/Loops/PlanarLoops_small.png" alt="image13" /><p class="caption">image13</p>
</div>
</dd>
</dl></td>
</tr>
</tbody>
</table>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage">Modelica.Icons.ExamplesPackage</a> (Icon for packages containing runnable examples).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="63%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image24" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1a">Engine1a</a></td>
<td align="left">Model of one cylinder engine</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image25" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1b">Engine1b</a></td>
<td align="left">Model of one cylinder engine with gas force and preparation for assembly joint JointRRP</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image26" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1b_analytic">Engine1b_analytic</a></td>
<td align="left">Model of one cylinder engine with gas force and analytic loop handling</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image27" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.EngineV6">EngineV6</a></td>
<td align="left">V6 engine with 6 cylinders, 6 planar loops and 1 degree-of-freedom</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image28" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.EngineV6_analytic">EngineV6_analytic</a></td>
<td align="left">V6 engine with 6 cylinders, 6 planar loops, 1 degree-of-freedom and analytic handling of kinematic loops</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image29" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar1">Fourbar1</a></td>
<td align="left">One kinematic loop with four bars (with only revolute joints; 5 non-linear equations)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image30" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar2">Fourbar2</a></td>
<td align="left">One kinematic loop with four bars (with UniversalSpherical joint; 1 non-linear equation)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image31" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Fourbar_analytic">Fourbar_analytic</a></td>
<td align="left">One kinematic loop with four bars (with JointSSP joint; analytic solution of non-linear algebraic loop)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aS.png" alt="image32" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.PlanarLoops_analytic">PlanarLoops_analytic</a></td>
<td align="left">Mechanism with three planar kinematic loops and one degree-of-freedom with analytic loop handling (with JointRRR joints)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.UtilitiesS.png" alt="image33" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops_Utilities.html#Modelica.Mechanics.MultiBody.Examples.Loops.Utilities">Utilities</a></td>
<td align="left">Utility models for Examples.Loops</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image34-modelica.mechanics.multibody.examples.loops.engine1a"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image34" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Engine1a</h1>
<p><strong>Model of one cylinder engine</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>This is a model of the mechanical part of one cylinder of an engine. The combustion is not modelled. The &quot;inertia&quot; component at the lower left part is the output inertia of the engine driving the gearbox. The angular velocity of the output inertia has a start value of 10 rad/s in order to demonstrate the movement of the engine.</p>
<p>The engine is modeled solely by revolute and prismatic joints. Since this results in a <strong>planar</strong> loop there is the well known difficulty that the cut-forces perpendicular to the loop cannot be uniquely computed, as well as the cut-torques within the plane. This ambiguity is resolved by using the option <strong>planarCutJoint</strong> in the <strong>Advanced</strong> menu of one revolute joint in every planar loop (here: joint B1). This option sets the cut-force in direction of the axis of rotation, as well as the cut-torques perpendicular to the axis of rotation at this joint to zero and makes the problem mathematically well-formed.</p>
<p>An animation of this example is shown in the figure below.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>model Engine1a &quot;Model of one cylinder engine&quot;
  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder Piston(diameter=0.1, r={0,-0.1,0});
  Modelica.Mechanics.MultiBody.Parts.BodyBox Rod(
    widthDirection={1,0,0},
    width=0.02,
    height=0.06,
    r={0,-0.2,0},
    color={0,0,200});
  Modelica.Mechanics.MultiBody.Joints.Revolute B2(
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.05);
  Modelica.Mechanics.MultiBody.Joints.Revolute Bearing(useAxisFlange=true,
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.05);
  inner Modelica.Mechanics.MultiBody.World world;
  Modelica.Mechanics.Rotational.Components.Inertia Inertia(
      stateSelect=StateSelect.always,
      phi(fixed=true, start=0),
      w(fixed=true, start=10),
    J=1);
  Modelica.Mechanics.MultiBody.Parts.BodyBox Crank4(
    height=0.05,
    widthDirection={1,0,0},
    width=0.02,
    r={0,-0.1,0});
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder Crank3(r={0.1,0,0}, diameter=0.03);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder Crank1(diameter=0.05, r={0.1,0,0});
  Modelica.Mechanics.MultiBody.Parts.BodyBox Crank2(
    r={0,0.1,0},
    height=0.05,
    widthDirection={1,0,0},
    width=0.02);
  Joints.RevolutePlanarLoopConstraint B1(
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.05);
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation Mid(r={0.05,0,0});
  Modelica.Mechanics.MultiBody.Joints.Prismatic Cylinder(
    boxWidth=0.02,
    n={0,-1,0},
    s(start=0.15));
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation cylPosition(                 animation=false, r={0.15,
        0.45,0});
equation 
  connect(world.frame_b, Bearing.frame_a);
  connect(Crank2.frame_a, Crank1.frame_b);
  connect(Crank2.frame_b, Crank3.frame_a);
  connect(Bearing.frame_b, Crank1.frame_a);
  connect(cylPosition.frame_b, Cylinder.frame_a);
  connect(world.frame_b, cylPosition.frame_a);
  connect(Crank3.frame_b, Crank4.frame_a);
  connect(B1.frame_a, Mid.frame_b);
  connect(B1.frame_b, Rod.frame_b);
  connect(Rod.frame_a, B2.frame_b);
  connect(B2.frame_a, Piston.frame_b);
  connect(Inertia.flange_b, Bearing.axis);
  connect(Mid.frame_a, Crank2.frame_b);
  connect(Cylinder.frame_b, Piston.frame_a);
end Engine1a;</code></pre>
<hr />
<h1 id="image35-modelica.mechanics.multibody.examples.loops.engine1b"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image35" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Engine1b</h1>
<p><strong>Model of one cylinder engine with gas force and preparation for assembly joint JointRRP</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>This is a model of the mechanical part of one cylinder of an engine. It is similiar to Loops.Engine1a. The difference is that a simple model for the gas force in the cylinder is added and that the model is restructured in such a way, that the central part of the planar kinematic loop can be easily replaced by the assembly joint &quot;Modelica.Mechanics.MultiBody.Joints.Assemblies.<strong>JointRRP</strong>&quot;. This exchange of the kinematic loop is shown in Loops.Engine1b_analytic. The advantage of using JointRRP is, that the non-linear algebraic equation of this loop is solved analytically, and not numerically as in this model (Engine1b).</p>
<p>An animation of this example is shown in the figure below.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples), <a href="Modelica_Mechanics_MultiBody_Examples_Loops_Utilities.html#Modelica.Mechanics.MultiBody.Examples.Loops.Utilities.Engine1bBase">Utilities.Engine1bBase</a> (Model of one cylinder engine with gas force).</p>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>model Engine1b 
  &quot;Model of one cylinder engine with gas force and preparation for assembly joint JointRRP&quot;
  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;
  extends Utilities.Engine1bBase;
  Joints.RevolutePlanarLoopConstraint B2(
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.05);
  Modelica.Mechanics.MultiBody.Joints.Revolute B1(
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.05);
  Modelica.Mechanics.MultiBody.Joints.Prismatic Cylinder(useAxisFlange=true,
    boxWidth=0.02, n={0,-1,0});
  Parts.FixedTranslation Rod1(r={0,0.2,0}, animation=false);
  Parts.FixedTranslation Rod3(r={0,-0.1,0}, animation=false);
equation 
  connect(B1.frame_b, Rod1.frame_a);
  connect(Rod1.frame_b, B2.frame_b);
  connect(Cylinder.frame_b, Rod3.frame_a);
  connect(B2.frame_a, Rod3.frame_b);
  connect(cylPosition.frame_b, Cylinder.frame_a);
  connect(gasForce.flange_a, Cylinder.support);
  connect(Cylinder.axis, gasForce.flange_b);
  connect(Piston.frame_a, Rod3.frame_a);
  connect(B1.frame_b, Rod2.frame_a);
  connect(Mid.frame_b, B1.frame_a);
end Engine1b;</code></pre>
<hr />
<h1 id="image36-modelica.mechanics.multibody.examples.loops.engine1b_analytic"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image36" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Engine1b_analytic</h1>
<p><strong>Model of one cylinder engine with gas force and analytic loop handling</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>This is the same model as Loops.Engine1b. The only difference is that the central part of the planar kinematic loop has been replaced by the assembly joint &quot;Modelica.Mechanics.MultiBody.Joints.Assemblies.<strong>JointRRP</strong>&quot;. The advantage of using JointRRP is, that the non-linear algebraic equation of this loop is solved analytically, and not numerically as in Loops.Engine1b.</p>
<p>An animation of this example is shown in the figure below.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples), <a href="Modelica_Mechanics_MultiBody_Examples_Loops_Utilities.html#Modelica.Mechanics.MultiBody.Examples.Loops.Utilities.Engine1bBase">Utilities.Engine1bBase</a> (Model of one cylinder engine with gas force).</p>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>model Engine1b_analytic 
  &quot;Model of one cylinder engine with gas force and analytic loop handling&quot;
  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;
  extends Utilities.Engine1bBase;
  Joints.Assemblies.JointRRP jointRRP(
    n_a={1,0,0},
    n_b={0,-1,0},
    animation=false,
    rRod1_ia={0,0.2,0},
    rRod2_ib={0,-0.1,0});
equation 
  connect(Mid.frame_b, jointRRP.frame_a);
  connect(jointRRP.frame_b, cylPosition.frame_b);
  connect(jointRRP.axis, gasForce.flange_b);
  connect(jointRRP.bearing, gasForce.flange_a);
  connect(jointRRP.frame_ib, Piston.frame_a);
  connect(jointRRP.frame_ia, Rod2.frame_a);
end Engine1b_analytic;</code></pre>
<hr />
<h1 id="image37-modelica.mechanics.multibody.examples.loops.enginev6"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image37" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.EngineV6</h1>
<p><strong>V6 engine with 6 cylinders, 6 planar loops and 1 degree-of-freedom</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>This is a V6 engine with 6 cylinders. It is hierarchically built up by using instances of one cylinder. For more details on the modeling of one cylinder, see example <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops.Engine1b">Engine1b</a>. An animation of the engine is shown in the figure below.</p>
<p>Simulate for 5 s, and plot the variables <strong>engineSpeed_rpm</strong>, <strong>engineTorque</strong>, and <strong>filteredEngineTorque</strong>. Note, the result file has a size of about 50 Mbyte (for 5000 output intervalls).</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="15%" />
<col width="17%" />
<col width="15%" />
<col width="52%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">animation</td>
<td align="left">true</td>
<td align="left">= true, if animation shall be enabled</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>model EngineV6 
  &quot;V6 engine with 6 cylinders, 6 planar loops and 1 degree-of-freedom&quot;

  import Cv = Modelica.SIunits.Conversions;

  extends Modelica.Icons.Example;
  parameter Boolean animation=true &quot;= true, if animation shall be enabled&quot;;
  output Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm
    engineSpeed_rpm=
         Modelica.SIunits.Conversions.to_rpm(load.w) &quot;Engine speed&quot;;
  output Modelica.SIunits.Torque engineTorque = filter.u 
    &quot;Torque generated by engine&quot;;
  output Modelica.SIunits.Torque filteredEngineTorque = filter.y 
    &quot;Filtered torque generated by engine&quot;;

  Modelica.Mechanics.MultiBody.Joints.Revolute bearing(useAxisFlange=true,
    n={1,0,0},
    cylinderLength=0.02,
    cylinderDiameter=0.06,
    animation=animation);
  inner Modelica.Mechanics.MultiBody.World world(animateWorld=false,
      animateGravity =                                                              false);
  Utilities.Cylinder cylinder1(
    crankAngleOffset=Cv.from_deg(-30),
    cylinderInclination=Cv.from_deg(-30),
    animation=animation);
  Utilities.Cylinder cylinder2(
    crankAngleOffset=Cv.from_deg(90),
    cylinderInclination=Cv.from_deg(30),
    animation=animation);
  Utilities.Cylinder cylinder3(
    cylinderInclination=Cv.from_deg(-30),
    animation=animation,
    crankAngleOffset=Cv.from_deg(210));
  Utilities.Cylinder cylinder4(
    cylinderInclination=Cv.from_deg(30),
    animation=animation,
    crankAngleOffset=Cv.from_deg(210));
  Utilities.Cylinder cylinder5(
    cylinderInclination=Cv.from_deg(-30),
    animation=animation,
    crankAngleOffset=Cv.from_deg(90));
  Utilities.Cylinder cylinder6(
    cylinderInclination=Cv.from_deg(30),
    animation=animation,
    crankAngleOffset=Cv.from_deg(-30));
  Modelica.Mechanics.Rotational.Components.Inertia load(
                          phi(
      start=0,
      fixed=true), w(
      start=10,
      fixed=true),
    stateSelect=StateSelect.always,
    J=1);
  Modelica.Mechanics.Rotational.Sources.QuadraticSpeedDependentTorque load2(
                                                 tau_nominal=-100, w_nominal=
        200,
    useSupport=false);
  Rotational.Sensors.TorqueSensor torqueSensor;
  Blocks.Continuous.CriticalDamping filter(
    n=2,
    initType=Modelica.Blocks.Types.Init.SteadyState,
    f=5);
equation 

  connect(bearing.frame_b, cylinder1.crank_a);
  connect(cylinder1.crank_b, cylinder2.crank_a);
  connect(cylinder2.crank_b, cylinder3.crank_a);
  connect(cylinder3.crank_b, cylinder4.crank_a);
  connect(cylinder4.crank_b, cylinder5.crank_a);
  connect(cylinder5.crank_b, cylinder6.crank_a);
  connect(cylinder5.cylinder_b, cylinder6.cylinder_a);
  connect(cylinder4.cylinder_b, cylinder5.cylinder_a);
  connect(cylinder4.cylinder_a, cylinder3.cylinder_b);
  connect(cylinder3.cylinder_a, cylinder2.cylinder_b);
  connect(cylinder2.cylinder_a, cylinder1.cylinder_b);
  connect(world.frame_b, cylinder1.cylinder_a);
  connect(world.frame_b, bearing.frame_a);
  connect(load2.flange, load.flange_b);
  connect(torqueSensor.flange_b, load.flange_a);
  connect(torqueSensor.tau,filter. u);
  connect(torqueSensor.flange_a, bearing.axis);
end EngineV6;</code></pre>
<hr />
<h1 id="image38-modelica.mechanics.multibody.examples.loops.enginev6_analytic"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image38" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.EngineV6_analytic</h1>
<p><strong>V6 engine with 6 cylinders, 6 planar loops, 1 degree-of-freedom and analytic handling of kinematic loops</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>This is a similar model as the example &quot;EngineV6&quot;. However, the cylinders have been built up with component Modelica.Mechanics.MultiBody.Joints.Assemblies.JointRRR that solves the non-linear system of equations in an aggregation of 3 revolution joints <strong>analytically</strong> and only one body is used that holds the total mass of the crank shaft:</p>
<p>This model is about 20 times faster as the EngineV6 example and <strong>no</strong> linear or non-linear system of equations occur. In contrast, the &quot;EngineV6&quot; example leads to 6 systems of nonlinear equations (every system has dimension = 5, with Evaluate=false and dimension=1 with Evaluate=true) and a linear system of equations of about 40. This shows the power of the analytic loop handling.</p>
<p>Simulate for 5 s, and plot the variables <strong>engineSpeed_rpm</strong>, <strong>engineTorque</strong>, and <strong>filteredEngineTorque</strong>. Note, the result file has a size of about 50 Mbyte (for 5000 output intervalls).</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="15%" />
<col width="17%" />
<col width="15%" />
<col width="52%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">animation</td>
<td align="left">true</td>
<td align="left">= true, if animation shall be enabled</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>model EngineV6_analytic 
  &quot;V6 engine with 6 cylinders, 6 planar loops, 1 degree-of-freedom and analytic handling of kinematic loops&quot;

  import Cv = Modelica.SIunits.Conversions;
  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;
  parameter Boolean animation=true &quot;= true, if animation shall be enabled&quot;;
  output Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm
    engineSpeed_rpm=
         Modelica.SIunits.Conversions.to_rpm(load.w) &quot;Engine speed&quot;;
  output Modelica.SIunits.Torque engineTorque = filter.u 
    &quot;Torque generated by engine&quot;;
  output Modelica.SIunits.Torque filteredEngineTorque = filter.y 
    &quot;Filtered torque generated by engine&quot;;

  inner Modelica.Mechanics.MultiBody.World world(animateWorld=false,
      animateGravity =                                                              false);
  Utilities.EngineV6_analytic engine(redeclare model Cylinder =
        Modelica.Mechanics.MultiBody.Examples.Loops.Utilities.Cylinder_analytic_CAD);
  Modelica.Mechanics.Rotational.Components.Inertia load(
                                             phi(
      start=0,
      fixed=true), w(
      start=10,
      fixed=true),
    stateSelect=StateSelect.always,
    J=1);
  Modelica.Mechanics.Rotational.Sources.QuadraticSpeedDependentTorque load2(
                                                 tau_nominal=-100, w_nominal=
        200,
    useSupport=false);
  Rotational.Sensors.TorqueSensor torqueSensor;
  Blocks.Continuous.CriticalDamping filter(
    n=2,
    initType=Modelica.Blocks.Types.Init.SteadyState,
    f=5);
equation 

  connect(world.frame_b, engine.frame_a);
  connect(load2.flange, load.flange_b);
  connect(torqueSensor.flange_a, engine.flange_b);
  connect(torqueSensor.flange_b, load.flange_a);
  connect(torqueSensor.tau, filter.u);
end EngineV6_analytic;</code></pre>
<hr />
<h1 id="image39-modelica.mechanics.multibody.examples.loops.fourbar1"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image39" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Fourbar1</h1>
<p><strong>One kinematic loop with four bars (with only revolute joints; 5 non-linear equations)</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>This is a simple kinematic loop consisting of 6 revolute joints, 1 prismatic joint and 4 bars that is often used as basic constructing unit in mechanisms. This example demonstrates that usually no particular knowledge of the user is needed to handle kinematic loops. Just connect the joints and bodies together according to the real system. In particular <strong>no</strong> cut-joints or a spanning tree has to be determined. In this case, the initial condition of the angular velocity of revolute joint j1 is set to 300 deg/s in order to drive this loop.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>model Fourbar1 
  &quot;One kinematic loop with four bars (with only revolute joints; 5 non-linear equations)&quot;

  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;

  output SI.Angle j1_phi &quot;angle of revolute joint j1&quot;;
  output SI.Position j2_s &quot;distance of prismatic joint j2&quot;;
  output SI.AngularVelocity j1_w &quot;axis speed of revolute joint j1&quot;;
  output SI.Velocity j2_v &quot;axis velocity of prismatic joint j2&quot;;

  inner Modelica.Mechanics.MultiBody.World world;
  Modelica.Mechanics.MultiBody.Joints.Revolute j1(
    n={1,0,0},
    stateSelect=StateSelect.always,
    phi(fixed=true),
    w(displayUnit=&quot;deg/s&quot;,
      start=5.235987755982989,
      fixed=true));
  Modelica.Mechanics.MultiBody.Joints.Prismatic j2(
    n={1,0,0},
    s(start=-0.2),
    boxWidth=0.05);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b1(r={0,0.5,0.1}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b2(r={0,0.2,0}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b3(r={-1,0.3,0.1}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Joints.Revolute rev(n={0,1,0});
  Modelica.Mechanics.MultiBody.Joints.Revolute rev1;
  Modelica.Mechanics.MultiBody.Joints.Revolute j3(n={1,0,0});
  Modelica.Mechanics.MultiBody.Joints.Revolute j4(n={0,1,0});
  Modelica.Mechanics.MultiBody.Joints.Revolute j5(n={0,0,1});
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation b0(animation=false, r={1.2,0,0});
equation 
  connect(j2.frame_b, b2.frame_a);
  connect(j1.frame_b, b1.frame_a);
  connect(rev.frame_a, b2.frame_b);
  connect(rev.frame_b, rev1.frame_a);
  connect(rev1.frame_b, b3.frame_a);
  connect(world.frame_b, j1.frame_a);
  connect(b1.frame_b, j3.frame_a);
  connect(j3.frame_b, j4.frame_a);
  connect(j4.frame_b, j5.frame_a);
  connect(j5.frame_b, b3.frame_b);
  connect(b0.frame_a, world.frame_b);
  connect(b0.frame_b, j2.frame_a);
  j1_phi = j1.phi;
  j2_s = j2.s;
  j1_w = j1.w;
  j2_v = j2.v;
end Fourbar1;</code></pre>
<hr />
<h1 id="image40-modelica.mechanics.multibody.examples.loops.fourbar2"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image40" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Fourbar2</h1>
<p><strong>One kinematic loop with four bars (with UniversalSpherical joint; 1 non-linear equation)</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>This is a second version of the &quot;four-bar&quot; mechanism, see figure:</p>
<p>In this case the three revolute joints on the left top-side and the two revolute joints on the right top side have been replaced by the joint <strong>UniversalSpherical</strong> that is a rod connecting a spherical and a universal joint. This joint is defined by <strong>1 constraint</strong> stating that the distance between the two spherical joints is constant. Using this joint in a kinematic loop reduces the sizes of non-linear algebraic equations. For this loop, only one non-linear algebraic system of equations of order 1 remains.</p>
<p>At the UniversalSpherical joint an additional frame_ia fixed to the rod is present where components can be attached to the connecting rod. In this example just a coordinate system is attached to visualize frame_ia (coordinate system on the right in blue color).</p>
<p>Another feature is that the length of the connecting rod can be automatically calculated during <strong>initialization</strong>. In order to do this, another initialization condition has to be given. In this example, the initial value of the distance of the prismatic joint j2 has been fixed (via the &quot;Initialization&quot; menu) and the rod length of joint &quot;UniversalSpherical&quot; is computed during initialization since parameter <strong>computeLength</strong> = <strong>true</strong> is set in the joint parameter menu. The main advantage is that during initialization no non-linear system of equation is solved and therefore initialization always works. To be precise, the following trivial non-linear equation is actually solved for rodLength:</p>
<pre><code>rodLength*rodLength = f(angle of revolute joint, distance of prismatic joint)</code></pre>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>model Fourbar2 
  &quot;One kinematic loop with four bars (with UniversalSpherical joint; 1 non-linear equation)&quot;

  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;

  output SI.Angle j1_phi &quot;angle of revolute joint j1&quot;;
  output SI.Position j2_s &quot;distance of prismatic joint j2&quot;;
  output SI.AngularVelocity j1_w &quot;axis speed of revolute joint j1&quot;;
  output SI.Velocity j2_v &quot;axis velocity of prismatic joint j2&quot;;

  inner Modelica.Mechanics.MultiBody.World world;
  Modelica.Mechanics.MultiBody.Joints.Revolute j1(useAxisFlange=true,
    n={1,0,0},
    stateSelect=StateSelect.always,
    phi(fixed=true),
    w(displayUnit=&quot;deg/s&quot;,
      start=5.235987755982989,
      fixed=true));
  Modelica.Mechanics.MultiBody.Joints.Prismatic j2(
    n={1,0,0},
    boxWidth=0.05,
    s(fixed=true, start=-0.2));
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b1(r={0,0.5,0.1}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b2(r={0,0.2,0}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Joints.UniversalSpherical universalSpherical(
    n1_a={0,1,0},
    computeRodLength=true,
    rRod_ia={-1,0.3,0.1});
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation b3(r={1.2,0,0}, animation=false);
  Modelica.Mechanics.MultiBody.Visualizers.FixedFrame fixedFrame(color_x={0,0,255});
equation 
  j1_phi = j1.phi;
  j2_s = j2.s;
  j1_w = j1.w;
  j2_v = j2.v;
  connect(j2.frame_b, b2.frame_a);
  connect(j1.frame_b, b1.frame_a);
  connect(j1.frame_a, world.frame_b);
  connect(b1.frame_b, universalSpherical.frame_b);
  connect(universalSpherical.frame_a, b2.frame_b);
  connect(b3.frame_a, world.frame_b);
  connect(b3.frame_b, j2.frame_a);
  connect(fixedFrame.frame_a, universalSpherical.frame_ia);
end Fourbar2;</code></pre>
<hr />
<h1 id="image41-modelica.mechanics.multibody.examples.loops.fourbar_analytic"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image41" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.Fourbar_analytic</h1>
<p><strong>One kinematic loop with four bars (with JointSSP joint; analytic solution of non-linear algebraic loop)</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>This is a third version of the &quot;four-bar&quot; mechanism, see figure:</p>
<p>In this case the three revolute joints on the left top-side and the two revolute joints on the right top side have been replaced by the assembly joint <strong>Joints.Assemblies.JointSSP</strong> which consists of two spherical joints and one prismatic joint. Since JointSSP solves the non-linear constraint equation internally analytically, no non-linear equation appears any more and a Modelica translator, such as Dymola, can transform the system into state space form without solving a system of equations. For more details, see <a href="Modelica_Mechanics_MultiBody_UsersGuide_Tutorial_LoopStructures.html#Modelica.Mechanics.MultiBody.UsersGuide.Tutorial.LoopStructures.AnalyticLoopHandling">MultiBody.UsersGuide.Tutorial.LoopStructures.AnalyticLoopHandling</a>.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>model Fourbar_analytic 
  &quot;One kinematic loop with four bars (with JointSSP joint; analytic solution of non-linear algebraic loop)&quot;

  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;

  output SI.Angle j1_phi &quot;angle of revolute joint j1&quot;;
  output SI.Position j2_s &quot;distance of prismatic joint j2&quot;;
  output SI.AngularVelocity j1_w &quot;axis speed of revolute joint j1&quot;;
  output SI.Velocity j2_v &quot;axis velocity of prismatic joint j2&quot;;

  inner Modelica.Mechanics.MultiBody.World world(animateGravity=false);
  Modelica.Mechanics.MultiBody.Joints.Revolute j1(useAxisFlange=true,
    n={1,0,0},
    stateSelect=StateSelect.always,
    phi(fixed=true),
    w(displayUnit=&quot;deg/s&quot;,
      start=5.235987755982989,
      fixed=true));
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b1(r={0,0.5,0.1}, diameter=0.05);
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation b3(r={1.2,0,0}, animation=false);
  Modelica.Mechanics.MultiBody.Joints.Assemblies.JointSSP jointSSP(
    rod1Length=sqrt({-1,0.3,0.1}*{-1,0.3,0.1}),
    n_b={1,0,0},
    s_offset=-0.2,
    rRod2_ib={0,0.2,0},
    rod1Color={0,128,255},
    rod2Color={0,128,255},
    checkTotalPower=true);
  Modelica.Mechanics.MultiBody.Parts.BodyCylinder b2(
    r={0,0.2,0},
    diameter=0.05,
    animation=false);
equation 
  j1_phi = j1.phi;
  j2_s = jointSSP.prismatic.distance;
  j1_w = j1.w;
  j2_v = der(jointSSP.prismatic.distance);
  connect(j1.frame_b, b1.frame_a);
  connect(j1.frame_a, world.frame_b);
  connect(b3.frame_a, world.frame_b);
  connect(b1.frame_b, jointSSP.frame_a);
  connect(b3.frame_b, jointSSP.frame_b);
  connect(b2.frame_a, jointSSP.frame_ib);
end Fourbar_analytic;</code></pre>
<hr />
<h1 id="image42-modelica.mechanics.multibody.examples.loops.planarloops_analytic"><img src="Modelica.Mechanics.MultiBody.Examples.Loops.Engine1aI.png" alt="image42" /> <a href="Modelica_Mechanics_MultiBody_Examples_Loops.html#Modelica.Mechanics.MultiBody.Examples.Loops">Modelica.Mechanics.MultiBody.Examples.Loops</a>.PlanarLoops_analytic</h1>
<p><strong>Mechanism with three planar kinematic loops and one degree-of-freedom with analytic loop handling (with JointRRR joints)</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>It is demonstrated how the Modelica.Mechanics.MultiBody.Joints.Assemblies.JointRRR joint can be used to solve the non-linear equations of coupled planar loops analytically. In the mechanism below no non-linear equation occurs any more from the tool view, since these equations are solved analytically in the JointRRR joints. For more details, see <a href="Modelica_Mechanics_MultiBody_UsersGuide_Tutorial_LoopStructures.html#Modelica.Mechanics.MultiBody.UsersGuide.Tutorial.LoopStructures.AnalyticLoopHandling">MultiBody.UsersGuide.Tutorial.LoopStructures.AnalyticLoopHandling</a>.</p>
<p>In the following figure the parameter vectors of this example are visualized in the animation view.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example">Modelica.Icons.Example</a> (Icon for runnable examples).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="32%" />
<col width="5%" />
<col width="8%" />
<col width="53%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">rh[3]</td>
<td align="left">{0.5,0,0}</td>
<td align="left">Position vector from 'lower left' revolute to 'lower right' revolute joint for all the 3 loops [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">rv[3]</td>
<td align="left">{0,0.5,0}</td>
<td align="left">Position vector from 'lower left' revolute to 'upper left' revolute joint in the first loop [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">r1b[3]</td>
<td align="left">{0.1,0.5,0}</td>
<td align="left">Position vector from 'lower right' revolute to 'upper right' revolute joint in the first loop [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">r2b[3]</td>
<td align="left">{0.1,0.6,0}</td>
<td align="left">Position vector from 'lower right' revolute to 'upper right' revolute joint in the second loop [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">r3b[3]</td>
<td align="left">{0,0.55,0}</td>
<td align="left">Position vector from 'lower right' revolute to 'upper right' revolute joint in the third loop [m]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>model PlanarLoops_analytic 
  &quot;Mechanism with three planar kinematic loops and one degree-of-freedom with analytic loop handling (with JointRRR joints)&quot;

  import SI = Modelica.SIunits;
  extends Modelica.Icons.Example;
  parameter SI.Length rh[3]={0.5,0,0} 
    &quot;Position vector from &#39;lower left&#39; revolute to &#39;lower right&#39; revolute joint for all the 3 loops&quot;;
  parameter SI.Length rv[3]={0,0.5,0} 
    &quot;Position vector from &#39;lower left&#39; revolute to &#39;upper left&#39; revolute joint in the first loop&quot;;

  parameter SI.Length r1b[3]={0.1,0.5,0} 
    &quot;Position vector from &#39;lower right&#39; revolute to &#39;upper right&#39; revolute joint in the first loop&quot;;
  final parameter SI.Length r1a[3]=r1b + rh - rv 
    &quot;Position vector from &#39;upper left&#39; revolute to &#39;upper right&#39; revolute joint in the first loop&quot;;

  parameter SI.Length r2b[3]={0.1,0.6,0} 
    &quot;Position vector from &#39;lower right&#39; revolute to &#39;upper right&#39; revolute joint in the second loop&quot;;
  final parameter SI.Length r2a[3]=r2b + rh - r1b 
    &quot;Position vector from &#39;upper left&#39; revolute to &#39;upper right&#39; revolute joint in the second loop&quot;;

  parameter SI.Length r3b[3]={0,0.55,0} 
    &quot;Position vector from &#39;lower right&#39; revolute to &#39;upper right&#39; revolute joint in the third loop&quot;;
  final parameter SI.Length r3a[3]=r3b + rh - r2b 
    &quot;Position vector from &#39;upper left&#39; revolute to &#39;upper right&#39; revolute joint in the third loop&quot;;

  inner Modelica.Mechanics.MultiBody.World world;
  Modelica.Mechanics.MultiBody.Joints.Assemblies.JointRRR jointRRR1(
    rRod1_ia=r1a,
    rRod2_ib=r1b,
    checkTotalPower=true);
  Modelica.Mechanics.MultiBody.Joints.Revolute rev(useAxisFlange=true,w(fixed=true));
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation rod1(r=rv);
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation rod2(r=rh);
  Modelica.Mechanics.MultiBody.Parts.Body body1(
    m=1,
    cylinderColor={155,155,155},
    r_CM=jointRRR1.rRod1_ia/2);
  Modelica.Mechanics.Rotational.Sources.Position position(useSupport=true);
  Modelica.Blocks.Sources.Sine sine(amplitude=0.7, freqHz=1);
  Modelica.Mechanics.MultiBody.Joints.Assemblies.JointRRR jointRRR2(
    rRod1_ia=r2a,
    rRod2_ib=r2b,
    checkTotalPower=true);
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation rod3(r=rh);
  Modelica.Mechanics.MultiBody.Parts.Body body2(
    m=1,
    cylinderColor={155,155,155},
    r_CM=jointRRR2.rRod1_ia/2);
  Modelica.Mechanics.MultiBody.Joints.Assemblies.JointRRR jointRRR3(
    rRod1_ia=r3a,
    rRod2_ib=r3b,
    checkTotalPower=true);
  Modelica.Mechanics.MultiBody.Parts.FixedTranslation rod4(r=rh);
  Modelica.Mechanics.MultiBody.Parts.Body body3(
    m=1,
    cylinderColor={155,155,155},
    r_CM=jointRRR3.rRod1_ia/2);
  Parts.Mounting1D mounting1D;
equation 
  connect(world.frame_b, rev.frame_a);
  connect(rod1.frame_a, rev.frame_b);
  connect(rod1.frame_b, jointRRR1.frame_a);
  connect(rod2.frame_a, world.frame_b);
  connect(rod2.frame_b, jointRRR1.frame_b);
  connect(jointRRR1.frame_ia, body1.frame_a);
  connect(rod3.frame_a, rod2.frame_b);
  connect(rod3.frame_b, jointRRR2.frame_b);
  connect(jointRRR2.frame_ia, body2.frame_a);
  connect(jointRRR1.frame_im, jointRRR2.frame_a);
  connect(rod3.frame_b, rod4.frame_a);
  connect(rod4.frame_b, jointRRR3.frame_b);
  connect(jointRRR2.frame_im, jointRRR3.frame_a);
  connect(jointRRR3.frame_ia, body3.frame_a);
  connect(sine.y, position.phi_ref);
  connect(mounting1D.flange_b, position.support);
  connect(mounting1D.frame_a, world.frame_b);
  connect(position.flange, rev.axis);
end PlanarLoops_analytic;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:13 2010.</p>
</body>
</html>
