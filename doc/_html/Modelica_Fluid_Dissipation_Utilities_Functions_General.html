<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Fluid.Dissipation.Utilities.Functions.General</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Fluid.Dissipation.Utilities.Functions.General</h1>
</div>
<h1 id="modelica.fluid.dissipation.utilities.functions.general"><a href="Modelica_Fluid_Dissipation_Utilities_Functions.html#Modelica.Fluid.Dissipation.Utilities.Functions">Modelica.Fluid.Dissipation.Utilities.Functions</a>.General</h1>
<h2 id="information">Information</h2>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="75%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image10" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_DP">CubicInterpolation_DP</a></td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image11" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_MFLOW">CubicInterpolation_MFLOW</a></td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image12" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW">LambertW</a></td>
<td align="left">Closed approximation of lambert's w function for solving f(x) = x exp(x) for x</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image13" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertWIter">LambertWIter</a></td>
<td align="left">Iterative form of lambert's w function for solving f(x) = x exp(x) for x</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image14" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.PrandtlNumber">PrandtlNumber</a></td>
<td align="left">calculation of Prandtl number</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" alt="image15" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">calculation of Reynolds number</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" alt="image16" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower">SmoothPower</a></td>
<td align="left">Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" alt="image17" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der">SmoothPower_der</a></td>
<td align="left">The derivative of function SmoothPower</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" alt="image18" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother">Stepsmoother</a></td>
<td align="left">Continuous interpolation for x</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" alt="image19" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der">Stepsmoother_der</a></td>
<td align="left">Derivative of function Stepsmoother</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.cubicinterpolation_dp"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.CubicInterpolation_DP</h1>
<h2 id="inputs">Inputs</h2>
<table>
<col width="62%" />
<col width="14%" />
<col width="9%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">Re_turbulent</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re1</td>
<td align="left">
</td>
<td align="left">[1]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re2</td>
<td align="left">
</td>
<td align="left">[1]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">Delta</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">lambda2</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="75%" />
<col width="8%" />
<col width="15%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re</td>
<td align="left">[1]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>function CubicInterpolation_DP
  import Modelica.Math;
  input Real Re_turbulent;
  input SI.ReynoldsNumber Re1;
  input SI.ReynoldsNumber Re2;
  input Real Delta;
  input Real lambda2;
  output SI.ReynoldsNumber Re;
  // point lg(lambda2(Re1)) with derivative at lg(Re1)
protected 
  Real x1=Math.log10(64*Re1);
  Real y1=Math.log10(Re1);
  Real yd1=1;

  // Point lg(lambda2(Re2)) with derivative at lg(Re2)
  Real aux1=(0.5/Math.log(10))*5.74*0.9;
  Real aux2=Delta/3.7 + 5.74/Re2^0.9;
  Real aux3=Math.log10(aux2);
  Real L2=0.25*(Re2/aux3)^2;
  Real aux4=2.51/sqrt(L2) + 0.27*Delta;
  Real aux5=-2*sqrt(L2)*Math.log10(aux4);
  Real x2=Math.log10(L2);
  Real y2=Math.log10(aux5);
  Real yd2=0.5 + (2.51/Math.log(10))/(aux5*aux4);

  // Constants: Cubic polynomial between lg(Re1) and lg(Re2)
  Real diff_x=x2 - x1;
  Real m=(y2 - y1)/diff_x;
  Real c2=(3*m - 2*yd1 - yd2)/diff_x;
  Real c3=(yd1 + yd2 - 2*m)/(diff_x*diff_x);
  Real lambda2_1=64*Re1;
  Real dx=Math.log10(lambda2/lambda2_1);

algorithm 
  Re := Re1*(lambda2/lambda2_1)^(1 + dx*(c2 + dx*c3));
end CubicInterpolation_DP;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.cubicinterpolation_mflow"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.CubicInterpolation_MFLOW</h1>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="67%" />
<col width="8%" />
<col width="10%" />
<col width="13%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re</td>
<td align="left">
</td>
<td align="left">[1]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re1</td>
<td align="left">
</td>
<td align="left">[1]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re2</td>
<td align="left">
</td>
<td align="left">[1]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">Delta</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="12%" />
<col width="16%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">lambda2</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>function CubicInterpolation_MFLOW
  import Modelica.Math;
  input SI.ReynoldsNumber Re;
  input SI.ReynoldsNumber Re1;
  input SI.ReynoldsNumber Re2;
  input Real Delta;
  output Real lambda2;
  // point lg(lambda2(Re1)) with derivative at lg(Re1)
protected 
  Real x1=Math.log10(Re1);
  Real y1=Math.log10(64*Re1);
  Real yd1=1;

  // Point lg(lambda2(Re2)) with derivative at lg(Re2)
  Real aux1=(0.5/Math.log(10))*5.74*0.9;
  Real aux2=Delta/3.7 + 5.74/Re2^0.9;
  Real aux3=Math.log10(aux2);
  Real L2=0.25*(Re2/aux3)^2;
  Real aux4=2.51/sqrt(L2) + 0.27*Delta;
  Real aux5=-2*sqrt(L2)*Math.log10(aux4);
  Real x2=Math.log10(Re2);
  Real y2=Math.log10(L2);
  Real yd2=2 + 4*aux1/(aux2*aux3*(Re2)^0.9);

  // Constants: Cubic polynomial between lg(Re1) and lg(Re2)
  Real diff_x=x2 - x1;
  Real m=(y2 - y1)/diff_x;
  Real c2=(3*m - 2*yd1 - yd2)/diff_x;
  Real c3=(yd1 + yd2 - 2*m)/(diff_x*diff_x);
  Real dx=Math.log10(Re/Re1);

algorithm 
  lambda2 := 64*Re1*(Re/Re1)^(1 + dx*(c2 + dx*c3));
end CubicInterpolation_MFLOW;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.lambertw"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.LambertW</h1>
<p><strong>Closed approximation of lambert's w function for solving f(x) = x exp(x) for x</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>This function calculates an approximation of the <strong>inverse</strong> for</p>
<pre><code>f(x) = y = x * exp( x )</code></pre>
<p>within ∞ &gt; y &gt; -1/e. The relative deviation of this approximation for lambert's w function <strong>x = W(y)</strong> is diplayed in the following graph.</p>
<p>For y &gt; 10 and higher values the relative deviation is smaller 2%.</p>
<p>::</p>
<h2 id="inputs-2">Inputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="16%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">y</td>
<td align="left">
</td>
<td align="left">f(x)</td>
</tr>
</tbody>
</table>
<h2 id="outputs-2">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">W(y)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>function LambertW 
  &quot;Closed approximation of lambert&#39;s w function for solving f(x) = x exp(x) for x&quot;
  input Real y &quot;f(x)&quot;;
  output Real x &quot;W(y)&quot;;
protected 
  Real xl;

algorithm 
  if (y &lt;= 500.0) then
    xl := Modelica.Math.log(y + 1.0);
    x := 0.665*(1 + 0.0195*xl)*xl + 0.04;
  else
    xl := 0;
    x := Modelica.Math.log(y - 4.0) - (1.0 - 1.0/Modelica.Math.log(y))*
      Modelica.Math.log(Modelica.Math.log(y));
  end if;

  assert(y &gt; -1/Modelica.Math.exp(1),
    &quot;Lambert-w-function is only valid for inputs y &gt; -1/Modelica.Math.exp(1)!&quot;);

end LambertW;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.lambertwiter"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.LambertWIter</h1>
<p><strong>Iterative form of lambert's w function for solving f(x) = x exp(x) for x</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>This function calculates an approximation of the <strong>inverse</strong> for</p>
<pre><code>f(x) = y = x * exp( x )</code></pre>
<p>within ∞ &gt; y &gt; -1/e. Please note, that for negative inputs <strong>two</strong> solutions exists. The function currently delivers the result x = -1 ... 0 for that particular range.</p>
<p>::</p>
<h2 id="inputs-3">Inputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="16%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">y</td>
<td align="left">
</td>
<td align="left">f(x)</td>
</tr>
</tbody>
</table>
<h2 id="outputs-3">Outputs</h2>
<table>
<col width="16%" />
<col width="12%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">W(y)</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">iter</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>function LambertWIter 
  &quot;Iterative form of lambert&#39;s w function for solving f(x) = x exp(x) for x&quot;
  input Real y &quot;f(x)&quot;;
  output Real x &quot;W(y)&quot;;
  output Integer iter;
protected 
  Real w;
  Real prec=1e-12;
  Real c1;
  Real c2;
  Real dw;
  Real w1;
  /*Real wTimesExpW;
  Real wPlusOneTimesExpW;*/
  Real dev;
  Integer i;

algorithm 
  w := if y &gt; 0.1 then Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW(
    y) else sqrt(5.43656*max(y, -1/Modelica.Math.exp(1)) + 2) - 1;
  dev := 1;
  i := 0;
  while prec &lt; dev and i &lt; 100 loop
    /*wTimesExpW := w*Modelica.Math.exp(w);
                wPlusOneTimesExpW := (w+1)*Modelica.Math.exp(w);
                w := w-(wTimesExpW-y)/(wPlusOneTimesExpW-(w+2)*(wTimesExpW-y)/(2*w+2));
                dev := abs((y-wTimesExpW)/wPlusOneTimesExpW);
                i := i+1;*/

    c1 := Modelica.Math.exp(w);
    c2 := w*c1 - y;
    w1 := if w &lt;&gt; 1 then w + 1 else w;
    dw := c2/(c1*w1 - ((w + 2)*c2/(2*w1)));
    w := w - dw;
    //dev := abs(dw)/(2+abs(w));
    dev := abs((y - w*c1)/(w + 1)*c1);
    i := i + 1;
  end while;
  x := w;
  iter := i;

end LambertWIter;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.prandtlnumber"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.PrandtlNumber</h1>
<p><strong>calculation of Prandtl number</strong></p>
<h2 id="inputs-4">Inputs</h2>
<table>
<col width="58%" />
<col width="5%" />
<col width="5%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacityAtConstantPressure">SpecificHeatCapacityAtConstantPressure</a></td>
<td align="left">cp</td>
<td align="left">
</td>
<td align="left">specific heat capacity of fluid at constant pressure [J/(kg.K)]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">eta</td>
<td align="left">
</td>
<td align="left">dynamic viscosity of fluid [Pa.s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity">ThermalConductivity</a></td>
<td align="left">lambda</td>
<td align="left">
</td>
<td align="left">thermal conductivity of fluid [W/(m.K)]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-4">Outputs</h2>
<table>
<col width="70%" />
<col width="8%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.PrandtlNumber">PrandtlNumber</a></td>
<td align="left">Pr</td>
<td align="left">Prandtl number [1]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>function PrandtlNumber &quot;calculation of Prandtl number&quot;

  import SI = Modelica.SIunits;
  import MIN = Modelica.Constants.eps;

  //fluid properties
  input SI.SpecificHeatCapacityAtConstantPressure cp 
    &quot;specific heat capacity of fluid at constant pressure&quot;;
  input SI.DynamicViscosity eta &quot;dynamic viscosity of fluid&quot;;
  input SI.ThermalConductivity lambda &quot;thermal conductivity of fluid&quot;;

  output SI.PrandtlNumber Pr &quot;Prandtl number&quot;;

algorithm 
  Pr := eta*cp/max(MIN, lambda);
end PrandtlNumber;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.general.reynoldsnumber"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.ReynoldsNumber</h1>
<p><strong>calculation of Reynolds number</strong></p>
<h2 id="inputs-5">Inputs</h2>
<table>
<col width="56%" />
<col width="9%" />
<col width="8%" />
<col width="26%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Area">Area</a></td>
<td align="left">A_cross</td>
<td align="left">
</td>
<td align="left">Cross sectional area [m2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">perimeter</td>
<td align="left">
</td>
<td align="left">Wetted perimeter [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho</td>
<td align="left">
</td>
<td align="left">Density of fluid [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity">DynamicViscosity</a></td>
<td align="left">eta</td>
<td align="left">
</td>
<td align="left">Dynamic viscosity of fluid [Pa.s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-5">Outputs</h2>
<table>
<col width="67%" />
<col width="11%" />
<col width="20%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber">ReynoldsNumber</a></td>
<td align="left">Re</td>
<td align="left">Reynolds number [1]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">velocity</td>
<td align="left">Mean velocity [m/s]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>function ReynoldsNumber &quot;calculation of Reynolds number&quot;

  import SI = Modelica.SIunits;
  import MIN = Modelica.Constants.eps;

  //geometry
  input SI.Area A_cross &quot;Cross sectional area&quot;;
  input SI.Length perimeter &quot;Wetted perimeter&quot;;

  //fluid properties
  input SI.Density rho &quot;Density of fluid&quot;;
  input SI.DynamicViscosity eta &quot;Dynamic viscosity of fluid&quot;;

  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output SI.ReynoldsNumber Re &quot;Reynolds number&quot;;
  output SI.Velocity velocity &quot;Mean velocity&quot;;

protected 
  SI.Diameter d_hyd=4*A_cross/max(MIN, perimeter) &quot;Hydraulic diameter&quot;;

algorithm 
  Re := 4*abs(m_flow)/max(MIN, (perimeter*eta));
  velocity := m_flow/max(MIN, (rho*A_cross));
end ReynoldsNumber;</code></pre>
<hr />
<h1 id="image20-modelica.fluid.dissipation.utilities.functions.general.smoothpower"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" alt="image20" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.SmoothPower</h1>
<p><strong>Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>The function is used to limit the derivative of the following function at x=0:</p>
<pre><code>y = if x ≥ 0 then xpow else -(-x)pow;  // pow &gt; 0</code></pre>
<p>by approximating the function in the range -<strong>deltax</strong>&lt; x &lt; <strong>deltax</strong> with a third order polynomial that has the same derivative at <strong>abs</strong>(x)=deltax, as the function above.</p>
<h3 id="example">Example</h3>
<p>In the picture below the input x is increased from -1 to 1. The range of interpolation is defined by the same range. Displayed is the output of the function SmoothPower compared to</p>
<pre><code>y=x*|x|</code></pre>
<p>For |x| &gt; 1 both functions return identical results.</p>
<h3 id="references">References</h3>
<dl>
<dt>ThermoFluid Library</dt>
<dd><p>**<a href="http://sourceforge.net/projects/thermofluid/**">http://sourceforge.net/projects/thermofluid/**</a>.</p>
</dd>
</dl>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-6">Inputs</h2>
<table>
<col width="12%" />
<col width="15%" />
<col width="16%" />
<col width="38%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">
</td>
<td align="left">input variable</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">deltax</td>
<td align="left">
</td>
<td align="left">range for interpolation</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">pow</td>
<td align="left">
</td>
<td align="left">exponent for x</td>
</tr>
</tbody>
</table>
<h2 id="outputs-6">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">y</td>
<td align="left">output variable</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>function SmoothPower 
  &quot;Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow&quot;
  annotation(derivative=SmoothPower_der);
  extends Modelica.Icons.Function;
  input Real x &quot;input variable&quot;;
  input Real deltax &quot;range for interpolation&quot;;
  input Real pow &quot;exponent for x&quot;;
  output Real y &quot;output variable&quot;;
protected 
  Real adeltax=abs(deltax);
  Real C3=(pow - 1)/2*adeltax^(pow - 3);
  Real C1=(3 - pow)/2*adeltax^(pow - 1);

algorithm 
  y := if x &gt;= adeltax then x^pow else if x &lt;= -adeltax then -(-x)^pow else (C1
     + C3*x*x)*x;
end SmoothPower;</code></pre>
<hr />
<h1 id="image21-modelica.fluid.dissipation.utilities.functions.general.smoothpower_der"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" alt="image21" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.SmoothPower_der</h1>
<p><strong>The derivative of function SmoothPower</strong></p>
<h2 id="information-4">Information</h2>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-7">Inputs</h2>
<table>
<col width="12%" />
<col width="16%" />
<col width="16%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">
</td>
<td align="left">input variable</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">deltax</td>
<td align="left">
</td>
<td align="left">range of interpolation</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">pow</td>
<td align="left">
</td>
<td align="left">exponent for x</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">dx</td>
<td align="left">
</td>
<td align="left">derivative of x</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ddeltax</td>
<td align="left">
</td>
<td align="left">derivative of deltax</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">dpow</td>
<td align="left">
</td>
<td align="left">derivative of pow</td>
</tr>
</tbody>
</table>
<h2 id="outputs-7">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="41%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">dy</td>
<td align="left">derivative of SmoothPower</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>function SmoothPower_der &quot;The derivative of function SmoothPower&quot;
  extends Modelica.Icons.Function;
  input Real x &quot;input variable&quot;;
  input Real deltax &quot;range of interpolation&quot;;
  input Real pow &quot;exponent for x&quot;;
  input Real dx &quot;derivative of x&quot;;
  input Real ddeltax &quot;derivative of deltax&quot;;
  input Real dpow &quot;derivative of pow&quot;;
  output Real dy &quot;derivative of SmoothPower&quot;;
protected 
  Real C3;
  Real C1;
  Real adeltax;

algorithm 
  adeltax := abs(deltax);
  if noEvent(x &gt;= adeltax) then
    dy := dx*pow*x^(pow - 1);
  elseif noEvent(x &lt;= -adeltax) then
    dy := -dx*pow*(-x)^(pow - 1);
  else
    C3 := (pow - 1)/2*adeltax^(pow - 3);
    C1 := (3 - pow)/2*adeltax^(pow - 1);
    dy := (C1 + 3*C3*x*x)*dx;
  end if;
end SmoothPower_der;</code></pre>
<hr />
<h1 id="image22-modelica.fluid.dissipation.utilities.functions.general.stepsmoother"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" alt="image22" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.Stepsmoother</h1>
<p><strong>Continuous interpolation for x</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>The function is used for continuous fading of variable inputs within a defined range. It allows a differentiable and smooth transition between function outputs, e.g., laminar and turbulent pressure drop or correlations for certain ranges.</p>
<h3 id="function">Function</h3>
<p>The tanh-function is used, since it provides an existing derivative and the derivative is zero at the borders [<strong>nofunc</strong>, <strong>func</strong>] of the interpolation domain (smooth derivative for transitions). In order to work correctly, the internal interpolation range in terms of the external arbitrary input <strong>x</strong> needs to be scaled such that:</p>
<pre><code>f(func)   = 0.5 π
f(nofunc) = -0.5 π</code></pre>
<h3 id="example-1">Example</h3>
<p>In the picture below the input x is increased from 0 to 1. The range of interpolation is defined by:</p>
<ul>
<li>func = 0.75</li>
<li>nofunc = 0.25</li>
</ul>
<h3 id="references-1">References</h3>
<dl>
<dt>Wischhusen, St.</dt>
<dd><p><strong>Simulation von Kältemaschinen-Prozessen mit MODELICA / DYMOLA</strong>. Diploma thesis, Hamburg University of Technology, Institute of Thermofluiddynamics, 2000.</p>
</dd>
</dl>
<p>::</p>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-8">Inputs</h2>
<table>
<col width="11%" />
<col width="13%" />
<col width="15%" />
<col width="60%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">func</td>
<td align="left">
</td>
<td align="left">input value for that result = 100%</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">nofunc</td>
<td align="left">
</td>
<td align="left">input value for that result = 0%</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">
</td>
<td align="left">input variable for continuous interpolation</td>
</tr>
</tbody>
</table>
<h2 id="outputs-8">Outputs</h2>
<table>
<col width="12%" />
<col width="15%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">result</td>
<td align="left">output value</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>function Stepsmoother &quot;Continuous interpolation for x &quot;
  annotation(derivative=Stepsmoother_der);

  extends Modelica.Icons.Function;
  input Real func &quot;input value for that result = 100%&quot;;
  input Real nofunc &quot;input value for that result = 0%&quot;;
  input Real x &quot;input variable for continuous interpolation&quot;;
  output Real result &quot;output value&quot;;

protected 
  Real m=Modelica.Constants.pi/(func - nofunc);
  Real b=-Modelica.Constants.pi/2 - m*nofunc;
  Real r_1=tan(m*x + b);

algorithm 
  result := if x &gt;= 0.999999*(func - nofunc) + nofunc and func &gt; nofunc or x
     &lt;= 0.999999*(func - nofunc) + nofunc and nofunc &gt; func then 1 else if x
     &lt;= 0.000001*(func - nofunc) + nofunc and func &gt; nofunc or x &gt;= 0.000001*(
    func - nofunc) + nofunc and nofunc &gt; func then 0 else ((0.5*(exp(r_1) - exp(
    -r_1))/(0.5*(exp(r_1) + exp(-r_1))) + 1)/2);
end Stepsmoother;</code></pre>
<hr />
<h1 id="image23-modelica.fluid.dissipation.utilities.functions.general.stepsmoother_der"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" alt="image23" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General">Modelica.Fluid.Dissipation.Utilities.Functions.General</a>.Stepsmoother_der</h1>
<p><strong>Derivative of function Stepsmoother</strong></p>
<h2 id="information-6">Information</h2>
<p>Extends from <a href="Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).</p>
<h2 id="inputs-9">Inputs</h2>
<table>
<col width="12%" />
<col width="16%" />
<col width="16%" />
<col width="45%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">func</td>
<td align="left">
</td>
<td align="left">input for that result = 100%</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">nofunc</td>
<td align="left">
</td>
<td align="left">input for that result = 0%</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x</td>
<td align="left">
</td>
<td align="left">input for interpolation</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">dfunc</td>
<td align="left">
</td>
<td align="left">derivative of func</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">dnofunc</td>
<td align="left">
</td>
<td align="left">derivative of nofunc</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">dx</td>
<td align="left">
</td>
<td align="left">derivative of x</td>
</tr>
</tbody>
</table>
<h2 id="outputs-9">Outputs</h2>
<table>
<col width="12%" />
<col width="16%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">dresult</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>function Stepsmoother_der &quot;Derivative of function Stepsmoother&quot;

  extends Modelica.Icons.Function;
  input Real func &quot;input for that result = 100%&quot;;
  input Real nofunc &quot;input for that result = 0%&quot;;
  input Real x &quot;input for interpolation&quot;;
  input Real dfunc &quot;derivative of func&quot;;
  input Real dnofunc &quot;derivative of nofunc&quot;;
  input Real dx &quot;derivative of x&quot;;
  output Real dresult;

protected 
  Real m=Modelica.Constants.pi/(func - nofunc);
  Real b=-Modelica.Constants.pi/2 - m*nofunc;

algorithm 
  dresult := if x &gt;= 0.999*(func - nofunc) + nofunc and func &gt; nofunc or x &lt;=
    0.999*(func - nofunc) + nofunc and nofunc &gt; func or x &lt;= 0.001*(func -
    nofunc) + nofunc and func &gt; nofunc or x &gt;= 0.001*(func - nofunc) + nofunc
     and nofunc &gt; func then 0 else (1 - Modelica.Math.tanh(Modelica.Math.tan(m*
    x + b))^2)*(1 + Modelica.Math.tan(m*x + b)^2)*m*dx;
end Stepsmoother_der;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:24 2010.</p>
</body>
</html>
