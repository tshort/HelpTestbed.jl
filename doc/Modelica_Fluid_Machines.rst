=======================
Modelica.Fluid.Machines
=======================

`Modelica.Fluid <Modelica_Fluid.html#Modelica.Fluid>`_.Machines
---------------------------------------------------------------

**Devices for converting between energy held in a fluid and mechanical
energy**

Information
~~~~~~~~~~~

::

::

Extends from
`Modelica.Icons.VariantsPackage <Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage>`_
(Icon for package containing variants).

Package Content
~~~~~~~~~~~~~~~

+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
| Name                                                                                                                                  | Description                                                                                  |
+=======================================================================================================================================+==============================================================================================+
| |image5| `SweptVolume <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines.SweptVolume>`_                                            | varying cylindric volume depending on the postition of the piston                            |
+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
| |image6| `Pump <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines.Pump>`_                                                          | Centrifugal pump with mechanical connector for the shaft                                     |
+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
| |image7| `ControlledPump <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines.ControlledPump>`_                                      | Centrifugal pump with ideally controlled mass flow rate                                      |
+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
| |image8| `PrescribedPump <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines.PrescribedPump>`_                                      | Centrifugal pump with ideally controlled speed                                               |
+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
| |image9| `BaseClasses <Modelica_Fluid_Machines_BaseClasses.html#Modelica.Fluid.Machines.BaseClasses>`_                                | Base classes used in the Machines package (only of interest to build new component models)   |
+---------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------+

--------------

|image10| `Modelica.Fluid.Machines <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines>`_.SweptVolume
-------------------------------------------------------------------------------------------------------

**varying cylindric volume depending on the postition of the piston**

.. figure:: Modelica.Fluid.Machines.SweptVolumeD.png
   :align: center
   :alt: Modelica.Fluid.Machines.SweptVolume

   Modelica.Fluid.Machines.SweptVolume

Information
~~~~~~~~~~~

::

Mixing volume with varying size. The size of the volume is given by:

-  cross sectional piston area
-  piston stroke given by the flange position s
-  clearance (volume at flang position = 0)

Losses are neglected. The shaft power is completely converted into
mechanical work on the fluid.

The flange position has to be equal or greater than zero. Otherwise the
simulation stops. The force of the flange results from the pressure
difference between medium and ambient pressure and the cross sectional
piston area. For using the component, a top level instance of the
ambient model with the inner attribute is needed.

The pressure at both fluid ports equals the medium pressure in the
volume. No suction nor discharge valve is included in the model.

The thermal port is directly connected to the medium. The temperature of
the thermal port equals the medium temperature. The heat capacity of the
cylinder and the piston are not includes in the model.

::

Extends from
`Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel>`_
(Lumped volume with a vector of fluid ports and replaceable heat
transfer model).

Parameters
~~~~~~~~~~

+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Type                                                                                                                          | Name                                                                                                                                            | Default                             | Description                                           |
+===============================================================================================================================+=================================================================================================================================================+=====================================+=======================================================+
| `Area <Modelica_SIunits.html#Modelica.SIunits.Area>`_                                                                         | pistonCrossArea                                                                                                                                 |                                     | cross sectional area of pistion [m2]                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                     | clearance                                                                                                                                       |                                     | remaining volume at zero piston stroke [m3]           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| replaceable package Medium                                                                                                    | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component             |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                     | fluidVolume                                                                                                                                     | V                                   | Volume [m3]                                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Ports                                                                                                                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_portsData                                                                                                                                  | true                                | = false to neglect pressure loss and kinetic energy   |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `VesselPortsData <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselPortsData>`_               | portsData[nPorts]                                                                                                                               |                                     | Data of inlet/outlet ports                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Assumptions**                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Dynamics                                                                                                                      |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | energyDynamics                                                                                                                                  | system.energyDynamics               | Formulation of energy balance                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | massDynamics                                                                                                                                    | system.massDynamics                 | Formulation of mass balance                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Heat transfer                                                                                                                 |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_HeatTransfer                                                                                                                               | false                               | = true to use the HeatTransfer model                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Initialization**                                                                                                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_   | p\_start                                                                                                                                        | system.p\_start                     | Start value of pressure [Pa]                          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_T\_start                                                                                                                                   | true                                | = true, use T\_start, otherwise h\_start              |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_             | T\_start                                                                                                                                        | if use\_T\_start then system.T...   | Start value of temperature [K]                        |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_   | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...   | Start value of specific enthalpy [J/kg]               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_           | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                   | Start value of mass fractions m\_i/m [kg/kg]          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_         | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                  | Start value of trace substances                       |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Advanced**                                                                                                                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Port properties                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFlowRate <Modelica_SIunits.html#Modelica.SIunits.MassFlowRate>`_                                                         | m\_flow\_small                                                                                                                                  | system.m\_flow\_small               | Regularization range at zero mass flow rate [kg/s]    |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+

Connectors
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------+
| Type                                                                                                                     | Name            | Description                     |
+==========================================================================================================================+=================+=================================+
| `VesselFluidPorts\_b <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b>`_   | ports[nPorts]   | Fluid inlets and outlets        |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_       | heatPort        |                                 |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------+
| `Flange\_b <Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b>`_     | flange          | translation flange for piston   |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model SweptVolume 
      "varying cylindric volume depending on the postition of the piston"
      import Modelica.Constants.pi;

      parameter SI.Area pistonCrossArea "cross sectional area of pistion";
      parameter SI.Volume clearance "remaining volume at zero piston stroke";

      SI.Volume V "fluid volume";

      // Mass and energy balance, ports
      extends Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel(
        final fluidVolume = V,
        heatTransfer(surfaceAreas={pistonCrossArea+2*sqrt(pistonCrossArea*pi)*(flange.s+clearance/pistonCrossArea)}));

      Modelica.Mechanics.Translational.Interfaces.Flange_b flange 
        "translation flange for piston";

    equation 
      assert(flange.s >= 0, "Piston stroke (given by flange.s) must not be smaller than zero!");

      // volume size
      V = clearance + flange.s * pistonCrossArea;

      0 = flange.f + (medium.p - system.p_ambient) * pistonCrossArea;

      // energy balances
      Wb_flow = medium.p * pistonCrossArea * (-der(flange.s));

      // definition of port pressures
      for i in 1:nPorts loop
        vessel_ps_static[i] = medium.p;
      end for;

    end SweptVolume;

--------------

|image11| `Modelica.Fluid.Machines <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines>`_.Pump
------------------------------------------------------------------------------------------------

**Centrifugal pump with mechanical connector for the shaft**

.. figure:: Modelica.Fluid.Machines.PumpD.png
   :align: center
   :alt: Modelica.Fluid.Machines.Pump

   Modelica.Fluid.Machines.Pump

Information
~~~~~~~~~~~

::

This model describes a centrifugal pump (or a group of ``nParallel``
pumps) with a mechanical rotational connector for the shaft, to be used
when the pump drive has to be modelled explicitly. In the case of
``nParallel`` pumps, the mechanical connector is relative to a single
pump.

The model extends ``PartialPump``

::

Extends from
`Modelica.Fluid.Machines.BaseClasses.PartialPump <Modelica_Fluid_Machines_BaseClasses.html#Modelica.Fluid.Machines.BaseClasses.PartialPump>`_
(Base model for centrifugal pumps).

Parameters
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Type                                                                                                                                 | Name                                                                                                                                            | Default                                                        | Description                                                                               |
+======================================================================================================================================+=================================================================================================================================================+================================================================+===========================================================================================+
| replaceable package Medium                                                                                                           | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Characteristics                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Integer                                                                                                                              | nParallel                                                                                                                                       | 1                                                              | Number of pumps in parallel                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function flowCharacteristic                                                                                              | PumpCharacteristics.baseFlow                                                                                                                    | Head vs. V\_flow characteristic at nominal speed and density   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AngularVelocity\_rpm <Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm>`_   | N\_nominal                                                                                                                                      |                                                                | Nominal rotational speed for flow characteristic [1/min]                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Density <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Density>`_                            | rho\_nominal                                                                                                                                    | Medium.density\_pTX(Medium.p\_...                              | Nominal fluid density for characteristic [kg/m3]                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_powerCharacteristic                                                                                                                        | false                                                          | Use powerCharacteristic (vs. efficiencyCharacteristic)                                    |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function powerCharacteristic                                                                                             | PumpCharacteristics.quadrati...                                                                                                                 | Power consumption vs. V\_flow at nominal speed and density     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function efficiencyCharacteristic                                                                                        | PumpCharacteristics.constant...                                                                                                                 | Efficiency vs. V\_flow at nominal speed and density            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Assumptions**                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | allowFlowReversal                                                                                                                               | system.allowFlowReversal                                       | = true to allow flow reversal, false restricts to design direction (port\_a -> port\_b)   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | checkValve                                                                                                                                      | false                                                          | = true to prevent reverse flow                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                            | V                                                                                                                                               | 0                                                              | Volume inside the pump [m3]                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Dynamics                                                                                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | energyDynamics                                                                                                                                  | Types.Dynamics.SteadyState                                     | Formulation of energy balance                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | massDynamics                                                                                                                                    | Types.Dynamics.SteadyState                                     | Formulation of mass balance                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Heat transfer                                                                                                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_HeatTransfer                                                                                                                               | false                                                          | = true to use a HeatTransfer model, e.g., for a housing                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                       | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Initialization**                                                                                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_a\_start                                                                                                                                     | system.p\_start                                                | Guess value for inlet pressure [Pa]                                                       |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_b\_start                                                                                                                                     | p\_a\_start                                                    | Guess value for outlet pressure [Pa]                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFlowRate <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate>`_                  | m\_flow\_start                                                                                                                                  | 1                                                              | Guess value of m\_flow = port\_a.m\_flow [kg/s]                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_T\_start                                                                                                                                   | true                                                           | = true, use T\_start, otherwise h\_start                                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_                    | T\_start                                                                                                                                        | if use\_T\_start then system.T...                              | Start value of temperature [K]                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_          | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...                              | Start value of specific enthalpy [J/kg]                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_                  | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                                              | Start value of mass fractions m\_i/m [kg/kg]                                              |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_                | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                                             | Start value of trace substances                                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Advanced**                                                                                                                         |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Diagnostics                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | show\_NPSHa                                                                                                                                     | false                                                          | = true to compute Net Positive Suction Head available                                     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+

Connectors
~~~~~~~~~~

+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| Type                                                                                                                 | Name       | Description                                                                     |
+======================================================================================================================+============+=================================================================================+
| `FluidPort\_a <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a>`_                               | port\_a    | Fluid connector a (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| `FluidPort\_b <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b>`_                               | port\_b    | Fluid connector b (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_   | heatPort   |                                                                                 |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| `Flange\_a <Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a>`_       | shaft      |                                                                                 |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model Pump "Centrifugal pump with mechanical connector for the shaft"
      extends Modelica.Fluid.Machines.BaseClasses.PartialPump;
      SI.Angle phi "Shaft angle";
      SI.AngularVelocity omega "Shaft angular velocity";
      Modelica.Mechanics.Rotational.Interfaces.Flange_a shaft;
    equation 
      phi = shaft.phi;
      omega = der(phi);
      N = Modelica.SIunits.Conversions.to_rpm(omega);
      W_single = omega*shaft.tau;
    end Pump;

--------------

|image12| `Modelica.Fluid.Machines <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines>`_.ControlledPump
----------------------------------------------------------------------------------------------------------

**Centrifugal pump with ideally controlled mass flow rate**

.. figure:: Modelica.Fluid.Machines.ControlledPumpD.png
   :align: center
   :alt: Modelica.Fluid.Machines.ControlledPump

   Modelica.Fluid.Machines.ControlledPump

Information
~~~~~~~~~~~

::

This model describes a centrifugal pump (or a group of ``nParallel``
pumps) with ideally controlled mass flow rate or pressure.

Nominal values are used to predefine an exemplary pump characteristics
and to define the operation of the pump. The input connectors
``m_flow_set`` or ``p_set`` can optionally be enabled to provide time
varying set points.

Use this model if the pump characteristics is of secondary interest. The
actual characteristics can be configured later on for the appropriate
rotational speed N. Then the model can be replaced with a Pump with
rotational shaft or with a PrescribedPump.

::

Extends from
`Modelica.Fluid.Machines.BaseClasses.PartialPump <Modelica_Fluid_Machines_BaseClasses.html#Modelica.Fluid.Machines.BaseClasses.PartialPump>`_
(Base model for centrifugal pumps).

Parameters
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Type                                                                                                                                 | Name                                                                                                                                            | Default                                                        | Description                                                                               |
+======================================================================================================================================+=================================================================================================================================================+================================================================+===========================================================================================+
| replaceable package Medium                                                                                                           | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_a\_nominal                                                                                                                                   |                                                                | Nominal inlet pressure for predefined pump characteristics [Pa]                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_b\_nominal                                                                                                                                   |                                                                | Nominal outlet pressure, fixed if not control\_m\_flow and not use\_p\_set [Pa]           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFlowRate <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate>`_                  | m\_flow\_nominal                                                                                                                                |                                                                | Nominal mass flow rate, fixed if control\_m\_flow and not use\_m\_flow\_set [kg/s]        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | control\_m\_flow                                                                                                                                | true                                                           | = false to control outlet pressure port\_b.p instead of m\_flow                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_m\_flow\_set                                                                                                                               | false                                                          | = true to use input signal m\_flow\_set instead of m\_flow\_nominal                       |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_p\_set                                                                                                                                     | false                                                          | = true to use input signal p\_set instead of p\_b\_nominal                                |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Characteristics                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Integer                                                                                                                              | nParallel                                                                                                                                       | 1                                                              | Number of pumps in parallel                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function flowCharacteristic                                                                                              | Modelica.Fluid.Machines.Base...                                                                                                                 | Head vs. V\_flow characteristic at nominal speed and density   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AngularVelocity\_rpm <Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm>`_   | N\_nominal                                                                                                                                      | 1500                                                           | Nominal rotational speed for flow characteristic [1/min]                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Density <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Density>`_                            | rho\_nominal                                                                                                                                    | Medium.density\_pTX(Medium.p\_...                              | Nominal fluid density for characteristic [kg/m3]                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_powerCharacteristic                                                                                                                        | false                                                          | Use powerCharacteristic (vs. efficiencyCharacteristic)                                    |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function powerCharacteristic                                                                                             | PumpCharacteristics.quadrati...                                                                                                                 | Power consumption vs. V\_flow at nominal speed and density     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function efficiencyCharacteristic                                                                                        | PumpCharacteristics.constant...                                                                                                                 | Efficiency vs. V\_flow at nominal speed and density            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Assumptions**                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | allowFlowReversal                                                                                                                               | system.allowFlowReversal                                       | = true to allow flow reversal, false restricts to design direction (port\_a -> port\_b)   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | checkValve                                                                                                                                      | false                                                          | = true to prevent reverse flow                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                            | V                                                                                                                                               | 0                                                              | Volume inside the pump [m3]                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Dynamics                                                                                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | energyDynamics                                                                                                                                  | Types.Dynamics.SteadyState                                     | Formulation of energy balance                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | massDynamics                                                                                                                                    | Types.Dynamics.SteadyState                                     | Formulation of mass balance                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Heat transfer                                                                                                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_HeatTransfer                                                                                                                               | false                                                          | = true to use a HeatTransfer model, e.g., for a housing                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                       | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Initialization**                                                                                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_a\_start                                                                                                                                     | system.p\_start                                                | Guess value for inlet pressure [Pa]                                                       |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_b\_start                                                                                                                                     | p\_a\_start                                                    | Guess value for outlet pressure [Pa]                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFlowRate <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate>`_                  | m\_flow\_start                                                                                                                                  | 1                                                              | Guess value of m\_flow = port\_a.m\_flow [kg/s]                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_T\_start                                                                                                                                   | true                                                           | = true, use T\_start, otherwise h\_start                                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_                    | T\_start                                                                                                                                        | if use\_T\_start then system.T...                              | Start value of temperature [K]                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_          | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...                              | Start value of specific enthalpy [J/kg]                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_                  | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                                              | Start value of mass fractions m\_i/m [kg/kg]                                              |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_                | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                                             | Start value of trace substances                                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Advanced**                                                                                                                         |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Diagnostics                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | show\_NPSHa                                                                                                                                     | false                                                          | = true to compute Net Positive Suction Head available                                     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+

Connectors
~~~~~~~~~~

+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| Type                                                                                                                 | Name                                                           | Description                                                                     |
+======================================================================================================================+================================================================+=================================================================================+
| `FluidPort\_a <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a>`_                               | port\_a                                                        | Fluid connector a (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| `FluidPort\_b <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b>`_                               | port\_b                                                        | Fluid connector b (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_   | heatPort                                                       |                                                                                 |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| input `RealInput <Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput>`_                            | m\_flow\_set                                                   | Prescribed mass flow rate                                                       |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| input `RealInput <Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput>`_                            | p\_set                                                         | Prescribed outlet pressure                                                      |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| Characteristics                                                                                                      |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| replaceable function flowCharacteristic                                                                              | Head vs. V\_flow characteristic at nominal speed and density   |
+----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+---------------------------------------------------------------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model ControlledPump 
      "Centrifugal pump with ideally controlled mass flow rate"
      import Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm;
      extends Modelica.Fluid.Machines.BaseClasses.PartialPump(
        N_nominal=1500,
        N(start=N_nominal),
        redeclare replaceable function flowCharacteristic =
            Modelica.Fluid.Machines.BaseClasses.PumpCharacteristics.quadraticFlow (
              V_flow_nominal={0, V_flow_op, 1.5*V_flow_op},
              head_nominal={2*head_op, head_op, 0}));

      // nominal values
      parameter Medium.AbsolutePressure p_a_nominal 
        "Nominal inlet pressure for predefined pump characteristics";
      parameter Medium.AbsolutePressure p_b_nominal 
        "Nominal outlet pressure, fixed if not control_m_flow and not use_p_set";
      parameter Medium.MassFlowRate m_flow_nominal 
        "Nominal mass flow rate, fixed if control_m_flow and not use_m_flow_set";

      // what to control
      parameter Boolean control_m_flow = true 
        "= false to control outlet pressure port_b.p instead of m_flow";
      parameter Boolean use_m_flow_set = false 
        "= true to use input signal m_flow_set instead of m_flow_nominal";
      parameter Boolean use_p_set = false 
        "= true to use input signal p_set instead of p_b_nominal";

      // exemplary characteristics
      final parameter SI.VolumeFlowRate V_flow_op = m_flow_nominal/rho_nominal 
        "operational volume flow rate according to nominal values";
      final parameter SI.Height head_op = (p_b_nominal-p_a_nominal)/(rho_nominal*g) 
        "operational pump head according to nominal values";

      Modelica.Blocks.Interfaces.RealInput m_flow_set if use_m_flow_set 
        "Prescribed mass flow rate";
      Modelica.Blocks.Interfaces.RealInput p_set if use_p_set 
        "Prescribed outlet pressure";

    protected 
      Modelica.Blocks.Interfaces.RealInput m_flow_set_internal 
        "Needed to connect to conditional connector";
      Modelica.Blocks.Interfaces.RealInput p_set_internal 
        "Needed to connect to conditional connector";
    equation 
      // Ideal control
      if control_m_flow then
        m_flow = m_flow_set_internal;
      else
        dp_pump = p_set_internal - port_a.p;
      end if;

      // Internal connector value when use_m_flow_set = false
      if not use_m_flow_set then
        m_flow_set_internal = m_flow_nominal;
      end if;
      if not use_p_set then
        p_set_internal = p_b_nominal;
      end if;
      connect(m_flow_set, m_flow_set_internal);
      connect(p_set, p_set_internal);

    end ControlledPump;

--------------

|image13| `Modelica.Fluid.Machines <Modelica_Fluid_Machines.html#Modelica.Fluid.Machines>`_.PrescribedPump
----------------------------------------------------------------------------------------------------------

**Centrifugal pump with ideally controlled speed**

.. figure:: Modelica.Fluid.Machines.PrescribedPumpD.png
   :align: center
   :alt: Modelica.Fluid.Machines.PrescribedPump

   Modelica.Fluid.Machines.PrescribedPump

Information
~~~~~~~~~~~

::

This model describes a centrifugal pump (or a group of ``nParallel``
pumps) with prescribed speed, either fixed or provided by an external
signal.

The model extends ``PartialPump``

If the ``N_in`` input connector is wired, it provides rotational speed
of the pumps (rpm); otherwise, a constant rotational speed equal to
``n_const`` (which can be different from ``N_nominal``) is assumed.

::

Extends from
`Modelica.Fluid.Machines.BaseClasses.PartialPump <Modelica_Fluid_Machines_BaseClasses.html#Modelica.Fluid.Machines.BaseClasses.PartialPump>`_
(Base model for centrifugal pumps).

Parameters
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Type                                                                                                                                 | Name                                                                                                                                            | Default                                                        | Description                                                                               |
+======================================================================================================================================+=================================================================================================================================================+================================================================+===========================================================================================+
| replaceable package Medium                                                                                                           | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_N\_in                                                                                                                                      | false                                                          | Get the rotational speed from the input connector                                         |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AngularVelocity\_rpm <Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm>`_   | N\_const                                                                                                                                        | N\_nominal                                                     | Constant rotational speed [1/min]                                                         |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Characteristics                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Integer                                                                                                                              | nParallel                                                                                                                                       | 1                                                              | Number of pumps in parallel                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function flowCharacteristic                                                                                              | PumpCharacteristics.baseFlow                                                                                                                    | Head vs. V\_flow characteristic at nominal speed and density   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AngularVelocity\_rpm <Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm>`_   | N\_nominal                                                                                                                                      |                                                                | Nominal rotational speed for flow characteristic [1/min]                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Density <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Density>`_                            | rho\_nominal                                                                                                                                    | Medium.density\_pTX(Medium.p\_...                              | Nominal fluid density for characteristic [kg/m3]                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_powerCharacteristic                                                                                                                        | false                                                          | Use powerCharacteristic (vs. efficiencyCharacteristic)                                    |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function powerCharacteristic                                                                                             | PumpCharacteristics.quadrati...                                                                                                                 | Power consumption vs. V\_flow at nominal speed and density     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable function efficiencyCharacteristic                                                                                        | PumpCharacteristics.constant...                                                                                                                 | Efficiency vs. V\_flow at nominal speed and density            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Assumptions**                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | allowFlowReversal                                                                                                                               | system.allowFlowReversal                                       | = true to allow flow reversal, false restricts to design direction (port\_a -> port\_b)   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | checkValve                                                                                                                                      | false                                                          | = true to prevent reverse flow                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                            | V                                                                                                                                               | 0                                                              | Volume inside the pump [m3]                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Dynamics                                                                                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | energyDynamics                                                                                                                                  | Types.Dynamics.SteadyState                                     | Formulation of energy balance                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                                | massDynamics                                                                                                                                    | Types.Dynamics.SteadyState                                     | Formulation of mass balance                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Heat transfer                                                                                                                        |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_HeatTransfer                                                                                                                               | false                                                          | = true to use a HeatTransfer model, e.g., for a housing                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                       | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                                             |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Initialization**                                                                                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_a\_start                                                                                                                                     | system.p\_start                                                | Guess value for inlet pressure [Pa]                                                       |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_          | p\_b\_start                                                                                                                                     | p\_a\_start                                                    | Guess value for outlet pressure [Pa]                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFlowRate <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate>`_                  | m\_flow\_start                                                                                                                                  | 1                                                              | Guess value of m\_flow = port\_a.m\_flow [kg/s]                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | use\_T\_start                                                                                                                                   | true                                                           | = true, use T\_start, otherwise h\_start                                                  |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_                    | T\_start                                                                                                                                        | if use\_T\_start then system.T...                              | Start value of temperature [K]                                                            |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_          | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...                              | Start value of specific enthalpy [J/kg]                                                   |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_                  | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                                              | Start value of mass fractions m\_i/m [kg/kg]                                              |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_                | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                                             | Start value of trace substances                                                           |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| **Advanced**                                                                                                                         |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Diagnostics                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+
| Boolean                                                                                                                              | show\_NPSHa                                                                                                                                     | false                                                          | = true to compute Net Positive Suction Head available                                     |
+--------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------------------------------+

Connectors
~~~~~~~~~~

+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| Type                                                                                                                 | Name       | Description                                                                     |
+======================================================================================================================+============+=================================================================================+
| `FluidPort\_a <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a>`_                               | port\_a    | Fluid connector a (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| `FluidPort\_b <Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b>`_                               | port\_b    | Fluid connector b (positive design flow direction is from port\_a to port\_b)   |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_   | heatPort   |                                                                                 |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+
| input `RealInput <Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput>`_                            | N\_in      | Prescribed rotational speed [1/min]                                             |
+----------------------------------------------------------------------------------------------------------------------+------------+---------------------------------------------------------------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model PrescribedPump "Centrifugal pump with ideally controlled speed"
      extends Modelica.Fluid.Machines.BaseClasses.PartialPump;
      parameter Boolean use_N_in = false 
        "Get the rotational speed from the input connector";
      parameter Modelica.SIunits.Conversions.NonSIunits.AngularVelocity_rpm
        N_const =                                                                     N_nominal 
        "Constant rotational speed";
      Modelica.Blocks.Interfaces.RealInput N_in(unit="1/min") if use_N_in 
        "Prescribed rotational speed";

    protected 
      Modelica.Blocks.Interfaces.RealInput N_in_internal(unit="1/min") 
        "Needed to connect to conditional connector";
    equation 
      // Connect statement active only if use_p_in = true
      connect(N_in, N_in_internal);
      // Internal connector value when use_p_in = false
      if not use_N_in then
        N_in_internal = N_const;
      end if;
      // Set N with a lower limit to avoid singularities at zero speed
      N = max(N_in_internal,1e-3) "Rotational speed";

    end PrescribedPump;

--------------

`Automatically generated <http://www.3ds.com/>`_ Fri Nov 12 16:31:16
2010.

.. |Modelica.Fluid.Machines.SweptVolume| image:: Modelica.Fluid.Machines.SweptVolumeS.png
.. |Modelica.Fluid.Machines.Pump| image:: Modelica.Fluid.Machines.PumpS.png
.. |Modelica.Fluid.Machines.ControlledPump| image:: Modelica.Fluid.Machines.ControlledPumpS.png
.. |Modelica.Fluid.Machines.PrescribedPump| image:: Modelica.Fluid.Machines.PrescribedPumpS.png
.. |Modelica.Fluid.Machines.BaseClasses| image:: Modelica.Fluid.Machines.BaseClassesS.png
.. |image5| image:: Modelica.Fluid.Machines.SweptVolumeS.png
.. |image6| image:: Modelica.Fluid.Machines.PumpS.png
.. |image7| image:: Modelica.Fluid.Machines.ControlledPumpS.png
.. |image8| image:: Modelica.Fluid.Machines.PrescribedPumpS.png
.. |image9| image:: Modelica.Fluid.Machines.BaseClassesS.png
.. |image10| image:: Modelica.Fluid.Machines.SweptVolumeI.png
.. |image11| image:: Modelica.Fluid.Machines.PumpI.png
.. |image12| image:: Modelica.Fluid.Machines.ControlledPumpI.png
.. |image13| image:: Modelica.Fluid.Machines.PrescribedPumpI.png
