======================
Modelica.Fluid.Vessels
======================

`Modelica.Fluid <Modelica_Fluid.html#Modelica.Fluid>`_.Vessels
--------------------------------------------------------------

**Devices for storing fluid**

Information
~~~~~~~~~~~

::

::

Extends from
`Modelica.Icons.VariantsPackage <Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage>`_
(Icon for package containing variants).

Package Content
~~~~~~~~~~~~~~~

+------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
| Name                                                                                                                               | Description                                                                                 |
+====================================================================================================================================+=============================================================================================+
| |image3| `ClosedVolume <Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.ClosedVolume>`_                                         | Volume of fixed size, closed to the ambient, with inlet/outlet ports                        |
+------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
| |image4| `OpenTank <Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank>`_                                                 | Simple tank with inlet/outlet ports                                                         |
+------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
| |image5| `BaseClasses <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses>`_                               | Base classes used in the Vessels package (only of interest to build new component models)   |
+------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+

--------------

|image6| `Modelica.Fluid.Vessels <Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels>`_.ClosedVolume
----------------------------------------------------------------------------------------------------

**Volume of fixed size, closed to the ambient, with inlet/outlet ports**

.. figure:: Modelica.Fluid.Vessels.ClosedVolumeD.png
   :align: center
   :alt: Modelica.Fluid.Vessels.ClosedVolume

   Modelica.Fluid.Vessels.ClosedVolume

Information
~~~~~~~~~~~

::

Ideally mixed volume of constant size with two fluid ports and one
medium model. The flow properties are computed from the upstream
quantities, pressures are equal in both nodes and the medium model if
``use_portsData=false``. Heat transfer through a thermal port is
possible, it equals zero if the port remains unconnected. A spherical
shape is assumed for the heat transfer area, with V=4/3\*pi\*r^3,
A=4\*pi\*r^2. Ideal heat transfer is assumed per default; the thermal
port temperature is equal to the medium temperature.

If ``use_portsData=true``, the port pressures represent the pressures
just after the outlet (or just before the inlet) in the attached pipe.
The hydraulic resistances ``portsData.zeta_in`` and
``portsData.zeta_out`` determine the dissipative pressure drop between
volume and port depending on the direction of mass flow. See
`VesselPortsData <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselPortsData>`_
and *[Idelchik, Handbook of Hydraulic Resistance, 2004]*.

::

Extends from
`Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel>`_
(Lumped volume with a vector of fluid ports and replaceable heat
transfer model).

Parameters
~~~~~~~~~~

+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Type                                                                                                                          | Name                                                                                                                                            | Default                             | Description                                           |
+===============================================================================================================================+=================================================================================================================================================+=====================================+=======================================================+
| replaceable package Medium                                                                                                    | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component             |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                     | fluidVolume                                                                                                                                     | V                                   | Volume [m3]                                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                     | V                                                                                                                                               |                                     | Volume [m3]                                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Ports                                                                                                                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_portsData                                                                                                                                  | true                                | = false to neglect pressure loss and kinetic energy   |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `VesselPortsData <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselPortsData>`_               | portsData[nPorts]                                                                                                                               |                                     | Data of inlet/outlet ports                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Assumptions**                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Dynamics                                                                                                                      |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | energyDynamics                                                                                                                                  | system.energyDynamics               | Formulation of energy balance                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | massDynamics                                                                                                                                    | system.massDynamics                 | Formulation of mass balance                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Heat transfer                                                                                                                 |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_HeatTransfer                                                                                                                               | false                               | = true to use the HeatTransfer model                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Initialization**                                                                                                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_   | p\_start                                                                                                                                        | system.p\_start                     | Start value of pressure [Pa]                          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_T\_start                                                                                                                                   | true                                | = true, use T\_start, otherwise h\_start              |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_             | T\_start                                                                                                                                        | if use\_T\_start then system.T...   | Start value of temperature [K]                        |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_   | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...   | Start value of specific enthalpy [J/kg]               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_           | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                   | Start value of mass fractions m\_i/m [kg/kg]          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_         | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                  | Start value of trace substances                       |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Advanced**                                                                                                                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Port properties                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFlowRate <Modelica_SIunits.html#Modelica.SIunits.MassFlowRate>`_                                                         | m\_flow\_small                                                                                                                                  | system.m\_flow\_small               | Regularization range at zero mass flow rate [kg/s]    |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+

Connectors
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+
| Type                                                                                                                     | Name            | Description                |
+==========================================================================================================================+=================+============================+
| `VesselFluidPorts\_b <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b>`_   | ports[nPorts]   | Fluid inlets and outlets   |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_       | heatPort        |                            |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model ClosedVolume 
      "Volume of fixed size, closed to the ambient, with inlet/outlet ports"
    import Modelica.Constants.pi;

      // Mass and energy balance, ports
      extends Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel(
        final fluidVolume = V,
        vesselArea = pi*(3/4*V)^(2/3),
        heatTransfer(surfaceAreas={4*pi*(3/4*V/pi)^(2/3)}));

      parameter SI.Volume V "Volume";

    equation 
      Wb_flow = 0;
      for i in 1:nPorts loop
        vessel_ps_static[i] = medium.p;
      end for;

    end ClosedVolume;

--------------

|image7| `Modelica.Fluid.Vessels <Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels>`_.OpenTank
------------------------------------------------------------------------------------------------

**Simple tank with inlet/outlet ports**

.. figure:: Modelica.Fluid.Vessels.ClosedVolumeD.png
   :align: center
   :alt: Modelica.Fluid.Vessels.OpenTank

   Modelica.Fluid.Vessels.OpenTank

Information
~~~~~~~~~~~

::

Model of a tank that is open to the ambient at the fixed pressure
``p_ambient``.

The vector of connectors **ports** represents fluid ports at
configurable heights, relative to the bottom of tank. Fluid can flow
either out of or in to each port.

The following assumptions are made:

-  The tank is filled with a single or multiple-substance medium having
   a density higher than the density of the ambient medium.
-  The fluid has uniform density, temperature and mass fractions
-  No liquid is leaving the tank through the open top; the simulation
   breaks with an assertion if the liquid level growths over the height.

The port pressures represent the pressures just after the outlet (or
just before the inlet) in the attached pipe. The hydraulic resistances
``portsData.zeta_in`` and ``portsData.zeta_out`` determine the
dissipative pressure drop between tank and port depending on the
direction of mass flow. See
`VesselPortsData <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselPortsData>`_
and *[Idelchik, Handbook of Hydraulic Resistance, 2004]*.

With the setting ``use_portsData=false``, the port pressure represents
the static head at the height of the respective port. The relationship
between pressure drop and mass flow rate at the port must then be
provided by connected components; Heights of ports as well as kinetic
and potential energy of fluid enering or leaving are not taken into
account anymore.

::

Extends from
`Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel>`_
(Lumped volume with a vector of fluid ports and replaceable heat
transfer model).

Parameters
~~~~~~~~~~

+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Type                                                                                                                          | Name                                                                                                                                            | Default                             | Description                                           |
+===============================================================================================================================+=================================================================================================================================================+=====================================+=======================================================+
| `Height <Modelica_SIunits.html#Modelica.SIunits.Height>`_                                                                     | height                                                                                                                                          |                                     | Height of tank [m]                                    |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Area <Modelica_SIunits.html#Modelica.SIunits.Area>`_                                                                         | crossArea                                                                                                                                       |                                     | Area of tank [m2]                                     |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| replaceable package Medium                                                                                                    | `PartialMedium <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium>`_                                         | Medium in the component             |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Volume <Modelica_SIunits.html#Modelica.SIunits.Volume>`_                                                                     | fluidVolume                                                                                                                                     | V                                   | Volume [m3]                                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Ports                                                                                                                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_portsData                                                                                                                                  | true                                | = false to neglect pressure loss and kinetic energy   |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `VesselPortsData <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselPortsData>`_               | portsData[nPorts]                                                                                                                               |                                     | Data of inlet/outlet ports                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Assumptions**                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Ambient                                                                                                                       |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_   | p\_ambient                                                                                                                                      | system.p\_ambient                   | Tank surface pressure [Pa]                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_             | T\_ambient                                                                                                                                      | system.T\_ambient                   | Tank surface Temperature [K]                          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Dynamics                                                                                                                      |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | energyDynamics                                                                                                                                  | system.energyDynamics               | Formulation of energy balance                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Dynamics <Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics>`_                                                         | massDynamics                                                                                                                                    | system.massDynamics                 | Formulation of mass balance                           |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Heat transfer                                                                                                                 |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_HeatTransfer                                                                                                                               | false                               | = true to use the HeatTransfer model                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| replaceable model HeatTransfer                                                                                                | `IdealHeatTransfer <Modelica_Fluid_Vessels_BaseClasses_HeatTransfer.html#Modelica.Fluid.Vessels.BaseClasses.HeatTransfer.IdealHeatTransfer>`_   | Wall heat transfer                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Initialization**                                                                                                            |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Height <Modelica_SIunits.html#Modelica.SIunits.Height>`_                                                                     | level\_start                                                                                                                                    | 0.5\*height                         | Start value of tank level [m]                         |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `AbsolutePressure <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure>`_   | p\_start                                                                                                                                        | p\_ambient                          | Start value of pressure [Pa]                          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Boolean                                                                                                                       | use\_T\_start                                                                                                                                   | true                                | = true, use T\_start, otherwise h\_start              |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `Temperature <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature>`_             | T\_start                                                                                                                                        | if use\_T\_start then system.T...   | Start value of temperature [K]                        |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `SpecificEnthalpy <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy>`_   | h\_start                                                                                                                                        | if use\_T\_start then Medium.s...   | Start value of specific enthalpy [J/kg]               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFraction <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction>`_           | X\_start[Medium.nX]                                                                                                                             | Medium.X\_default                   | Start value of mass fractions m\_i/m [kg/kg]          |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `ExtraProperty <Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty>`_         | C\_start[Medium.nC]                                                                                                                             | fill(0, Medium.nC)                  | Start value of trace substances                       |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| **Advanced**                                                                                                                  |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| Port properties                                                                                                               |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+
| `MassFlowRate <Modelica_SIunits.html#Modelica.SIunits.MassFlowRate>`_                                                         | m\_flow\_small                                                                                                                                  | system.m\_flow\_small               | Regularization range at zero mass flow rate [kg/s]    |
+-------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------+-------------------------------------------------------+

Connectors
~~~~~~~~~~

+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+
| Type                                                                                                                     | Name            | Description                |
+==========================================================================================================================+=================+============================+
| `VesselFluidPorts\_b <Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b>`_   | ports[nPorts]   | Fluid inlets and outlets   |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+
| `HeatPort\_a <Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a>`_       | heatPort        |                            |
+--------------------------------------------------------------------------------------------------------------------------+-----------------+----------------------------+

Modelica definition
~~~~~~~~~~~~~~~~~~~

::

    model OpenTank "Simple tank with inlet/outlet ports"
        import Modelica.Constants.pi;

      // Tank properties
      SI.Height level(stateSelect=StateSelect.prefer, start=max(level_start, Modelica.Constants.eps)) 
        "Level height of tank";
      SI.Volume V(stateSelect=StateSelect.never) "Actual tank volume";

      // Tank geometry
      parameter SI.Height height "Height of tank";
      parameter SI.Area crossArea "Area of tank";

      // Ambient
      parameter Medium.AbsolutePressure p_ambient=system.p_ambient 
        "Tank surface pressure";
      parameter Medium.Temperature T_ambient=system.T_ambient 
        "Tank surface Temperature";

      // Initialization
      parameter SI.Height level_start(min=0) = 0.5*height 
        "Start value of tank level";

      // Mass and energy balance, ports
      extends Modelica.Fluid.Vessels.BaseClasses.PartialLumpedVessel(
        final fluidVolume = V,
        final fluidLevel = level,
        final fluidLevel_max = height,
        final vesselArea = crossArea,
        heatTransfer(surfaceAreas={crossArea+2*sqrt(crossArea*pi)*level}),
        final initialize_p = false,
        final p_start = p_ambient);

    equation 
      // Total quantities
      V = crossArea*level "Volume of fluid";
      medium.p = p_ambient;

      // Source termsEnergy balance
      if Medium.singleState or energyDynamics == Types.Dynamics.SteadyState then
        Wb_flow = 0 
          "Mechanical work is neglected, since also neglected in medium model (otherwise unphysical small temperature change, if tank level changes)";
      else
        Wb_flow = -p_ambient*der(V);
      end if;

      //Determine port properties
      for i in 1:nPorts loop
        vessel_ps_static[i] = max(0, level - portsData_height[i])*system.g*medium.d + p_ambient;
      end for;

    initial equation 
      if massDynamics == Types.Dynamics.FixedInitial then
        level = level_start;
      elseif massDynamics == Types.Dynamics.SteadyStateInitial then
        der(level) = 0;
      end if;

    end OpenTank;

--------------

`Automatically generated <http://www.3ds.com/>`_ Fri Nov 12 16:31:12
2010.

.. |Modelica.Fluid.Vessels.ClosedVolume| image:: Modelica.Fluid.Vessels.ClosedVolumeS.png
.. |Modelica.Fluid.Vessels.OpenTank| image:: Modelica.Fluid.Vessels.OpenTankS.png
.. |Modelica.Fluid.Vessels.BaseClasses| image:: Modelica.Fluid.Vessels.BaseClassesS.png
.. |image3| image:: Modelica.Fluid.Vessels.ClosedVolumeS.png
.. |image4| image:: Modelica.Fluid.Vessels.OpenTankS.png
.. |image5| image:: Modelica.Fluid.Vessels.BaseClassesS.png
.. |image6| image:: Modelica.Fluid.Vessels.ClosedVolumeI.png
.. |image7| image:: Modelica.Fluid.Vessels.OpenTankI.png
