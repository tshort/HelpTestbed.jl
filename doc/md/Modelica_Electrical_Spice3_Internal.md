% Modelica.Electrical.Spice3.Internal
% 
% 

[Modelica.Electrical.Spice3](Modelica_Electrical_Spice3.html#Modelica.Electrical.Spice3).Internal
=================================================================================================

**Collection of functions and records derived from the C++ Spice
library**

Information
-----------

::

This package contains all function, parameters and data of semiconductor
models, that are transformed from SPICE3 into Modelica. The models of
the package semiconductors access to repository models. This package
should not be used via direct access by a user of the Spice-Library for
Modelica. It is restricted to the development.

::

Extends from
[Modelica.Icons.Package](Modelica_Icons_Package.html#Modelica.Icons.Package)
(Icon for standard packages).

Package Content
---------------

  ------------------------------------------------------------------------
  Name                                                   Description
  ------------------------------------------------------ -----------------
  ![image21](Modelica.Electrical.Spice3.Internal.MOSS.pn Metal-Oxide
  g)                                                     Semiconductor
  [MOS](Modelica_Electrical_Spice3_Internal.html#Modelic Field-Effect
  a.Electrical.Spice3.Internal.MOS)                      Transistor

  ![image22](Modelica.Electrical.Spice3.Internal.Modelca Record with
  rdMOSS.png)                                            technological
  [ModelcardMOS](Modelica_Electrical_Spice3_Internal.htm parameters
  l#Modelica.Electrical.Spice3.Internal.ModelcardMOS)    (.model)

  ![image23](Modelica.Electrical.Spice3.Internal.MOS2S.p Metal-Oxide
  ng)                                                    Semiconductor
  [MOS2](Modelica_Electrical_Spice3_Internal.html#Modeli Field-Effect
  ca.Electrical.Spice3.Internal.MOS2)                    Transistor

  ![image24](Modelica.Electrical.Spice3.Internal.Modelca Record with
  rdMOS2S.png)                                           technological
  [ModelcardMOS2](Modelica_Electrical_Spice3_Internal.ht parameters
  ml#Modelica.Electrical.Spice3.Internal.ModelcardMOS2)  (.model)

  ![image25](Modelica.Electrical.Spice3.Internal.BJTS.pn Bipolar junction
  g)                                                     transistor
  [BJT](Modelica_Electrical_Spice3_Internal.html#Modelic 
  a.Electrical.Spice3.Internal.BJT)                      

  ![image26](Modelica.Electrical.Spice3.Internal.Modelca Record with
  rdBJTS.png)                                            technological
  [ModelcardBJT](Modelica_Electrical_Spice3_Internal.htm parameters
  l#Modelica.Electrical.Spice3.Internal.ModelcardBJT)    (.model)

  ![image27](Modelica.Electrical.Spice3.Internal.DIODES. Diode model
  png)                                                   
  [DIODE](Modelica_Electrical_Spice3_Internal.html#Model 
  ica.Electrical.Spice3.Internal.DIODE)                  

  ![image28](Modelica.Electrical.Spice3.Internal.Modelca Record with
  rdDIODES.png)                                          technological
  [ModelcardDIODE](Modelica_Electrical_Spice3_Internal.h parameters
  tml#Modelica.Electrical.Spice3.Internal.ModelcardDIODE (.model)
  )                                                      

  ![image29](Modelica.Electrical.Spice3.Internal.R_SEMIS Semiconductor
  .png)                                                  resistor
  [R\_SEMI](Modelica_Electrical_Spice3_Internal.html#Mod 
  elica.Electrical.Spice3.Internal.R_SEMI)               

  ![image30](Modelica.Electrical.Spice3.Internal.Modelca Record with
  rdRS.png)                                              technological
  [ModelcardR](Modelica_Electrical_Spice3_Internal.html# parameters
  Modelica.Electrical.Spice3.Internal.ModelcardR)        (.model)

  ![image31](Modelica.Electrical.Spice3.Internal.Modelca General constants
  rdRS.png)                                              of SPICE
  [SpiceConstants](Modelica_Electrical_Spice3_Internal.h simulator
  tml#Modelica.Electrical.Spice3.Internal.SpiceConstants 
  )                                                      

  ![image32](Modelica.Electrical.Spice3.Internal.Functio Equations for
  nsS.png)                                               semiconductor
  [Functions](Modelica_Electrical_Spice3_Internal_Functi calculation
  ons.html#Modelica.Electrical.Spice3.Internal.Functions 
  )                                                      

  ![image33](Modelica.Electrical.Spice3.Internal.Functio Basic records and
  nsS.png)                                               functions
  [SpiceRoot](Modelica_Electrical_Spice3_Internal_SpiceR 
  oot.html#Modelica.Electrical.Spice3.Internal.SpiceRoot 
  )                                                      

  ![image34](Modelica.Electrical.Spice3.Internal.Functio Device
  nsS.png)                                               Temperature
  [Model](Modelica_Electrical_Spice3_Internal_Model.html 
  #Modelica.Electrical.Spice3.Internal.Model)            

  ![image35](Modelica.Electrical.Spice3.Internal.Functio Functions and
  nsS.png)                                               records for
  [Mosfet](Modelica_Electrical_Spice3_Internal_Mosfet.ht Mosfets
  ml#Modelica.Electrical.Spice3.Internal.Mosfet)         

  ![image36](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for
  [Mos](Modelica_Electrical_Spice3_Internal_Mos.html#Mod Mosfets level
  elica.Electrical.Spice3.Internal.Mos)                  1,2,3,6

  ![image37](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for
  [Mos1](Modelica_Electrical_Spice3_Internal_Mos1.html#M Mosfets level 1
  odelica.Electrical.Spice3.Internal.Mos1)               

  ![image38](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for
  [Mos2](Modelica_Electrical_Spice3_Internal_Mos2.html#M Mosfets level 2
  odelica.Electrical.Spice3.Internal.Mos2)               

  ![image39](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for
  [Diode](Modelica_Electrical_Spice3_Internal_Diode.html diode model
  #Modelica.Electrical.Spice3.Internal.Diode)            

  ![image40](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for
  [Rsemiconductor](Modelica_Electrical_Spice3_Internal_R semiconductor
  semiconductor.html#Modelica.Electrical.Spice3.Internal resistor model
  .Rsemiconductor)                                       

  ![image41](Modelica.Electrical.Spice3.Internal.Functio Records and
  nsS.png)                                               functions for bjt
  [Bjt3](Modelica_Electrical_Spice3_Internal_Bjt3.html#M model
  odelica.Electrical.Spice3.Internal.Bjt3)               
  ------------------------------------------------------------------------

* * * * *

![image42](Modelica.Electrical.Spice3.Internal.MOSI.png) [Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).MOS
================================================================================================================================================================================

**Metal-Oxide Semiconductor Field-Effect Transistor**

Information
-----------

::

MOSFET model, both N and P channel, LEVEL 1: Shichman-Hodges

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  ------------------------------------------------------------------------
  Type                                 Name Def Description
                                            aul 
                                            t   
  ------------------------------------ ---- --- --------------------------
  Integer                              mtyp     MOSFET type: 0 - N
                                       e        channel, 1 - P channel

  [Length](Modelica_SIunits.html#Model L    1e- Length [m]
  ica.SIunits.Length)                       4   

  [Length](Modelica_SIunits.html#Model W    1e- Width [m]
  ica.SIunits.Length)                       4   

  [Area](Modelica_SIunits.html#Modelic AD   0   Area of the drain
  a.SIunits.Area)                               diffusion [m2]

  [Area](Modelica_SIunits.html#Modelic AS   0   Area of the source
  a.SIunits.Area)                               diffusion [m2]

  [Length](Modelica_SIunits.html#Model PD   0   Perimeter of the drain
  ica.SIunits.Length)                           junction [m]

  [Length](Modelica_SIunits.html#Model PS   0   Perimeter of the source
  ica.SIunits.Length)                           junction [m]

  Real                                 NRD  1   Number of squares of the
                                                drain diffusions

  Real                                 NRS  1   Number of squares of the
                                                source diffusions

  Integer                              OFF  0   Optional initial
                                                condition: 0 - IC not
                                                used, 1 - IC used, not
                                                implemented yet

  [Voltage](Modelica_SIunits.html#Mode IC       Initial condition values,
  lica.SIunits.Voltage)                         not implemented yet [V]

  [Temp\_C](Modelica_SIunits.html#Mode TEMP 27  Operating temperature of
  lica.SIunits.Temp_C)                          the device [degC]

  [ModelcardMOS](Modelica_Electrical_S mode     MOSFET modelcard
  pice3_Internal.html#Modelica.Electri lcar     
  cal.Spice3.Internal.ModelcardMOS)    d        
  ------------------------------------------------------------------------

Connectors
----------

  -------------------------------------------------------------------------
  Type                                                        Name Descript
                                                                   ion
  ----------------------------------------------------------- ---- --------
  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo G    gate
  delica.Electrical.Analog.Interfaces.PositivePin)                 node

  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo D    drain
  delica.Electrical.Analog.Interfaces.PositivePin)                 node

  [NegativePin](Modelica_Electrical_Analog_Interfaces.html#Mo S    source
  delica.Electrical.Analog.Interfaces.NegativePin)                 node

  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo B    bulk
  delica.Electrical.Analog.Interfaces.PositivePin)                 node
  -------------------------------------------------------------------------

Modelica definition
-------------------

    model MOS "Metal-Oxide Semiconductor Field-Effect Transistor"

      Modelica.Electrical.Analog.Interfaces.PositivePin G "gate node";
      Modelica.Electrical.Analog.Interfaces.PositivePin D "drain node";
      Modelica.Electrical.Analog.Interfaces.NegativePin S "source node";
      Modelica.Electrical.Analog.Interfaces.PositivePin B "bulk node";

      parameter Integer mtype(start = 0) 
        "MOSFET type: 0 - N channel, 1 - P channel";
      parameter SI.Length L =  1e-4 "Length";
      parameter SI.Length W =  1e-4 "Width";
      parameter SI.Area AD = 0 "Area of the drain diffusion";
      parameter SI.Area AS = 0 "Area of the source diffusion";
      parameter SI.Length PD =  0 "Perimeter of the drain junction";
      parameter SI.Length PS =  0 "Perimeter of the source junction";
      parameter Real NRD = 1 "Number of squares of the drain diffusions";
      parameter Real NRS = 1 "Number of squares of the source diffusions";
      parameter Integer OFF = 0 
        "Optional initial condition: 0 - IC not used, 1 - IC used, not implemented yet";
      parameter SI.Voltage IC( start = -1e40) 
        "Initial condition values, not implemented yet";
      parameter SI.Temp_C TEMP = 27 "Operating temperature of the device";

      parameter ModelcardMOS modelcard "MOSFET modelcard";
      SpiceConstants C "General constants of SPICE simulator";
      final parameter Mos1.Mos1ModelLineParams p = Mos1.mos1RenameParameters(modelcard, C) 
        "Model line parameters";
      final parameter Mosfet.Mosfet m = Mos1.mos1RenameParametersDev(
        modelcard,
        mtype,
        W,
        L,
        AS,
        AS,
        PD,
        PS,
        NRD,
        NRS,
        OFF,
        IC,
        TEMP) "Renamed parameters";
      final parameter Integer m_type = if (m.m_bPMOS > 0.5) then -1 else 1 
        "Type of the transistor";
      final parameter Mos.MosModelLineVariables vp = Mos1.mos1ModelLineParamsInitEquations(
            p,
            C,
            m_type) "Model line variables";
      final parameter Mos1.Mos1Calc c1 = Mos.mosCalcInitEquations(
            p,
            C,
            vp,
            m) "Precalculated parameters";
      final parameter Mos1.Mos1Calc c2 = Mos.mosCalcCalcTempDependencies(
            p,
            C,
            vp,
            m,
            c1,
            m_type) "Precalculated parameters";

      Mos.CurrrentsCapacitances cc;

      constant Boolean m_bInit = false;

      Real Dinternal;  //internal drain node
      Real Sinternal;  //internal source node
      Real ird;
      Real irs;
      Real ibdgmin;
      Real ibsgmin;

      Real icBD;
      Real icBS;
      Real icGB;
      Real icGS;
      Real icGD;
      SI.Voltage vDS "Drain - source voltage";
      SI.Voltage vGS "Gate - source voltage";

    equation 
      assert( NRD <> 0, "NRD, length of drain in squares, must not be zero");
      assert( NRS <> 0, "NRS, length of source in squares, must not be zero");

      vDS = D.v - S.v;
      vGS = G.v - S.v;

      cc = Mos.mosCalcNoBypassCode(
        m,
        m_type,
        c2,
        p,
        C,
        vp,
        m_bInit,
        {G.v, B.v, Dinternal, Sinternal});

      // drain- and sourceresistances
      // ----------------------------
      ird * c1.m_drainResistance = (D.v - Dinternal);
      irs * p.m_sourceResistance = (S.v - Sinternal);

      // capacitances
      // ------------

       icBD = cc.cBD * (der(B.v) - der(Dinternal));
       icBS = cc.cBS * (der(B.v) - der(Sinternal));
       icGB = cc.cGB * (der(G.v) - der(B.v));
       icGD = cc.cGD * (der(G.v) - der(Dinternal));
       icGS = cc.cGS * (der(G.v) - der(Sinternal));

      // currents
      // --------
       ibsgmin = SpiceConstants.CKTgmin * (B.v - Sinternal);
       ibdgmin = SpiceConstants.CKTgmin * (B.v - Dinternal);
      G.i = icGB + icGD + icGS;
      B.i = cc.iBD + cc.iBS + ibdgmin + ibsgmin - icGB + icBD + icBS;
      D.i = ird;
      S.i = irs;

    //currentsum at inner node
    //------------------------
      0    = -ird + cc.idrain - cc.iBD - ibdgmin - icGD - icBD;
      0    = -irs - cc.idrain - cc.iBS - ibsgmin - icGS - icBS;

    end MOS;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).ModelcardMOS
================================================================================================================================

**Record with technological parameters (.model)**

Information
-----------

::

Modelcard parameters for MOSFET model, both N and P channel, LEVEL 1:
Shichman-Hodges

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  -------------------------------------------------------------------------
  Type                                      Nam Def Description
                                            e   aul 
                                                t   
  ----------------------------------------- --- --- -----------------------
  [Voltage](Modelica_SIunits.html#Modelica. VTO -1e Zero-bias threshold
  SIunits.Voltage)                              40  voltage, default 0 [V]

  [Transconductance](Modelica_SIunits.html# KP  -1e Transconductance
  Modelica.SIunits.Transconductance)            40  parameter, default 2e-5
                                                    [A/V2]

  Real                                      GAM -1e Bulk threshold
                                            MA  40  parameter, default 0

  [Voltage](Modelica_SIunits.html#Modelica. PHI -1e Surface potential,
  SIunits.Voltage)                              40  default 0.6 [V]

  [InversePotential](Modelica_SIunits.html# LAM 0   Channel-length
  Modelica.SIunits.InversePotential)        BDA     modulation, default 0
                                                    [1/V]

  [Resistance](Modelica_SIunits.html#Modeli RD  -1e Drain ohmic resistance,
  ca.SIunits.Resistance)                        40  default 0 [Ohm]

  [Resistance](Modelica_SIunits.html#Modeli RS  -1e Source ohmic
  ca.SIunits.Resistance)                        40  resistance, default 0
                                                    [Ohm]

  [Capacitance](Modelica_SIunits.html#Model CBD -1e Zero-bias B-D junction
  ica.SIunits.Capacitance)                      40  capacitance, default 0
                                                    [F]

  [Capacitance](Modelica_SIunits.html#Model CBS -1e Zero-bias B-S junction
  ica.SIunits.Capacitance)                      40  capacitance, default 0
                                                    [F]

  [Current](Modelica_SIunits.html#Modelica. IS  1.e Bulk junction
  SIunits.Current)                              -14 saturation current [A]

  [Voltage](Modelica_SIunits.html#Modelica. PB  0.8 Bulk junction potential
  SIunits.Voltage)                                  [V]

  [Permittivity](Modelica_SIunits.html#Mode CGS 0.0 Gate-source overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Permittivity](Modelica_SIunits.html#Mode CGD 0.0 Gate-drain overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Permittivity](Modelica_SIunits.html#Mode CGB 0.0 Gate-bulk overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Resistance](Modelica_SIunits.html#Modeli RSH 0.0 Drain and source
  ca.SIunits.Resistance)                            diffusion sheet
                                                    resistance [Ohm]

  [CapacitancePerArea](Modelica_SIunits.htm CJ  0.0 Zero-bias bulk junction
  l#Modelica.SIunits.CapacitancePerArea)            bottom cap. per
                                                    sq-meter of junction
                                                    area [F/m2]

  Real                                      MJ  0.5 Bulk junction bottom
                                                    grading coefficient

  [Permittivity](Modelica_SIunits.html#Mode CJS 0.0 Zero-bias junction
  lica.SIunits.Permittivity)                W       sidewall cap. per meter
                                                    of junction perimeter
                                                    [F/m]

  Real                                      MJS 0.5 Bulk junction sidewall
                                            W       grading coefficient

  [CurrentDensity](Modelica_SIunits.html#Mo JS  0.0 Bulk junction
  delica.SIunits.CurrentDensity)                    saturation current per
                                                    sq-meter of junction
                                                    area [A/m2]

  [Length](Modelica_SIunits.html#Modelica.S TOX -1e Oxide thickness,
  Iunits.Length)                                40  default 1e-7 [m]

  Real                                      NSU -1e Substrate doping,
                                            B   40  default 0

  [PerArea\_cm](Modelica_SIunits_Conversion NSS 0.0 Surface state density
  s_NonSIunits.html#Modelica.SIunits.Conver         [1/cm2]
  sions.NonSIunits.PerArea_cm)                      

  Real                                      TPG 1.0 Type of gate material:
                                                    +1 opp. to substrate,
                                                    -1 same as substrate, 0
                                                    Al gate

  [Length](Modelica_SIunits.html#Modelica.S LD  0.0 Lateral diffusion [m]
  Iunits.Length)                                    

  [Area\_cmPerVoltageSecond](Modelica_SIuni UO  600 Surface mobility
  ts_Conversions_NonSIunits.html#Modelica.S         [cm2/(V.s)]
  Iunits.Conversions.NonSIunits.Area_cmPerV         
  oltageSecond)                                     

  Real                                      KF  0   Flicker noise
                                                    coefficient

  Real                                      AF  1.0 Flicker noise exponent

  Real                                      FC  0.5 Coefficient for
                                                    forward-bias depletion
                                                    capacitance formula

  [Temp\_C](Modelica_SIunits.html#Modelica. TNO -1e Parameter measurement
  SIunits.Temp_C)                           M   40  temperature, default 27
                                                    [degC]
  -------------------------------------------------------------------------

Modelica definition
-------------------

    record ModelcardMOS "Record with technological parameters (.model)"

      parameter SI.Voltage VTO=-1e40 "Zero-bias threshold voltage, default 0";
      parameter SI.Transconductance KP=-1e40 
        "Transconductance parameter, default 2e-5";
      parameter Real GAMMA=-1e40 "Bulk threshold parameter, default 0";
      parameter SI.Voltage PHI=-1e40 "Surface potential, default 0.6";
      parameter SI.InversePotential LAMBDA=0 "Channel-length modulation, default 0";
      parameter SI.Resistance RD=-1e40 "Drain ohmic resistance, default 0";
      parameter SI.Resistance RS=-1e40 "Source ohmic resistance, default 0";
      parameter SI.Capacitance CBD=-1e40 
        "Zero-bias B-D junction capacitance, default 0";
      parameter SI.Capacitance CBS=-1e40 
        "Zero-bias B-S junction capacitance, default 0";
      parameter SI.Current IS=1.e-14 "Bulk junction saturation current";
      parameter SI.Voltage PB=0.8 "Bulk junction potential";
      parameter SI.Permittivity CGSO=0.0 
        "Gate-source overlap capacitance per meter channel width";
      parameter SI.Permittivity CGDO=0.0 
        "Gate-drain overlap capacitance per meter channel width";
      parameter SI.Permittivity CGBO=0.0 
        "Gate-bulk overlap capacitance per meter channel width";
      parameter SI.Resistance RSH=0.0 "Drain and source diffusion sheet resistance";
      parameter SI.CapacitancePerArea CJ=0.0 
        "Zero-bias bulk junction bottom cap. per sq-meter of junction area";
      parameter Real MJ=0.5 "Bulk junction bottom grading coefficient";
      parameter SI.Permittivity CJSW=0.0 
        "Zero-bias junction sidewall cap. per meter of junction perimeter";
      parameter Real MJSW=0.5 "Bulk junction sidewall grading coefficient";
      parameter SI.CurrentDensity JS=0.0 
        "Bulk junction saturation current per sq-meter of junction area";
      parameter SI.Length TOX=-1e40 "Oxide thickness, default 1e-7";
      parameter Real NSUB=-1e40 "Substrate doping, default 0";
      parameter SI.Conversions.NonSIunits.PerArea_cm NSS=0.0 
        "Surface state density";
      parameter Real TPG=1.0 
        "Type of gate material: +1 opp. to substrate, -1 same as substrate, 0 Al gate";
      parameter SI.Length LD=0.0 "Lateral diffusion";
      parameter SI.Conversions.NonSIunits.Area_cmPerVoltageSecond UO=600 
        "Surface mobility";
      parameter Real KF=0 "Flicker noise coefficient";
      parameter Real AF=1.0 "Flicker noise exponent";
      parameter Real FC=0.5 
        "Coefficient for forward-bias depletion capacitance formula";
      parameter SI.Temp_C TNOM=-1e40 
        "Parameter measurement temperature, default 27";
      constant Integer LEVEL=1 "Model level: Shichman-Hodges";
    equation 

    end ModelcardMOS;

* * * * *

![image43](Modelica.Electrical.Spice3.Internal.MOS2I.png) [Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).MOS2
==================================================================================================================================================================================

**Metal-Oxide Semiconductor Field-Effect Transistor**

Information
-----------

::

MOSFET model, both N and P channel, LEVEL 2

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  -------------------------------------------------------------------------
  Type                                  Name Def Description
                                             aul 
                                             t   
  ------------------------------------- ---- --- --------------------------
  Integer                               mtyp     MOSFET type: 0 - N
                                        e        channel, 1 - P channel

  [Length](Modelica_SIunits.html#Modeli L    1e- Length [m]
  ca.SIunits.Length)                         4   

  [Length](Modelica_SIunits.html#Modeli W    1e- Width [m]
  ca.SIunits.Length)                         4   

  [Area](Modelica_SIunits.html#Modelica AD   0   Area of the drain
  .SIunits.Area)                                 diffusion [m2]

  [Area](Modelica_SIunits.html#Modelica AS   0   Area of the source
  .SIunits.Area)                                 diffusion [m2]

  [Length](Modelica_SIunits.html#Modeli PD   0   Perimeter of the drain
  ca.SIunits.Length)                             junction [m]

  [Length](Modelica_SIunits.html#Modeli PS   0   Perimeter of the source
  ca.SIunits.Length)                             junction [m]

  Real                                  NRD  1   Number of squares of the
                                                 drain diffusions

  Real                                  NRS  1   Number of squares of the
                                                 source diffusions

  Integer                               OFF  0   Optional initial
                                                 condition: 0 - IC not
                                                 used, 1 - IC used, not
                                                 implemented yet

  [Voltage](Modelica_SIunits.html#Model IC       Initial condition values,
  ica.SIunits.Voltage)                           not implemented yet [V]

  Real                                  TEMP 27  Operating temperature of
                                                 the device

  [ModelcardMOS2](Modelica_Electrical_S mode     MOSFET modelcard
  pice3_Internal.html#Modelica.Electric lcar     
  al.Spice3.Internal.ModelcardMOS2)     d        

  [SpiceConstants](Modelica_Electrical_ C        General constants of SPICE
  Spice3_Internal.html#Modelica.Electri          simulator
  cal.Spice3.Internal.SpiceConstants)            
  -------------------------------------------------------------------------

Connectors
----------

  -------------------------------------------------------------------------
  Type                                                        Name Descript
                                                                   ion
  ----------------------------------------------------------- ---- --------
  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo G    gate
  delica.Electrical.Analog.Interfaces.PositivePin)                 node

  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo D    drain
  delica.Electrical.Analog.Interfaces.PositivePin)                 node

  [NegativePin](Modelica_Electrical_Analog_Interfaces.html#Mo S    source
  delica.Electrical.Analog.Interfaces.NegativePin)                 node

  [PositivePin](Modelica_Electrical_Analog_Interfaces.html#Mo B    bulk
  delica.Electrical.Analog.Interfaces.PositivePin)                 node
  -------------------------------------------------------------------------

Modelica definition
-------------------

    model MOS2 "Metal-Oxide Semiconductor Field-Effect Transistor"

      Modelica.Electrical.Analog.Interfaces.PositivePin G "gate node";
      Modelica.Electrical.Analog.Interfaces.PositivePin D "drain node";
      Modelica.Electrical.Analog.Interfaces.NegativePin S "source node";
      Modelica.Electrical.Analog.Interfaces.PositivePin B "bulk node";

      parameter Integer mtype(start = 0) 
        "MOSFET type: 0 - N channel, 1 - P channel";
      parameter SI.Length L = 1e-4 "Length";
      parameter SI.Length W = 1e-4 "Width";
      parameter SI.Area AD = 0 "Area of the drain diffusion";
      parameter SI.Area AS = 0 "Area of the source diffusion";
      parameter SI.Length PD = 0 "Perimeter of the drain junction";
      parameter SI.Length PS = 0 "Perimeter of the source junction";
      parameter Real NRD = 1 "Number of squares of the drain diffusions";
      parameter Real NRS = 1 "Number of squares of the source diffusions";
      parameter Integer OFF = 0 
        "Optional initial condition: 0 - IC not used, 1 - IC used, not implemented yet";
      parameter SI.Voltage IC( start = -1e40) 
        "Initial condition values, not implemented yet";
      parameter Real TEMP = 27 "Operating temperature of the device";

      Real MOScapgd = qm.qm_capgd;
      Real MOScapgs = qm.qm_capgs;
      Real MOScapgb = qm.qm_capgb;

      parameter ModelcardMOS2 modelcard "MOSFET modelcard";
      constant SpiceConstants C "General constants of SPICE simulator";
      final parameter Mos2.Mos2ModelLineParams p=Mos2.mos2RenameParameters(
            modelcard, C) "Model line parameters";
      final parameter Mosfet.Mosfet m=Mos2.mos2RenameParametersDev(
              modelcard,
              mtype,
              W,
              L,
              AD,
              AS,
              PD,
              PS,
              NRD,
              NRS,
              OFF,
              IC,
              TEMP) "Renamed parameters";
      final parameter Integer m_type = if (m.m_bPMOS > 0.5) then -1 else 1 
        "Type of the transistor";
      final parameter Mos2.Mos2ModelLineVariables vp=
            Mos2.mos2ModelLineParamsInitEquations(
              p,
              C,
              m_type) "Model line variables";
      final parameter Mos2.Mos2Calc c1=Mos.mos2CalcInitEquations(
              p,
              C,
              vp,
              m) "Precalculated parameters";
      final parameter Mos2.Mos2Calc c2=Mos.mos2CalcCalcTempDependencies(
              p,
              C,
              vp,
              m,
              c1,
              m_type) "Precalculated parameters";
      Mos.DEVqmeyer qm;
      Mos.CurrrentsCapacitances cc;

      constant Boolean m_bInit = false;

      Real Dinternal;
      Real Sinternal;
      Real ird;
      Real irs;
      Real ibdgmin;
      Real ibsgmin;

      Real icBD;
      Real icBS;
      Real icGB;
      Real icGS;
      Real icGD;

      Real icqmGB;
      Real icqmGS;
      Real icqmGD;
      SI.Voltage vDS "Drain - source voltage";
      SI.Voltage vGS "Gate - source voltage";

    equation 
      assert( NRD <> 0, "NRD, length of drain in squares, must not be zero");
      assert( NRS <> 0, "NRS, length of source in squares, must not be zero");

      vDS = D.v - S.v;
      vGS = G.v - S.v;

        (cc,qm) = Mos.mos2CalcNoBypassCode(
            m,
            m_type,
            c2,
            p,
            C,
            vp,
            m_bInit,
            {G.v,B.v,Dinternal,Sinternal});

      // drain- and sourceresistances
      // ----------------------------
      ird * c1.m_drainResistance  = (D.v - Dinternal);
      irs * p.m_sourceResistance =  (S.v - Sinternal);

      // capacitances
      // ------------

      icBD = cc.cBD * (der(B.v) - der(Dinternal));
      icBS = cc.cBS * (der(B.v) - der(Sinternal));
      icGB = cc.cGB * (der(G.v) - der(B.v));
      icGD = cc.cGD * (der(G.v) - der(Dinternal));
      icGS = cc.cGS * (der(G.v) - der(Sinternal));

      icqmGB = qm.qm_capgb*(der(G.v) - der(B.v));
      icqmGS = qm.qm_capgs*(der(G.v) - der(Sinternal));
      icqmGD = qm.qm_capgd*(der(G.v) - der(Dinternal));

      // currents
      // --------
        ibsgmin = SpiceConstants.CKTgmin*(B.v - Sinternal);
        ibdgmin = SpiceConstants.CKTgmin*(B.v - Dinternal);
      G.i =  icGB + icGD + icGS + icqmGB + icqmGD + icqmGS;
      B.i = cc.iBD + cc.iBS+ ibdgmin + ibsgmin -icGB + icBD + icBS - icqmGB;
      D.i = ird;
      S.i = irs;

    //currentsum at inner node
    //------------------------
      0    = -ird + cc.idrain - cc.iBD - ibdgmin - icGD - icBD  - icqmGD;
      0    = -irs - cc.idrain - cc.iBS - ibsgmin - icGS - icBS  - icqmGS;

    end MOS2;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).ModelcardMOS2
=================================================================================================================================

**Record with technological parameters (.model)**

Information
-----------

::

Modelcard parameters for MOSFET model, both N and P channel, LEVEL 2

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Extends from
[ModelcardMOS](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardMOS)
(Record with technological parameters (.model)).

Parameters
----------

  -------------------------------------------------------------------------
  Type                                      Nam Def Description
                                            e   aul 
                                                t   
  ----------------------------------------- --- --- -----------------------
  [Voltage](Modelica_SIunits.html#Modelica. VTO -1e Zero-bias threshold
  SIunits.Voltage)                              40  voltage, default 0 [V]

  [Transconductance](Modelica_SIunits.html# KP  -1e Transconductance
  Modelica.SIunits.Transconductance)            40  parameter, default 2e-5
                                                    [A/V2]

  Real                                      GAM -1e Bulk threshold
                                            MA  40  parameter, default 0

  [Voltage](Modelica_SIunits.html#Modelica. PHI -1e Surface potential,
  SIunits.Voltage)                              40  default 0.6 [V]

  [InversePotential](Modelica_SIunits.html# LAM 0   Channel-length
  Modelica.SIunits.InversePotential)        BDA     modulation, default 0
                                                    [1/V]

  [Resistance](Modelica_SIunits.html#Modeli RD  -1e Drain ohmic resistance,
  ca.SIunits.Resistance)                        40  default 0 [Ohm]

  [Resistance](Modelica_SIunits.html#Modeli RS  -1e Source ohmic
  ca.SIunits.Resistance)                        40  resistance, default 0
                                                    [Ohm]

  [Capacitance](Modelica_SIunits.html#Model CBD -1e Zero-bias B-D junction
  ica.SIunits.Capacitance)                      40  capacitance, default 0
                                                    [F]

  [Capacitance](Modelica_SIunits.html#Model CBS -1e Zero-bias B-S junction
  ica.SIunits.Capacitance)                      40  capacitance, default 0
                                                    [F]

  [Current](Modelica_SIunits.html#Modelica. IS  1.e Bulk junction
  SIunits.Current)                              -14 saturation current [A]

  [Voltage](Modelica_SIunits.html#Modelica. PB  0.8 Bulk junction potential
  SIunits.Voltage)                                  [V]

  [Permittivity](Modelica_SIunits.html#Mode CGS 0.0 Gate-source overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Permittivity](Modelica_SIunits.html#Mode CGD 0.0 Gate-drain overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Permittivity](Modelica_SIunits.html#Mode CGB 0.0 Gate-bulk overlap
  lica.SIunits.Permittivity)                O       capacitance per meter
                                                    channel width [F/m]

  [Resistance](Modelica_SIunits.html#Modeli RSH 0.0 Drain and source
  ca.SIunits.Resistance)                            diffusion sheet
                                                    resistance [Ohm]

  [CapacitancePerArea](Modelica_SIunits.htm CJ  0.0 Zero-bias bulk junction
  l#Modelica.SIunits.CapacitancePerArea)            bottom cap. per
                                                    sq-meter of junction
                                                    area [F/m2]

  Real                                      MJ  0.5 Bulk junction bottom
                                                    grading coefficient

  [Permittivity](Modelica_SIunits.html#Mode CJS 0.0 Zero-bias junction
  lica.SIunits.Permittivity)                W       sidewall cap. per meter
                                                    of junction perimeter
                                                    [F/m]

  Real                                      MJS 0.3 Bulk junction sidewall
                                            W   3   grading coefficient

  [CurrentDensity](Modelica_SIunits.html#Mo JS  0.0 Bulk junction
  delica.SIunits.CurrentDensity)                    saturation current per
                                                    sq-meter of junction
                                                    area [A/m2]

  [Length](Modelica_SIunits.html#Modelica.S TOX -1e Oxide thickness,
  Iunits.Length)                                40  default 1e-7 [m]

  Real                                      NSU -1e Substrate doping,
                                            B   40  default 0

  [PerArea\_cm](Modelica_SIunits_Conversion NSS 0.0 Surface state density
  s_NonSIunits.html#Modelica.SIunits.Conver         [1/cm2]
  sions.NonSIunits.PerArea_cm)                      

  Real                                      TPG 1.0 Type of gate material:
                                                    +1 opp. to substrate,
                                                    -1 same as substrate, 0
                                                    Al gate

  [Length](Modelica_SIunits.html#Modelica.S LD  0.0 Lateral diffusion [m]
  Iunits.Length)                                    

  [Area\_cmPerVoltageSecond](Modelica_SIuni UO  600 Surface mobility
  ts_Conversions_NonSIunits.html#Modelica.S         [cm2/(V.s)]
  Iunits.Conversions.NonSIunits.Area_cmPerV         
  oltageSecond)                                     

  Real                                      KF  0   Flicker noise
                                                    coefficient

  Real                                      AF  1.0 Flicker noise exponent

  Real                                      FC  0.5 Coefficient for
                                                    forward-bias depletion
                                                    capacitance formula

  [Temp\_C](Modelica_SIunits.html#Modelica. TNO -1e Parameter measurement
  SIunits.Temp_C)                           M   40  temperature, default 27
                                                    [degC]

  Real                                      NFS 0.0 Fast surface state
                                                    density

  Real                                      XJ  0.0 Metallurgiecal junction
                                                    depth

  Real                                      UCR 1.e Critical field for
                                            IT  4   mobility degradation
                                                    (MOS2 only)

  Real                                      UEX 0.0 Critical field exponent
                                            P       in mobility degradation
                                                    (MOS2 only)

  Real                                      VMA 0.0 Maximum drift velocity
                                            X       of carries

  Real                                      NEF 1.0 Total channel charge
                                            F       (fixed and mobile)
                                                    coefficient (MOS2 only)

  Real                                      DEL 0.0 Width effect on
                                            TA      theshold voltage
  -------------------------------------------------------------------------

Modelica definition
-------------------

    record ModelcardMOS2 "Record with technological parameters (.model)"
    extends ModelcardMOS(MJSW=0.33);

      parameter Real NFS=0.0 "Fast surface state density";
      parameter Real XJ=0.0 "Metallurgiecal junction depth";
      parameter Real UCRIT=1.e4 
        "Critical field for mobility degradation (MOS2 only)";
      parameter Real UEXP=0.0 
        "Critical field exponent in mobility degradation (MOS2 only)";
      parameter Real VMAX=0.0 "Maximum drift velocity of carries";
      parameter Real NEFF=1.0 
        "Total channel charge (fixed and mobile) coefficient (MOS2 only)";
      parameter Real DELTA=0.0 "Width effect on theshold voltage";

    end ModelcardMOS2;

* * * * *

![image44](Modelica.Electrical.Spice3.Internal.BJTI.png) [Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).BJT
================================================================================================================================================================================

**Bipolar junction transistor**

Information
-----------

::

Bibpolar junction transistor model

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  -------------------------------------------------------------------------
  Type                                 Name Def Description
                                            aul 
                                            t   
  ------------------------------------ ---- --- ---------------------------
  Real                                 TBJT     Type of transistor (NPN=1,
                                                PNP=-1)

  Real                                 AREA 1.0 Area factor

  Boolean                              OFF  fal Optional initial condition:
                                            se  false - IC not used, true -
                                                IC used, not implemented
                                                yet

  [Voltage](Modelica_SIunits.html#Mode IC\_     Initial condition value
  lica.SIunits.Voltage)                VCE      (VBE, not implemented yet
                                                [V]

  [Voltage](Modelica_SIunits.html#Mode IC\_     Initial condition value
  lica.SIunits.Voltage)                VBE      (VBC, not implemented yet
                                                [V]

  [Temp\_C](Modelica_SIunits.html#Mode TEMP 27  Operating temperature of
  lica.SIunits.Temp_C)                          the device [degC]

  Boolean                              SENS fal Flag to request sensitivity
                                       \_AR se  WRT area, not implemented
                                       EA       yet

  [ModelcardBJT](Modelica_Electrical_S mode     BJT modelcard
  pice3_Internal.html#Modelica.Electri lcar     
  cal.Spice3.Internal.ModelcardBJT)    d        

  [SpiceConstants](Modelica_Electrical Con      General constants of SPICE
  _Spice3_Internal.html#Modelica.Elect          simulator
  rical.Spice3.Internal.SpiceConstants          
  )                                             
  -------------------------------------------------------------------------

Connectors
----------

  ------------------------------------------------------------------------
  Type                                                      Name Descripti
                                                                 on
  --------------------------------------------------------- ---- ---------
  [PositivePin](Modelica_Electrical_Analog_Interfaces.html# B    Base node
  Modelica.Electrical.Analog.Interfaces.PositivePin)             

  [PositivePin](Modelica_Electrical_Analog_Interfaces.html# C    Collector
  Modelica.Electrical.Analog.Interfaces.PositivePin)             node

  [NegativePin](Modelica_Electrical_Analog_Interfaces.html# E    Emitter
  Modelica.Electrical.Analog.Interfaces.NegativePin)             node
  ------------------------------------------------------------------------

Modelica definition
-------------------

    model BJT "Bipolar junction transistor"

      Modelica.Electrical.Analog.Interfaces.PositivePin B "Base node";
      Modelica.Electrical.Analog.Interfaces.PositivePin C "Collector node";
      Modelica.Electrical.Analog.Interfaces.NegativePin E "Emitter node";

      parameter Real TBJT( start = 1) "Type of transistor (NPN=1, PNP=-1)";
      parameter Real AREA = 1.0 "Area factor";
      parameter Boolean OFF = false 
        "Optional initial condition: false - IC not used, true - IC used, not implemented yet";
      parameter SI.Voltage IC_VCE( start = -1e40) 
        "Initial condition value (VBE, not implemented yet";
      parameter SI.Voltage IC_VBE( start = -1e40) 
        "Initial condition value (VBC, not implemented yet";
      parameter SI.Temp_C TEMP = 27 "Operating temperature of the device";
      parameter Boolean SENS_AREA = false 
        "Flag to request sensitivity WRT area, not implemented yet";

      parameter ModelcardBJT modelcard "BJT modelcard";

      final parameter Bjt3.BjtModelLineParams p=Bjt3.bjtRenameParameters(modelcard,
          Con) "Model line parameters";
      constant SpiceConstants Con "General constants of SPICE simulator";
      final parameter Bjt3.Bjt p1=Bjt3.bjtRenameParametersDev(
              AREA,
              OFF,
              IC_VBE,
              IC_VCE,
              SENS_AREA) "Renamed parameters";
      final parameter Model.Model m=Bjt3.bjtRenameParametersDevTemp(TEMP) 
        "Renamed parameters";
      final parameter Bjt3.BjtModelLineParams p2=Bjt3.bjtRenameParametersType(TBJT);
      final parameter Bjt3.BjtModelLineVariables vl=
          Bjt3.bjtModelLineInitEquations(p) "Model line variables";
      final parameter Bjt3.Bjt3Calc c=Bjt3.bjt3CalcTempDependencies(
              p1,
              p,
              m,
              vl) "Precalculated parameters";
      final parameter Bjt3.BjtVariables v=Bjt3.bjtInitEquations(
              p1,
              p,
              vl) "Precalculated parameters";

      constant Boolean m_bInit = false;
      Bjt3.CurrentsCapacitances cc;
      Real Cinternal;    //inner collector node
      Real Binternal;    //inner base node
      Real Einternal;    //inner emitter node
      Real irc;
      Real ire;
      Real irb;
      Real ibcgmin;
      Real ibegmin;
      Real capbe;
      Real icapbe;
      Real capbc;
      Real icapbc;
      Real capbx;
      Real icapbx;
      SI.Voltage vBE "Base - emitter voltage";
      SI.Voltage vCE "Collector - emitter voltage";
      SI.Voltage vBC "Base - collector voltage";

    equation 
      vBE = B.v - E.v;
      vCE = C.v - E.v;
      vBC = B.v - C.v;

       (cc,capbe,capbc,capbx) = Bjt3.bjtNoBypassCode(
             m,
             p1,
             p,
             c,
             v,
             vl,
             {C.v,B.v,E.v,Cinternal,Binternal,Einternal},
             m_bInit);

          //currents through capacitances
         icapbe = if (m_bInit) then 0.0 else capbe*(der(Binternal) - der(Einternal));
         icapbc = if (m_bInit) then 0.0 else capbc*(der(Binternal) - der(Cinternal));
         icapbx = if (m_bInit) then 0.0 else capbx*(der(B.v) - der(Cinternal));
         //Resistances
         irc * p.m_collectorResist = (C.v - Cinternal);
         ire * p.m_emitterResist = (E.v -Einternal);
         irb * p.m_baseResist = (B.v - Binternal);

        //currents
        ibcgmin = SpiceConstants.CKTgmin * (Binternal - Cinternal);
        ibegmin = SpiceConstants.CKTgmin * (Binternal - Einternal);
        C.i = irc;
        E.i = ire;
        B.i = irb + icapbx;
        //current sum at inner nodes
        0 =  ibcgmin + irc -cc.iCC + cc.iBCN + cc.iBC + icapbc + icapbx;  //current sum for inner node Cinternal
        0 =  ibegmin + ire + cc.iCC + cc.iBEN + cc.iBE + icapbe;          //current sum for inner node Einternal
        0 = - ibcgmin - ibegmin + irb - cc.iBC - cc.iBE - cc.iBCN - cc.iBEN -icapbc - icapbe; //current sum for inner node Binternal

    end BJT;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).ModelcardBJT
================================================================================================================================

**Record with technological parameters (.model)**

Information
-----------

::

Modelcard parameters for BJT model, both PNP and NPN

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  -------------------------------------------------------------------------
  Type                               Name Defau Description
                                          lt    
  ---------------------------------- ---- ----- ---------------------------
  [Temp\_C](Modelica_SIunits.html#Mo TNOM -1e40 Parameter measurement
  delica.SIunits.Temp_C)                        temperature, default 27
                                                [degC]

  [Current](Modelica_SIunits.html#Mo IS   1e-16 Transport saturation
  delica.SIunits.Current)                       current [A]

  Real                               BF   100.0 Ideal maximum forward beta
                                          0     F

  Real                               NF   1.0   Forward current emission
                                                coefficientF

  Real                               NE   1.5   B-E leakage emission
                                                coefficient

  [Current](Modelica_SIunits.html#Mo ISE  -1e40 B-E leakage saturation
  delica.SIunits.Current)                       current, default = 0 [A]

  [Current](Modelica_SIunits.html#Mo ISC  -1e40 B-C leakage saturation
  delica.SIunits.Current)                       current, default = 0 [A]

  Real                               BR   1.0   Ideal maximum reverse beta

  Real                               NR   1.0   Reverse current emission
                                                coefficient

  Real                               NC   2.0   B-C leakage emission
                                                coefficient

  [Voltage](Modelica_SIunits.html#Mo VAF  0.0   Forward Early voltage [V]
  delica.SIunits.Voltage)                       

  [Current](Modelica_SIunits.html#Mo IKF  0.0   Forward beta roll-off
  delica.SIunits.Current)                       corner current [A]

  [Voltage](Modelica_SIunits.html#Mo VAR  0.0   Reverse Early voltage [V]
  delica.SIunits.Voltage)                       

  [Current](Modelica_SIunits.html#Mo IKR  0.0   Reverse beta roll-off
  delica.SIunits.Current)                       corner current [A]

  [Resistance](Modelica_SIunits.html RE   0.0   Emitter resistance [Ohm]
  #Modelica.SIunits.Resistance)                 

  [Resistance](Modelica_SIunits.html RC   0.0   Collector resistance [Ohm]
  #Modelica.SIunits.Resistance)                 

  [Current](Modelica_SIunits.html#Mo IRB  0.0   Current for base resistance
  delica.SIunits.Current)                       = (rb+rbm)/2 [A]

  [Resistance](Modelica_SIunits.html RB   0.0   Zero bias base resistance
  #Modelica.SIunits.Resistance)                 [Ohm]

  [Resistance](Modelica_SIunits.html RBM  -1e40 Minimum base resistance,
  #Modelica.SIunits.Resistance)                 default = 0.0 [Ohm]

  [Capacitance](Modelica_SIunits.htm CJE  0.0   Zero bias B-E depletion
  l#Modelica.SIunits.Capacitance)               capacitance [F]

  [Voltage](Modelica_SIunits.html#Mo VJE  0.75  B-E built in potential [V]
  delica.SIunits.Voltage)                       

  Real                               MJE  0.33  B-E junction exponential
                                                faktor

  [Time](Modelica_SIunits.html#Model TF   0.0   Ideal forward transit time
  ica.SIunits.Time)                             [s]

  Real                               XTF  0.0   Coefficient for bias
                                                dependence of TF

  [Current](Modelica_SIunits.html#Mo ITF  0.0   High current dependence of
  delica.SIunits.Current)                       TF, [A]

  [Voltage](Modelica_SIunits.html#Mo VTF  0.0   Voltage giving VBC
  delica.SIunits.Voltage)                       dependence of TF [V]

  [Temp\_C](Modelica_SIunits.html#Mo PTF  0.0   Excess phase at
  delica.SIunits.Temp_C)                        freq=1/(TF\*2\*Pi) Hz
                                                [degC]

  [Capacitance](Modelica_SIunits.htm CJC  0.0   Zero bias B-C depletion
  l#Modelica.SIunits.Capacitance)               capacitance [F]

  [Voltage](Modelica_SIunits.html#Mo VJC  0.75  B-C built in potential [V]
  delica.SIunits.Voltage)                       

  Real                               MJC  0.33  B-C junction grading
                                                coefficient

  Real                               XCJC 1.0   Fraction of B-C cap to
                                                internal base

  [Time](Modelica_SIunits.html#Model TR   0.0   Ideal reverse transit time
  ica.SIunits.Time)                             [s]

  [Capacitance](Modelica_SIunits.htm CJS  0.0   Zero bias C-S capacitance
  l#Modelica.SIunits.Capacitance)               [F]

  [Voltage](Modelica_SIunits.html#Mo VJS  0.75  Substrate junction built-in
  delica.SIunits.Voltage)                       potential [V]

  Real                               MJS  0.0   Substrate junction grading
                                                coefficient

  Real                               XTB  0.0   Forward and reverse beta
                                                temperature exponent

  [GapEnergy](Modelica_SIunits.html# EG   1.11  Energy gap for IS
  Modelica.SIunits.GapEnergy)                   temperature effect on IS
                                                [eV]

  Real                               XTI  3.0   Temperature exponent for IS

  Real                               KF   0.0   Flicker Noise Coefficient

  Real                               AF   1.0   Flicker Noise Exponent

  Real                               FC   0.5   Forward bias junction fit
                                                parameter
  -------------------------------------------------------------------------

Modelica definition
-------------------

    record ModelcardBJT "Record with technological parameters (.model)"

      parameter SI.Temp_C TNOM = -1e40 
        "Parameter measurement temperature, default 27";
      parameter SI.Current IS = 1e-16 "Transport saturation current";
      parameter Real BF = 100.00 "Ideal maximum forward beta F";
      parameter Real NF = 1.0 "Forward current emission coefficientF";
      parameter Real NE = 1.5 "B-E leakage emission coefficient ";
      parameter SI.Current ISE = -1e40 
        "B-E leakage saturation current, default = 0";
      constant Real C2 =  -1e40 "Obsolete parameter name, default = 0";
      parameter SI.Current ISC = -1e40 
        "B-C leakage saturation current, default = 0";
      constant Real C4 =   -1e40 "Obsolete parameter name, default = 0";
      parameter Real BR = 1.0 "Ideal maximum reverse beta";
      parameter Real NR = 1.0 "Reverse current emission coefficient ";
      parameter Real NC = 2.0 "B-C leakage emission coefficient";
      parameter SI.Voltage VAF = 0.0 "Forward Early voltage";
      parameter SI.Current IKF = 0.0 "Forward beta roll-off corner current";
      parameter SI.Voltage VAR = 0.0 "Reverse Early voltage";
      parameter SI.Current IKR = 0.0 "Reverse beta roll-off corner current";
      parameter SI.Resistance RE = 0.0 "Emitter resistance";
      parameter SI.Resistance RC = 0.0 "Collector resistance";
      parameter SI.Current IRB = 0.0 "Current for base resistance = (rb+rbm)/2";
      parameter SI.Resistance RB = 0.0 "Zero bias base resistance";
      parameter SI.Resistance RBM = -1e40 "Minimum base resistance, default = 0.0";
      parameter SI.Capacitance CJE = 0.0 "Zero bias B-E depletion capacitance";
      parameter SI.Voltage VJE = 0.75 "B-E built in potential";
      parameter Real MJE = 0.33 "B-E junction exponential faktor";
      parameter SI.Time TF = 0.0 "Ideal forward transit time";
      parameter Real XTF = 0.0 "Coefficient for bias dependence of TF ";
      parameter SI.Current ITF = 0.0 "High current dependence of TF,";
      parameter SI.Voltage VTF = 0.0 "Voltage giving VBC dependence of TF";
      parameter SI.Temp_C PTF = 0.0 "Excess phase at freq=1/(TF*2*Pi) Hz";
      parameter SI.Capacitance CJC = 0.0 "Zero bias B-C depletion capacitance";
      parameter SI.Voltage VJC = 0.75 " B-C built in potential";
      parameter Real MJC = 0.33 "B-C junction grading coefficient";
      parameter Real XCJC = 1.0 "Fraction of B-C cap to internal base";
      parameter SI.Time TR = 0.0 "Ideal reverse transit time";
      parameter SI.Capacitance CJS = 0.0 "Zero bias C-S capacitance ";
      parameter SI.Voltage VJS = 0.75 "Substrate junction built-in potential ";
      parameter Real MJS = 0.0 "Substrate junction grading coefficient ";
      parameter Real XTB = 0.0 "Forward and reverse beta temperature exponent ";
      parameter SI.GapEnergy EG = 1.11 
        "Energy gap for IS temperature effect on IS ";
      parameter Real XTI = 3.0 "Temperature exponent for IS";
      parameter Real KF = 0.0 "Flicker Noise Coefficient ";
      parameter Real AF = 1.0 "Flicker Noise Exponent ";
      parameter Real FC = 0.5 "Forward bias junction fit parameter";

    end ModelcardBJT;

* * * * *

![image45](Modelica.Electrical.Spice3.Internal.DIODEI.png) [Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).DIODE
====================================================================================================================================================================================

**Diode model**

Information
-----------

::

DIODE model

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Extends from
[Modelica.Electrical.Analog.Interfaces.TwoPin](Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.TwoPin)
(Component with two electrical pins).

Parameters
----------

  -------------------------------------------------------------------------
  Type                                Name  Def Description
                                            aul 
                                            t   
  ----------------------------------- ----- --- ---------------------------
  Real                                AREA  1   Area factor

  Boolean                             OFF   fal Optional initial condition:
                                            se  false - IC not used, true -
                                                IC used, not implemented
                                                yet

  [Voltage](Modelica_SIunits.html#Mod IC        Initial condition value
  elica.SIunits.Voltage)                        (VD, not implemented yet
                                                [V]

  [Temp\_C](Modelica_SIunits.html#Mod TEMP  27  Operating temperature of
  elica.SIunits.Temp_C)                         the device [degC]

  Boolean                             SENS\     Flag to request sensitivity
                                      _AREA     WRT area, not implemented
                                                yet

  [ModelcardDIODE](Modelica_Electrica model     DIODE modelcard
  l_Spice3_Internal.html#Modelica.Ele cardd     
  ctrical.Spice3.Internal.ModelcardDI iode      
  ODE)                                          
  -------------------------------------------------------------------------

Connectors
----------

  -------------------------------------------------------------------------
  Type                                     Nam Description
                                           e   
  ---------------------------------------- --- ----------------------------
  [PositivePin](Modelica_Electrical_Analog p   Positive pin Positive pin
  _Interfaces.html#Modelica.Electrical.Ana     (potential p.v \> n.v for
  log.Interfaces.PositivePin)                  positive voltage drop v)

  [NegativePin](Modelica_Electrical_Analog n   Negative pin
  _Interfaces.html#Modelica.Electrical.Ana     
  log.Interfaces.NegativePin)                  
  -------------------------------------------------------------------------

Modelica definition
-------------------

    model DIODE "Diode model"

      extends Modelica.Electrical.Analog.Interfaces.TwoPin;

      parameter Real AREA = 1 "Area factor";
      parameter Boolean OFF = false 
        "Optional initial condition: false - IC not used, true - IC used, not implemented yet";
      parameter SI.Voltage IC( start = -1e40) 
        "Initial condition value (VD, not implemented yet";
      parameter SI.Temp_C TEMP = 27 "Operating temperature of the device";
      parameter Boolean SENS_AREA( start = false) 
        "Flag to request sensitivity WRT area, not implemented yet";

      parameter ModelcardDIODE modelcarddiode "DIODE modelcard";
      SpiceConstants C "General constants of SPICE simulator";
      final parameter Diode.DiodeModelLineParams param=
           Diode.diodeRenameParameters(modelcarddiode, C) "Model line parameters";
      final parameter Diode.DiodeParams dp=Diode.diodeRenameParametersDev(
              TEMP,
              AREA,
              IC,
              OFF,
              SENS_AREA) "Renamed parameters";
      final parameter Model.Model m=Diode.diodeRenameParametersDevTemp(TEMP) 
        "Renamed parameters";
      final parameter Diode.DiodeVariables c1=Diode.diodeInitEquations(param) 
        "Precalculated values";
      final parameter Diode.DiodeCalc c2=Diode.diodeCalcTempDependencies(
              param,
              dp,
              m,
              c1) "Precalculated values";
      constant Boolean m_mbInit = false;

      Diode.CurrentsCapacitances cc;
      Real icap;
      Real m_dCap;
      Real pin;
      Real ir;
      Real igmin;

    equation 
       (cc,m_dCap) = Diode.diodeNoBypassCode(
            param,
            dp,
            c2,
            m,
            m_mbInit,
            {pin,n.v});

      //current through capacitance
      icap = if (m_mbInit) then 0.0 else m_dCap*(der(pin)-der(n.v));
      //resistance
        ir*param.m_resist = (p.v - pin);

      //gmin
       igmin = SpiceConstants.CKTgmin*(pin - n.v);

      p.i =  ir;
      n.i =  -(cc.m_dCurrent +igmin) -icap;

    //currentsum at inner node
      0 =  -ir + cc.m_dCurrent + igmin +icap;

    end DIODE;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).ModelcardDIODE
==================================================================================================================================

**Record with technological parameters (.model)**

Information
-----------

::

Modelcard parameters for DIODE model

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  --------------------------------------------------------------------------
  Type                                   Name Defau Description
                                              lt    
  -------------------------------------- ---- ----- ------------------------
  [Current](Modelica_SIunits.html#Modeli IS   1e-14 Saturation Current [A]
  ca.SIunits.Current)                               

  [Resistance](Modelica_SIunits.html#Mod RS   0.0   Ohmic resistance [Ohm]
  elica.SIunits.Resistance)                         

  Real                                   N    1.0   Emission coefficient

  [Time](Modelica_SIunits.html#Modelica. TT   0.0   Transit time [s]
  SIunits.Time)                                     

  [Capacitance](Modelica_SIunits.html#Mo CJO  0.0   Junction capacitance [F]
  delica.SIunits.Capacitance)                       

  [Voltage](Modelica_SIunits.html#Modeli VJ   1.0   Junction Potential [V]
  ca.SIunits.Voltage)                               

  Real                                   M    0.5   Grading coefficient

  [ActivationEnergy](Modelica_SIunits.ht EG   1.11  Activation Energy [eV]
  ml#Modelica.SIunits.ActivationEnergy)             

  Real                                   XTI  3.0   Saturation current
                                                    temperature exponent

  Real                                   FC   0.5   Forward bias junction
                                                    fit parameter

  [Voltage](Modelica_SIunits.html#Modeli BV   -1e40 Reverse breakdown
  ca.SIunits.Voltage)                               voltage, default
                                                    infinity [V]

  [Current](Modelica_SIunits.html#Modeli IBV  1e-3  Current at reverse
  ca.SIunits.Current)                               breakdown voltage [A]

  [Temp\_C](Modelica_SIunits.html#Modeli TNOM 27    Parameter measurement
  ca.SIunits.Temp_C)                                temperature [degC]

  Real                                   KF   0.0   Flicker noise
                                                    coefficient

  Real                                   AF   1.0   Flicker noise exponent

  [Conductance](Modelica_SIunits.html#Mo G    0     Ohmic conductance [S]
  delica.SIunits.Conductance)                       
  --------------------------------------------------------------------------

Modelica definition
-------------------

    record ModelcardDIODE "Record with technological parameters (.model)"
     parameter SI.Current IS=1e-14 "Saturation Current";
     parameter SI.Resistance RS=0.0 "Ohmic resistance";
     parameter Real N=1.0 "Emission coefficient";
     parameter SI.Time TT=0.0 "Transit time";
     parameter SI.Capacitance CJO=0.0 "Junction capacitance";
     parameter SI.Voltage VJ=1.0 "Junction Potential";
     parameter Real M=0.5 "Grading coefficient";
     parameter SI.ActivationEnergy EG=1.11 "Activation Energy";
     parameter Real XTI=3.0 "Saturation current temperature exponent";
     parameter Real FC=0.5 "Forward bias junction fit parameter";
     parameter SI.Voltage BV=-1e40 "Reverse breakdown voltage, default infinity";
     parameter SI.Current IBV=1e-3 "Current at reverse breakdown voltage";
     parameter SI.Temp_C TNOM=27 "Parameter measurement temperature";
     parameter Real KF=0.0 "Flicker noise coefficient";
     parameter Real AF=1.0 "Flicker noise exponent";
     parameter SI.Conductance G=0 "Ohmic conductance";
    end ModelcardDIODE;

* * * * *

![image46](Modelica.Electrical.Spice3.Internal.R_SEMII.png) [Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).R\_SEMI
=======================================================================================================================================================================================

**Semiconductor resistor**

Information
-----------

::

Semiconductor resistance model

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Extends from
[Modelica.Electrical.Analog.Interfaces.OnePort](Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.OnePort)
(Component with two electrical pins p and n and current i from p to n).

Parameters
----------

  --------------------------------------------------------------------------
  Type                                  Name  Defa Description
                                              ult  
  ------------------------------------- ----- ---- -------------------------
  [Resistance](Modelica_SIunits.html#Mo R     -1e4 Resistance, if specified,
  delica.SIunits.Resistance)                  0    geometrical information
                                                   is overwritten [Ohm]

  [Temp\_C](Modelica_SIunits.html#Model TEMP  -1e4 Temperature of resistor
  ica.SIunits.Temp_C)                         0    [degC]

  [Length](Modelica_SIunits.html#Modeli L     -1e4 Lenght of the resistor
  ca.SIunits.Length)                          0    [m]

  [Length](Modelica_SIunits.html#Modeli W     -1e4 Width of the resistor,
  ca.SIunits.Length)                          0    default DEFW (modelcard)
                                                   [m]

  Boolean                               SENS\ fals Parameter for sensitivity
                                        _AREA e    analyses, not implemented
                                                   yet

  [ModelcardR](Modelica_Electrical_Spic model      Resistor modelcard
  e3_Internal.html#Modelica.Electrical. card       
  Spice3.Internal.ModelcardR)                      
  --------------------------------------------------------------------------

Connectors
----------

  -------------------------------------------------------------------------
  Type                                        Nam Description
                                              e   
  ------------------------------------------- --- -------------------------
  [PositivePin](Modelica_Electrical_Analog_In p   Positive pin (potential
  terfaces.html#Modelica.Electrical.Analog.In     p.v \> n.v for positive
  terfaces.PositivePin)                           voltage drop v)

  [NegativePin](Modelica_Electrical_Analog_In n   Negative pin
  terfaces.html#Modelica.Electrical.Analog.In     
  terfaces.NegativePin)                           
  -------------------------------------------------------------------------

Modelica definition
-------------------

    model R_SEMI "Semiconductor resistor"

      extends Modelica.Electrical.Analog.Interfaces.OnePort;
      parameter SI.Resistance R= -1e40 
        "Resistance, if specified, geometrical information is overwritten";
      parameter SI.Temp_C TEMP = -1e40 "Temperature of resistor";
      parameter SI.Length L = -1e40 "Lenght of the resistor";
      parameter SI.Length W = -1e40 
        "Width of the resistor, default DEFW (modelcard)";
      parameter Boolean SENS_AREA= false 
        "Parameter for sensitivity analyses, not implemented yet";
      parameter ModelcardR modelcard "Resistor modelcard";
      SpiceConstants C "General constants of SPICE simulator";
      final parameter Rsemiconductor.ResistorModelLineParams lp=
          Rsemiconductor.resistorRenameParameters(modelcard, C) 
        "Model Line Parameters";
      final parameter Rsemiconductor.ResistorParams rp=
          Rsemiconductor.resistorRenameParametersDev(
              R,
              W,
              L,
              TEMP,
              SENS_AREA,
              C) "Renamed parameters";

        Rsemiconductor.ResistorVariables vp;

    algorithm 
      vp := Rsemiconductor.resistorInitEquations(rp, lp);

      (vp.m_dConduct,vp.m_dCond_dTemp) :=
        Modelica.Electrical.Spice3.Internal.Functions.resDepTemp(
            vp.m_dResist,
            rp.m_dTemp,
            lp.m_dTnom,
            lp.m_dTC1,
            lp.m_dTC2);

     i :=vp.m_dConduct*v;

    end R_SEMI;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).ModelcardR
==============================================================================================================================

**Record with technological parameters (.model)**

Information
-----------

::

Modelcard parameters for semiconductor resistance model

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Parameters
----------

  --------------------------------------------------------------------------
  Type                                         Nam Def Description
                                               e   aul 
                                                   t   
  -------------------------------------------- --- --- ---------------------
  [FirstOrderTemperaturCoefficient](Modelica_S TC1 0.0 First order
  Iunits_Conversions_NonSIunits.html#Modelica.         temperature
  SIunits.Conversions.NonSIunits.FirstOrderTem         coefficient
  peraturCoefficient)                                  [Ohm/degC]

  [SecondOrderTemperaturCoefficient](Modelica_ TC2 0.0 In Ohm/(deg C\*deg
  SIunits_Conversions_NonSIunits.html#Modelica         C), Second2 order
  .SIunits.Conversions.NonSIunits.SecondOrderT         temperature
  emperaturCoefficient)                                coefficient
                                                       [Ohm/degC2]

  [Resistance](Modelica_SIunits.html#Modelica. RSH -1e Sheet resistance
  SIunits.Resistance)                              40  [Ohm]

  [Temp\_C](Modelica_SIunits.html#Modelica.SIu TNO -1e Parameter measurement
  nits.Temp_C)                                 M   40  temperature, default
                                                       27 [degC]

  [Length](Modelica_SIunits.html#Modelica.SIun DEF 1e- Default device width
  its.Length)                                  W   5   [m]

  [Length](Modelica_SIunits.html#Modelica.SIun NAR 0   Narrowing of resistor
  its.Length)                                  ROW     due to side etching
                                                       [m]
  --------------------------------------------------------------------------

Modelica definition
-------------------

    record ModelcardR "Record with technological parameters (.model)"
     parameter SI.Conversions.NonSIunits.FirstOrderTemperaturCoefficient TC1 =        0.0 
        "First order temperature coefficient";
     parameter SI.Conversions.NonSIunits.SecondOrderTemperaturCoefficient TC2 =               0.0 
        "In Ohm/(deg C*deg C), Second2 order temperature coefficient";
     parameter SI.Resistance RSH = -1e40 "Sheet resistance";
     parameter SI.Temp_C TNOM = -1e40 
        "Parameter measurement temperature, default 27";
     parameter SI.Length DEFW = 1e-5 "Default device width";
     parameter SI.Length NARROW = 0 "Narrowing of resistor due to side etching";
    end ModelcardR;

* * * * *

[Modelica.Electrical.Spice3.Internal](Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal).SpiceConstants
==================================================================================================================================

**General constants of SPICE simulator**

Information
-----------

::

General constants used by SPICE

The package Repository is not for user access. There all function,
records and data are stored, that are needed for the semiconductor
models of the package Semiconductors.

::

Modelica definition
-------------------

    record SpiceConstants "General constants of SPICE simulator"
      constant Real EPSSIL =     (11.7 * 8.854214871e-12);
      constant Real EPSOX =      3.453133e-11;
      constant SI.Charge CHARGE =     (1.6021918e-19);
      constant SI.Temp_K CONSTCtoK =  (273.15);
      constant SI.Temp_K REFTEMP =    300.15;  /* 27 deg C */

      constant Real CONSTroot2 =  sqrt(2.0);
      constant Real CONSTvt0(   final unit= "(J/K)/(A.s)") = Modelica.Constants.k * Modelica.SIunits.Conversions.from_degC(27)  / CHARGE; // deg C
      constant Real CONSTKoverQ(  final unit= "(J/K)/(A.s)")= Modelica.Constants.k / CHARGE;
      constant Real CONSTe =      exp(1.0);

      // options

      constant SI.Conductance CKTgmin =         1e-12;
      constant SI.Temp_K CKTnomTemp =      300.15;
      constant SI.Temp_K CKTtemp =         300.15;
      constant SI.Area CKTdefaultMosAD = 0.0;
      constant SI.Area CKTdefaultMosAS = 0.0;
      constant SI.Length CKTdefaultMosL =  100e-6;
      constant SI.Length CKTdefaultMosW =  100e-6;
      constant Real CKTreltol =       1e-10;
      constant Real CKTabstol =       1e-15;
      constant Real CKTvolttol =      1e-10;
      constant Real CKTtemptol =      1e-3;
    end SpiceConstants;

* * * * *

[Automatically generated](http://www.3ds.com/) Fri Nov 12 16:29:46 2010.
