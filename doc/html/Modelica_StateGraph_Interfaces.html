<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.StateGraph.Interfaces</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.StateGraph.Interfaces</h1>
</div>
<h1 id="modelica.stategraph.interfaces"><a href="Modelica_StateGraph.html#Modelica.StateGraph">Modelica.StateGraph</a>.Interfaces</h1>
<p><strong>Connectors and partial models</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_InterfacesPackage.html#Modelica.Icons.InterfacesPackage">Modelica.Icons.InterfacesPackage</a> (Icon for packages containing interfaces).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="60%" />
<col width="39%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.Step_inS.png" alt="image11" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Step_in">Step_in</a></td>
<td align="left">Input port of a step</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.StateGraph.Interfaces.Step_outS.png" alt="image12" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Step_out">Step_out</a></td>
<td align="left">Output port of a step</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.Transition_inS.png" alt="image13" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Transition_in">Transition_in</a></td>
<td align="left">Input port of a transition</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.StateGraph.Interfaces.Transition_outS.png" alt="image14" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Transition_out">Transition_out</a></td>
<td align="left">Output port of a transition</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.CompositeStep_resumeS.png" alt="image15" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStep_resume">CompositeStep_resume</a></td>
<td align="left">Input port of a step (used for resume connector of a CompositeStep)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.StateGraph.Interfaces.CompositeStep_suspendS.png" alt="image16" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStep_suspend">CompositeStep_suspend</a></td>
<td align="left">Output port of a step (used for suspend connector of a CompositeStep)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.CompositeStepStatePort_inS.png" alt="image17" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStepStatePort_in">CompositeStepStatePort_in</a></td>
<td align="left">Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are inputs)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.StateGraph.Interfaces.CompositeStepStatePort_inS.png" alt="image18" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStepStatePort_out">CompositeStepStatePort_out</a></td>
<td align="left">Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are outputs)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.PartialStepS.png" alt="image19" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.PartialStep">PartialStep</a></td>
<td align="left">Partial step with one input and one output transition port</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.StateGraph.Interfaces.PartialTransitionS.png" alt="image20" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.PartialTransition">PartialTransition</a></td>
<td align="left">Partial transition with input and output connections</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.StateGraph.Interfaces.PartialStateGraphIconS.png" alt="image21" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.PartialStateGraphIcon">PartialStateGraphIcon</a></td>
<td align="left">Icon for a StateGraph object</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStepState">CompositeStepState</a></td>
<td align="left">Communication channel between CompositeSteps and steps in the CompositeStep</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image22-modelica.stategraph.interfaces.step_in"><img src="Modelica.StateGraph.Interfaces.Step_inI.png" alt="image22" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.Step_in</h1>
<p><strong>Input port of a step</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents">Contents</h2>
<table>
<col width="22%" />
<col width="15%" />
<col width="61%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">output Boolean</td>
<td align="left">occupied</td>
<td align="left">true, if step is active</td>
</tr>
<tr class="even">
<td align="left">input Boolean</td>
<td align="left">set</td>
<td align="left">true, if transition fires and step is activated</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>connector Step_in &quot;Input port of a step&quot;
  output Boolean occupied &quot;true, if step is active&quot;;
  input Boolean set &quot;true, if transition fires and step is activated&quot;;
end Step_in;</code></pre>
<hr />
<h1 id="image23-modelica.stategraph.interfaces.step_out"><img src="Modelica.StateGraph.Interfaces.Step_outI.png" alt="image23" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.Step_out</h1>
<p><strong>Output port of a step</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-1">Contents</h2>
<table>
<col width="21%" />
<col width="16%" />
<col width="62%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">output Boolean</td>
<td align="left">available</td>
<td align="left">true, if step is active</td>
</tr>
<tr class="even">
<td align="left">input Boolean</td>
<td align="left">reset</td>
<td align="left">true, if transition fires and step is deactivated</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>connector Step_out &quot;Output port of a step&quot;
  output Boolean available &quot;true, if step is active&quot;;

  input Boolean reset &quot;true, if transition fires and step is deactivated&quot;;

end Step_out;</code></pre>
<hr />
<h1 id="image24-modelica.stategraph.interfaces.transition_in"><img src="Modelica.StateGraph.Interfaces.Transition_inI.png" alt="image24" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.Transition_in</h1>
<p><strong>Input port of a transition</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-2">Contents</h2>
<table>
<col width="15%" />
<col width="11%" />
<col width="73%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input Boolean</td>
<td align="left">available</td>
<td align="left">true, if step connected to the transition input is active</td>
</tr>
<tr class="even">
<td align="left">output Boolean</td>
<td align="left">reset</td>
<td align="left">true, if transition fires and the step connected to the transition input is deactivated</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>connector Transition_in &quot;Input port of a transition&quot;
  input Boolean available 
    &quot;true, if step connected to the transition input is active&quot;;
  output Boolean reset 
    &quot;true, if transition fires and the step connected to the transition input is deactivated&quot;;

end Transition_in;</code></pre>
<hr />
<h1 id="image25-modelica.stategraph.interfaces.transition_out"><img src="Modelica.StateGraph.Interfaces.Transition_outI.png" alt="image25" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.Transition_out</h1>
<p><strong>Output port of a transition</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-3">Contents</h2>
<table>
<col width="15%" />
<col width="10%" />
<col width="73%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input Boolean</td>
<td align="left">occupied</td>
<td align="left">true, if step connected to the transition output is active</td>
</tr>
<tr class="even">
<td align="left">output Boolean</td>
<td align="left">set</td>
<td align="left">true, if transition fires and step connected to the transition output becomes active</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>connector Transition_out &quot;Output port of a transition&quot;
  input Boolean occupied 
    &quot;true, if step connected to the transition output is active&quot;;
  output Boolean set 
    &quot;true, if transition fires and step connected to the transition output becomes active&quot;;

end Transition_out;</code></pre>
<hr />
<h1 id="image26-modelica.stategraph.interfaces.compositestep_resume"><img src="Modelica.StateGraph.Interfaces.CompositeStep_resumeI.png" alt="image26" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.CompositeStep_resume</h1>
<p><strong>Input port of a step (used for resume connector of a CompositeStep)</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-4">Contents</h2>
<table>
<col width="22%" />
<col width="15%" />
<col width="61%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">output Boolean</td>
<td align="left">occupied</td>
<td align="left">true, if step is active</td>
</tr>
<tr class="even">
<td align="left">input Boolean</td>
<td align="left">set</td>
<td align="left">true, if transition fires and step is activated</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>connector CompositeStep_resume 
  &quot;Input port of a step (used for resume connector of a CompositeStep)&quot;
  output Boolean occupied &quot;true, if step is active&quot;;
  input Boolean set &quot;true, if transition fires and step is activated&quot;;
end CompositeStep_resume;</code></pre>
<hr />
<h1 id="image27-modelica.stategraph.interfaces.compositestep_suspend"><img src="Modelica.StateGraph.Interfaces.CompositeStep_suspendI.png" alt="image27" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.CompositeStep_suspend</h1>
<p><strong>Output port of a step (used for suspend connector of a CompositeStep)</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-5">Contents</h2>
<table>
<col width="22%" />
<col width="16%" />
<col width="61%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">output Boolean</td>
<td align="left">available</td>
<td align="left">true, if step is active</td>
</tr>
<tr class="even">
<td align="left">input Boolean</td>
<td align="left">reset</td>
<td align="left">true, if transition fires and step is deactived</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>connector CompositeStep_suspend 
  &quot;Output port of a step (used for suspend connector of a CompositeStep)&quot;

  output Boolean available &quot;true, if step is active&quot;;

  input Boolean reset &quot;true, if transition fires and step is deactived&quot;;

end CompositeStep_suspend;</code></pre>
<hr />
<h1 id="modelica.stategraph.interfaces.compositestepstateport_in"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.CompositeStepStatePort_in</h1>
<p><strong>Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are inputs)</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-6">Contents</h2>
<table>
<col width="15%" />
<col width="18%" />
<col width="66%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input Boolean</td>
<td align="left">suspend</td>
<td align="left">= true, if suspend transition of CompositeStep fires</td>
</tr>
<tr class="even">
<td align="left">input Boolean</td>
<td align="left">resume</td>
<td align="left">= true, if resume transition of CompositeStep fires</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">activeStepsDummy</td>
<td align="left">Dummy variable in order that connector fulfills restriction of connector</td>
</tr>
<tr class="even">
<td align="left">flow Real</td>
<td align="left">activeSteps</td>
<td align="left">Number of active steps in the CompositeStep</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>connector CompositeStepStatePort_in 
  &quot;Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are inputs)&quot;

  input Boolean suspend &quot;= true, if suspend transition of CompositeStep fires&quot;;
  input Boolean resume &quot;= true, if resume transition of CompositeStep fires&quot;;
  Real activeStepsDummy 
    &quot;Dummy variable in order that connector fulfills restriction of connector&quot;;
  flow Real activeSteps &quot;Number of active steps in the CompositeStep&quot;;
end CompositeStepStatePort_in;</code></pre>
<hr />
<h1 id="modelica.stategraph.interfaces.compositestepstateport_out"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.CompositeStepStatePort_out</h1>
<p><strong>Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are outputs)</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="contents-7">Contents</h2>
<table>
<col width="16%" />
<col width="17%" />
<col width="65%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">output Boolean</td>
<td align="left">suspend</td>
<td align="left">= true, if suspend transition of CompositeStep fires</td>
</tr>
<tr class="even">
<td align="left">output Boolean</td>
<td align="left">resume</td>
<td align="left">= true, if resume transition of CompositeStep fires</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">activeStepsDummy</td>
<td align="left">Dummy variable in order that connector fulfills restriction of connector</td>
</tr>
<tr class="even">
<td align="left">flow Real</td>
<td align="left">activeSteps</td>
<td align="left">Number of active steps in the CompositeStep</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>connector CompositeStepStatePort_out 
  &quot;Communication port between a CompositeStep and the ordinary steps within the CompositeStep (suspend/resume are outputs)&quot;

  output Boolean suspend &quot;= true, if suspend transition of CompositeStep fires&quot;;
  output Boolean resume &quot;= true, if resume transition of CompositeStep fires&quot;;
  Real activeStepsDummy 
    &quot;Dummy variable in order that connector fulfills restriction of connector&quot;;
  flow Real activeSteps &quot;Number of active steps in the CompositeStep&quot;;
end CompositeStepStatePort_out;</code></pre>
<hr />
<h1 id="image28-modelica.stategraph.interfaces.partialstep"><img src="Modelica.StateGraph.Interfaces.PartialStepI.png" alt="image28" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.PartialStep</h1>
<p><strong>Partial step with one input and one output transition port</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="16%" />
<col width="12%" />
<col width="16%" />
<col width="45%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">nIn</td>
<td align="left">1</td>
<td align="left">Number of input connections</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">nOut</td>
<td align="left">1</td>
<td align="left">Number of output connections</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="63%" />
<col width="12%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Step_in">Step_in</a></td>
<td align="left">inPort[nIn]</td>
<td align="left">Vector of step input connectors</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Step_out">Step_out</a></td>
<td align="left">outPort[nOut]</td>
<td align="left">Vector of step output connectors</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>partial block PartialStep 
  &quot;Partial step with one input and one output transition port&quot;

  parameter Integer nIn(min=0) = 1 &quot;Number of input connections&quot;;
  parameter Integer nOut(min=0) = 1 &quot;Number of output connections&quot;;

  /* localActive is introduced since component &#39;Step&#39; has Boolean variable &#39;active&#39;
     and component &#39;StepWithSignal&#39; has connector instance &#39;active&#39; defined
     and both components inherit from PartialStep
  */
  output Boolean localActive 
    &quot;= true if step is active, otherwise the step is not active&quot;;
  Interfaces.Step_in inPort[nIn] &quot;Vector of step input connectors&quot;;
  Interfaces.Step_out outPort[nOut] &quot;Vector of step output connectors&quot;;
protected 
  outer Interfaces.CompositeStepState stateGraphRoot;
  model OuterStatePort
    CompositeStepStatePort_in subgraphStatePort;
  end OuterStatePort;
  OuterStatePort outerStatePort;

  Boolean newActive &quot;Value of active in the next iteration&quot;;
  Boolean oldActive &quot;Value of active when CompositeStep was aborted&quot;;
initial equation 
  pre(newActive) = pre(localActive);
  pre(oldActive) = pre(localActive);
equation 
  connect(outerStatePort.subgraphStatePort, stateGraphRoot.subgraphStatePort);

  // Check that connections to the connector are correct
  for i in 1:nIn loop

  assert(cardinality(inPort[i]) &lt;= 1,
         &quot;Connector is connected to more than one transition (this is not allowed)&quot;);
  end for;

  for i in 1:nOut loop

  assert(cardinality(outPort[i]) &lt;= 1,
         &quot;Connector is connected to more than one transition (this is not allowed)&quot;);
  end for;

  // set active state
  localActive = pre(newActive);
  newActive = if outerStatePort.subgraphStatePort.resume then 
                   oldActive else 
                   ( StateGraph.Temporary.anyTrue(inPort.set) or 
                        localActive
                     and not StateGraph.Temporary.anyTrue(outPort.reset))
                   and not outerStatePort.subgraphStatePort.suspend;

  // Remember state for suspend action
  when outerStatePort.subgraphStatePort.suspend then
    oldActive = localActive;
  end when;

  // Report state to CompositeStep
  outerStatePort.subgraphStatePort.activeSteps = if localActive then 1.0 else 0.0;

  // Report state to input and output transitions
  for i in 1:nIn loop
    inPort[i].occupied = if i == 1 then localActive else 
                                        inPort[i-1].occupied or 
                                        inPort[i-1].set;
  end for;

  for i in 1:nOut loop
     outPort[i].available = if i == 1 then localActive else 
                                           outPort[i-1].available and not 
                                           outPort[i-1].reset;
  end for;

  // Default setting, if an inPort or an outPort is not connected
  for i in 1:nIn loop
    if cardinality(inPort[i]) == 0 then
      inPort[i].set = false;
    end if;
  end for;

  for i in 1:nOut loop
    if cardinality(outPort[i]) == 0 then
      outPort[i].reset = false;
    end if;
  end for;
end PartialStep;</code></pre>
<hr />
<h1 id="image29-modelica.stategraph.interfaces.partialtransition"><img src="Modelica.StateGraph.Interfaces.PartialTransitionI.png" alt="image29" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.PartialTransition</h1>
<p><strong>Partial transition with input and output connections</strong></p>
<h2 id="information-10">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="45%" />
<col width="12%" />
<col width="9%" />
<col width="32%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Timer</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">enableTimer</td>
<td align="left">false</td>
<td align="left">= true, if timer is enabled</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">waitTime</td>
<td align="left">0</td>
<td align="left">Wait time before transition fires [s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="66%" />
<col width="7%" />
<col width="26%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Transition_in">Transition_in</a></td>
<td align="left">inPort</td>
<td align="left">Vector of transition input connectors</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.Transition_out">Transition_out</a></td>
<td align="left">outPort</td>
<td align="left">Vector of transition output connectors</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>partial block PartialTransition 
  &quot;Partial transition with input and output connections&quot;
  input Boolean localCondition &quot;= true, if transition may fire&quot;;
  parameter Boolean enableTimer=false &quot;= true, if timer is enabled&quot;;
  parameter Modelica.SIunits.Time waitTime(min=0) = 0 
    &quot;Wait time before transition fires&quot;;
  output Modelica.SIunits.Time t 
    &quot;= actual waiting time (transition will fire when t &gt; waitTime)&quot;;
  output Boolean enableFire &quot;= true, if all firing conditions are true&quot;;
  output Boolean fire &quot;= true, if transition fires&quot;;

  StateGraph.Interfaces.Transition_in inPort 
    &quot;Vector of transition input connectors&quot;;
  StateGraph.Interfaces.Transition_out outPort 
    &quot;Vector of transition output connectors&quot;;
protected 
  Modelica.SIunits.Time t_start 
    &quot;Time instant at which the transition would fire, if waitTime would be zero&quot;;
  Real t_dummy;
initial equation 

  pre(enableFire) = false;
equation 
  assert(cardinality(inPort) == 1,
    &quot;Connector inPort is not connected to exactly one other connector&quot;);
  assert(cardinality(outPort) == 1,
    &quot;Connector outPort is not connected to exactly one other connector&quot;);

  // Handling of Timer
  if enableTimer then
    when enableFire then
      t_start = time;
    end when;
    t_dummy = time - t_start;
    t = if enableFire then t_dummy else 0;
    fire = enableFire and time &gt;= t_start + waitTime;
  else
    t_start = 0;
    t_dummy = 0;
    t = 0;
    fire = enableFire;
  end if;

  // Determine fire setting and report it to the connected step
  enableFire = localCondition and inPort.available and not outPort.occupied;
  inPort.reset = fire;
  outPort.set = fire;
end PartialTransition;</code></pre>
<hr />
<h1 id="image30-modelica.stategraph.interfaces.partialstategraphicon"><img src="Modelica.StateGraph.Interfaces.PartialStateGraphIconI.png" alt="image30" /> <a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.PartialStateGraphIcon</h1>
<p><strong>Icon for a StateGraph object</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>partial block PartialStateGraphIcon &quot;Icon for a StateGraph object&quot;

end PartialStateGraphIcon;</code></pre>
<hr />
<h1 id="modelica.stategraph.interfaces.compositestepstate"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces">Modelica.StateGraph.Interfaces</a>.CompositeStepState</h1>
<p><strong>Communication channel between CompositeSteps and steps in the CompositeStep</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>::</p>
<h2 id="connectors-2">Connectors</h2>
<table>
<col width="77%" />
<col width="13%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStepStatePort_out">CompositeStepStatePort_out</a></td>
<td align="left">subgraphStatePort</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>model CompositeStepState 
  &quot;Communication channel between CompositeSteps and steps in the CompositeStep&quot;

  output Boolean suspend = false;
  output Boolean resume =  false;
  CompositeStepStatePort_out subgraphStatePort;

/*
    missingInnerMessage=&quot;No \&quot;stateGraphRoot\&quot; component is defined on highest level
of the StateGraph. A stateGraphRoot component is automatically introduced.
In order to get rid of this message, drag StateGraph.StateGraphRoot into the
top level your model.&quot;);
*/
equation 
  suspend = subgraphStatePort.suspend;
  resume  = subgraphStatePort.resume;
  subgraphStatePort.activeStepsDummy = 0;
end CompositeStepState;</code></pre>
<hr />
<h1 id="modelica.stategraph.interfaces.partialstep.outerstateport"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.PartialStep">Modelica.StateGraph.Interfaces.PartialStep</a>.OuterStatePort</h1>
<h2 id="connectors-3">Connectors</h2>
<table>
<col width="77%" />
<col width="13%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_StateGraph_Interfaces.html#Modelica.StateGraph.Interfaces.CompositeStepStatePort_in">CompositeStepStatePort_in</a></td>
<td align="left">subgraphStatePort</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-12">Modelica definition</h2>
<pre><code>model OuterStatePort
  CompositeStepStatePort_in subgraphStatePort;
end OuterStatePort;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:27:51 2010.</p>
</body>
</html>
