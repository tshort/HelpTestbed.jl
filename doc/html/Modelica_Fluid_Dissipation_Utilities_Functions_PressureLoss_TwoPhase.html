<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</h1>
</div>
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss</a>.TwoPhase</h1>
<p><strong>Package with utility functions to compute two phase pressure loss characteristics</strong></p>
<h2 id="information">Information</h2>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="67%" />
<col width="32%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image9" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DP">dp_twoPhaseChisholm_DP</a></td>
<td align="left">Frictional pressure loss of straight pipe for two phase flow according to Chisholm correlation | calculate pressure loss | overall flow regime</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image10" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseFriedel_DP">dp_twoPhaseFriedel_DP</a></td>
<td align="left">Frictional pressure loss of straight pipe for two phase flow according to Friedel correlation | calculate pressure loss| overall flow regime</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image11" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseGeodetic_DP">dp_twoPhaseGeodetic_DP</a></td>
<td align="left">Geodetic pressure loss of straight pipe for two phase flow | calculate pressure loss</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image12" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseMomentum_DP">dp_twoPhaseMomentum_DP</a></td>
<td align="left">Momentum pressure loss of straight pipe for two phase flow | calculate pressure loss</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image13" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseMultiplierFriedel">TwoPhaseMultiplierFriedel</a></td>
<td align="left">Calculation of two phase multiplier according to Friedel | constant mass flow rate quality | horizontal flow | vertical upflow and downflow</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image14" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseMultiplierChisholm">TwoPhaseMultiplierChisholm</a></td>
<td align="left">Calculation of two phase multiplier according to Chisholm | constant mass flow rate quality</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image15" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseDensity">TwoPhaseDensity</a></td>
<td align="left">Calculation of mean density for two phase flow</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image16" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.VoidFraction">VoidFraction</a></td>
<td align="left">Calculation of (cross sectional) void fraction for two phase flow</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.dp_twoPhaseChisholm_DPS.png" alt="image17" /> <a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.SlipRatio">SlipRatio</a></td>
<td align="left">Calculation of (analytical/empirical) slip ratio</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.dp_twophasechisholm_dp"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.dp_twoPhaseChisholm_DP</h1>
<p><strong>Frictional pressure loss of straight pipe for two phase flow according to Chisholm correlation | calculate pressure loss | overall flow regime</strong></p>
<h2 id="information-1">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d">Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d</a> (Geometry figure for straight pipe).</p>
<h2 id="inputs">Inputs</h2>
<table>
<col width="75%" />
<col width="5%" />
<col width="5%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Constant inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con">TwoPhaseFlow_con</a></td>
<td align="left">IN_con</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Variable inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var">TwoPhaseFlow_var</a></td>
<td align="left">IN_var</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Input</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="51%" />
<col width="6%" />
<col width="41%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">DP</td>
<td align="left">Output for function dp_twoPhaseChisholm_DP [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>function dp_twoPhaseChisholm_DP 
  &quot;Frictional pressure loss of straight pipe for two phase flow according to Chisholm correlation | calculate pressure loss | overall flow regime&quot;

  //SOURCE_1: Chisholm,D.:PRESSURE GRADIENTS DUE TO FRICTION DURING THE FLOW OF EVAPORATING TWO-PHASE MIXTURES IN SMOOTH TUBES AND CHANNELS, Int. J. Heat Mass Transfer, Vol. 16, pp. 347-358, Pergamon Press 1973

  //icon
  extends Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d;

  //records
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con
    IN_con;
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var
    IN_var;
  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output SI.Pressure DP &quot;Output for function dp_twoPhaseChisholm_DP&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  Modelica.Fluid.Dissipation.PressureLoss.StraightPipe.dp_overall_IN_con
    IN_con_1ph(
    final roughness=Dissipation.Utilities.Types.Roughness.Neglected,
    final d_hyd=4*abs(IN_con.A_cross)/max(MIN, abs(IN_con.perimeter)),
    final K=0,
    final L=abs(IN_con.length));

  Modelica.Fluid.Dissipation.PressureLoss.StraightPipe.dp_overall_IN_var
    IN_var_1ph(
      final eta=IN_var.eta_l, final rho=IN_var.rho_l);

algorithm 
  DP := Modelica.Fluid.Dissipation.PressureLoss.StraightPipe.dp_overall_DP(
              IN_con_1ph,
              IN_var_1ph,
              m_flow)*(
    Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseMultiplierChisholm(
              IN_con,
              IN_var,
              m_flow));

end dp_twoPhaseChisholm_DP;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.dp_twophasefriedel_dp"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.dp_twoPhaseFriedel_DP</h1>
<p><strong>Frictional pressure loss of straight pipe for two phase flow according to Friedel correlation | calculate pressure loss| overall flow regime</strong></p>
<h2 id="information-2">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d">Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d</a> (Geometry figure for straight pipe).</p>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="75%" />
<col width="5%" />
<col width="5%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Constant inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con">TwoPhaseFlow_con</a></td>
<td align="left">IN_con</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Variable inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var">TwoPhaseFlow_var</a></td>
<td align="left">IN_var</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Input</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="41%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">DP</td>
<td align="left">Output for function dp_twoPhaseFriedel_DP [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>function dp_twoPhaseFriedel_DP 
  &quot;Frictional pressure loss of straight pipe for two phase flow according to Friedel correlation | calculate pressure loss| overall flow regime&quot;

  //SOURCE_1: Friedel,L.:IMPROVED FRICTION PRESSURE DROP CORRELATIONS FOR HORIZONTAL AND VERTICAL TWO PHASE PIPE FLOW, 3R International, Vol. 18, Issue 7, pp. 485-491, 1979
  //SOURCE_2: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.

  //icon
  extends Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.StraightPipe_d;

  import SMOOTH = Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother;
  import SMOOTH2 = Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower;

  //records
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con
    IN_con;
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var
    IN_var;
  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output SI.Pressure DP &quot;Output for function dp_twoPhaseFriedel_DP&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  SI.Area A_cross=max(MIN, IN_con.A_cross) &quot;Cross sectional area&quot;;
  SI.Diameter d_hyd=max(MIN, 4*A_cross/max(MIN, IN_con.perimeter)) 
    &quot;Hydraulic diameter&quot;;

  Real mdot_A=abs(m_flow)/A_cross &quot;Mass flux&quot;;
  SI.ReynoldsNumber Re_liq=max(1, mdot_A*d_hyd/max(MIN, IN_var.eta_l)) 
    &quot;Reynolds number assuming (total) mass flux flowing as liquid&quot;;
  SI.ReynoldsNumber Re_lam_leave=1055 
    &quot;Maximum Reynolds number for laminar regime (1055)&quot;;
  SI.ReynoldsNumber Re_turb=1100 
    &quot;Minimum Reynolds number for turbulent regime (1100)&quot;;
  SI.ReynoldsNumber Re_smooth=m_flow/A_cross*d_hyd/max(MIN, abs(IN_var.eta_l)) 
    &quot;Reynolds number for smoothing&quot;;
  TYP.DarcyFrictionFactor lambda_FRI_lam=64/Re_liq 
    &quot;Darcy friction factor for laminar regime&quot;;
  TYP.DarcyFrictionFactor lambda_FRI_turb=(0.86859*Modelica.Math.log(max(1, (
      Re_liq/max(MIN, (1.964*Modelica.Math.log(Re_liq) - 3.8215))))))^(-2) 
    &quot;Darcy friction factor for turbulent regime&quot;;
  TYP.DarcyFrictionFactor lambda_FRI=lambda_FRI_lam*SMOOTH(
      Re_lam_leave,
      Re_turb,
      Re_liq) + lambda_FRI_turb*SMOOTH(
      Re_turb,
      Re_lam_leave,
      Re_liq);
  TYP.PressureLossCoefficient zeta_FRI=lambda_FRI*IN_con.length/d_hyd 
    &quot;Pressure loss coefficient&quot;;
  SI.Pressure DP_liq=zeta_FRI*mdot_A^2/(2*max(MIN, IN_var.rho_l)) 
    &quot;Frictional pressure loss assuming (total) mass flux flowing as liquid&quot;;

algorithm 
  DP := SMOOTH2(
              Re_smooth,
              1,
              0)*DP_liq*(
    Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseMultiplierFriedel(
              IN_con,
              IN_var,
              m_flow));

end dp_twoPhaseFriedel_DP;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.dp_twophasegeodetic_dp"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.dp_twoPhaseGeodetic_DP</h1>
<p><strong>Geodetic pressure loss of straight pipe for two phase flow | calculate pressure loss</strong></p>
<h2 id="inputs-2">Inputs</h2>
<table>
<col width="50%" />
<col width="9%" />
<col width="12%" />
<col width="26%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach">VoidFractionApproach</a></td>
<td align="left">voidFractionApproach</td>
<td align="left">Dissipation.Utilities.Types....</td>
<td align="left">Choice of void fraction approach</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">crossSectionalAveraged</td>
<td align="left">true</td>
<td align="left">true == cross sectional averaged void fraction | false == volumetric</td>
</tr>
<tr class="odd">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">1</td>
<td align="left">Length in fluid flow direction [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Angle">Angle</a></td>
<td align="left">phi</td>
<td align="left">0</td>
<td align="left">Tilt angle to horizontal [rad]</td>
</tr>
<tr class="even">
<td align="left">Fluid properties</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_g</td>
<td align="left">
</td>
<td align="left">Density of gaseous phase [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_l</td>
<td align="left">
</td>
<td align="left">Density of liquid phase [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x_flow</td>
<td align="left">0</td>
<td align="left">Mass flow rate quality</td>
</tr>
</tbody>
</table>
<h2 id="outputs-2">Outputs</h2>
<table>
<col width="60%" />
<col width="10%" />
<col width="29%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">DP_geo</td>
<td align="left">Geodetic pressure loss [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>function dp_twoPhaseGeodetic_DP 
  &quot;Geodetic pressure loss of straight pipe for two phase flow | calculate pressure loss&quot;

  //SOURCE_1: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.

  import PI = Modelica.Constants.pi;

  input Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach
    voidFractionApproach=Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous 
    &quot;Choice of void fraction approach&quot;;

  input Boolean crossSectionalAveraged=true 
    &quot;true == cross sectional averaged void fraction | false == volumetric&quot;;

  //geometry
  input SI.Length length=1 &quot;Length in fluid flow direction&quot;;
  input SI.Angle phi=0 &quot;Tilt angle to horizontal&quot;;

  //fluid properties
  input SI.Density rho_g(min=Modelica.Constants.eps) &quot;Density of gaseous phase&quot;;
  input SI.Density rho_l(min=Modelica.Constants.eps) &quot;Density of liquid phase&quot;;
  input Real x_flow(
    min=0,
    max=1) = 0 &quot;Mass flow rate quality&quot;;

  output SI.Pressure DP_geo &quot;Geodetic pressure loss&quot;;

protected 
  Real xflow=min(1, max(0, abs(x_flow))) &quot;Mass flow rate quality&quot;;
  Real eps=
      Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.VoidFraction(
      voidFractionApproach,
      crossSectionalAveraged,
      rho_g,
      rho_l,
      xflow) &quot;Void fraction&quot;;

algorithm 
  //SOURCE_1: p.Lbb 1, eq. 4: Considering geodetic pressure loss assuming constant void fraction for flow length
  DP_geo := (eps*rho_g + (1 - eps)*rho_l)*9.81*length*sin(min(PI/2, max(0, abs(
    phi))));

end dp_twoPhaseGeodetic_DP;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.dp_twophasemomentum_dp"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.dp_twoPhaseMomentum_DP</h1>
<p><strong>Momentum pressure loss of straight pipe for two phase flow | calculate pressure loss</strong></p>
<h2 id="inputs-3">Inputs</h2>
<table>
<col width="50%" />
<col width="11%" />
<col width="15%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Choices</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.Roughness">Roughness</a></td>
<td align="left">voidFractionApproach</td>
<td align="left">Modelica.Fluid.Dissipation.U...</td>
<td align="left">Choice of void fraction approach</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">massFlowRateCorrection</td>
<td align="left">false</td>
<td align="left">Consider heterogeneous mass flow rate correction</td>
</tr>
<tr class="even">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">A_cross</td>
<td align="left">PI*0.1^2/4</td>
<td align="left">Cross sectional area</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">perimeter</td>
<td align="left">PI*0.1</td>
<td align="left">Perimeter [m]</td>
</tr>
<tr class="odd">
<td align="left">Fluid properties</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_g</td>
<td align="left">
</td>
<td align="left">Density of gas [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_l</td>
<td align="left">
</td>
<td align="left">Density of liquid [kg/m3]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">x_flow_end</td>
<td align="left">0</td>
<td align="left">Mass flow rate quality at end of length</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x_flow_sta</td>
<td align="left">0</td>
<td align="left">Mass flow rate quality at start of length</td>
</tr>
<tr class="even">
<td align="left">Input</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-3">Outputs</h2>
<table>
<col width="60%" />
<col width="10%" />
<col width="29%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Pressure">Pressure</a></td>
<td align="left">DP_mom</td>
<td align="left">Momentum pressure loss [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>function dp_twoPhaseMomentum_DP 
  &quot;Momentum pressure loss of straight pipe for two phase flow | calculate pressure loss&quot;

  //SOURCE_1: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.
  //SOURCE_2: Thome, J.R., Engineering Data Book 3, Swiss Federal Institute of Technology Lausanne (EPFL), 2009.
  //SOURCE 3: J.M. Jensen and H. Tummescheit. Moving boundary models for dynamic simulations of two-phase flows. In Proceedings of the 2nd International Modelica Conference, pp. 235-244, Oberpfaffenhofen, Germany, 2002. The Modelica Association.

  import PI = Modelica.Constants.pi;
  import MIN = Modelica.Constants.eps;
  import SMOOTH = Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower;

  //choices
  input Modelica.Fluid.Dissipation.Utilities.Types.Roughness
    voidFractionApproach=
      Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous 
    &quot;Choice of void fraction approach&quot;;

  //SOURCE_3: p.52, eq. 4.6: heterogenous effects on momentum pressure loss considered through corrected mass flow rate
  input Boolean massFlowRateCorrection=false 
    &quot;Consider heterogeneous mass flow rate correction&quot;;

  //geometry
  input Real A_cross(min=Modelica.Constants.eps) = PI*0.1^2/4 
    &quot;Cross sectional area&quot;;
  input SI.Length perimeter(min=Modelica.Constants.eps) = PI*0.1 &quot;Perimeter&quot;;

  //fluid properties
  input SI.Density rho_g(min=Modelica.Constants.eps) &quot;Density of gas&quot;;
  input SI.Density rho_l(min=Modelica.Constants.eps) &quot;Density of liquid&quot;;
  input Real x_flow_end(
    min=0,
    max=1) = 0 &quot;Mass flow rate quality at end of length&quot;;
  input Real x_flow_sta(
    min=0,
    max=1) = 0 &quot;Mass flow rate quality at start of length&quot;;

  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output SI.Pressure DP_mom &quot;Momentum pressure loss&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  SI.Area Across=max(MIN, A_cross) &quot;Cross sectional area&quot;;
  SI.Diameter d_hyd=max(MIN, 4*A_cross/max(MIN, perimeter)) 
    &quot;Hydraulic diameter&quot;;

  Real mdot_A=abs(m_flow)/Across &quot;Mass flux&quot;;
  Real xflowEnd=min(1, max(0, abs(x_flow_end))) 
    &quot;Mass flow rate quality at end of length&quot;;
  Real xflowSta=min(1, max(0, abs(x_flow_sta))) 
    &quot;Mass flow rate quality at start of length&quot;;
  Real xflowMean=(xflowEnd + xflowSta)/2 
    &quot;Mean mass flow rate quality over length&quot;;

  Real delta_xflow=xflowEnd - xflowSta 
    &quot;Difference of mass flow rate quality between end and start of length (pos &gt;&gt; evaporation, neg &gt;&gt; condensation&quot;;

  //SOURCE_2: Considering void fraction approaches
  Real eps_end=
      Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.VoidFraction(
      voidFractionApproach,
      true,
      rho_g,
      rho_l,
      xflowEnd) &quot;Void fraction at end of length&quot;;
  Real eps_sta=
      Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.VoidFraction(
      voidFractionApproach,
      true,
      rho_g,
      rho_l,
      xflowSta) &quot;Void fraction at start of length&quot;;

  //SOURCE_2: p.17-6, eq. 17.3.3: Considering mean two phase density at end and start of length
  SI.Density rho_end=
      Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseDensity(
      voidFractionApproach,
      massFlowRateCorrection,
      rho_g,
      rho_l,
      eps_end,
      xflowEnd) &quot;Mean two phase density at end of lenght&quot;;
  SI.Density rho_sta=
      Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase.TwoPhaseDensity(
      voidFractionApproach,
      massFlowRateCorrection,
      rho_g,
      rho_l,
      eps_sta,
      xflowSta) &quot;Mean two phase density at start of lenght&quot;;

  SI.Velocity meanVelEnd=abs(m_flow)/max(MIN, rho_end*A_cross) 
    &quot;Mean velocity of two phase flow at end of length&quot;;
  SI.Velocity meanVelSta=abs(m_flow)/max(MIN, rho_sta*A_cross) 
    &quot;Mean velocity of two phase flow at start of length&quot;;

  //SOURCE 3: p.15, eq. 2.26: Considering velocity difference for heterogeneous approach using slip ratio
  Real SR=Dissipation.Utilities.Functions.PressureLoss.TwoPhase.SlipRatio(
      voidFractionApproach,
      rho_g,
      rho_l,
      xflowMean) &quot;Slip ratio for velocity void fraction approach&quot;;
  SI.Velocity deltaVelEnd=meanVelEnd*(SR - 1)/(xflowEnd*(SR - 1) + 1) 
    &quot;Velocity difference of two phases at end of length&quot;;
  SI.Velocity deltaVelSta=meanVelSta*(SR - 1)/(xflowSta*(SR - 1) + 1) 
    &quot;Velocity difference of two phases at start of length&quot;;

  //SOURCE 3: p.52, eq. 4.6: Considering of corrected mass flow rate for heterogenous approach
  SI.MassFlowRate mdotCorEnd=xflowEnd*(1 - xflowEnd)*rho_end*deltaVelEnd*Across 
    &quot;Correction mass flow rate at end of length&quot;;
  SI.MassFlowRate mdotCorSta=xflowSta*(1 - xflowSta)*rho_sta*deltaVelSta*Across 
    &quot;Correction mass flow rate at start of length&quot;;

  //SOURCE 3: p.53, eq. 4.13: Calculation of heterogeneous approach with correction of mass flow rate for considering velocity difference between fluid phases
  SI.Pressure dp_mom_cor=SMOOTH(
      delta_xflow,
      0.05,
      0)*abs(mdot_A*meanVelEnd + mdotCorEnd*deltaVelEnd/Across) - abs(mdot_A*
      meanVelEnd + mdotCorEnd*deltaVelEnd/Across) 
    &quot;Momentum pressure loss using mass flow rate correction&quot;;

algorithm 
  //SOURCE_1: p.Lba 4, eq. 22: Considering momentum pressure loss assuming heterogeneous approach for two phase flow
  //Momentum pressure loss occurs for a changing mass flow rate quality due to condensation or evaporation
  //At evaporation the liquid phase with a slow velocity has to be accelerated to the higher velocity of the gas
  //The difference in static pressure at the outlet and the inlet causes a positiv momentum pressure loss at evaporation (assumed vice versa for condensation)
  DP_mom := if massFlowRateCorrection then dp_mom_cor else mdot_A^2*SMOOTH(
    delta_xflow,
    0.05,
    0)*abs(1/max(MIN, rho_end) - 1/max(MIN, rho_sta));

end dp_twoPhaseMomentum_DP;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.twophasemultiplierfriedel"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.TwoPhaseMultiplierFriedel</h1>
<p><strong>Calculation of two phase multiplier according to Friedel | constant mass flow rate quality | horizontal flow | vertical upflow and downflow</strong></p>
<h2 id="inputs-4">Inputs</h2>
<table>
<col width="75%" />
<col width="5%" />
<col width="5%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Constant inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con">TwoPhaseFlow_con</a></td>
<td align="left">IN_con</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Variable inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var">TwoPhaseFlow_var</a></td>
<td align="left">IN_var</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Input</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-4">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="55%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phi</td>
<td align="left">Two phase multiplier w.r.t. Friedel</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>function TwoPhaseMultiplierFriedel 
  &quot;Calculation of two phase multiplier according to Friedel | constant mass flow rate quality | horizontal flow | vertical upflow and downflow&quot;

  //SOURCE_1: Friedel,L.:IMPROVED FRICTION PRESSURE DROP CORRELATIONS FOR HORIZONTAL AND VERTICAL TWO PHASE PIPE FLOW, 3R International, Vol. 18, Issue 7, pp. 485-491, 1979
  //SOURCE_2: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.

  import Modelica.Math.log;
  import SMOOTH = Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother;

  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con
    IN_con;
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var
    IN_var(
      final sigma=0);
  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output Real phi &quot;Two phase multiplier w.r.t. Friedel&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  SI.Area A_cross=max(MIN, IN_con.A_cross) &quot;Cross sectional area&quot;;
  SI.Diameter d_hyd=max(MIN, 4*A_cross/max(MIN, IN_con.perimeter)) 
    &quot;Hydraulic diameter&quot;;

  //SOURCE_2: p.Lba 4, sec. 3.3: Correlation based on constant mass flow rate quality (x_flow) for increment (dx)
  //Pressure loss for total length (e.g., L=n*dx) can be achieved by discretisation
  Real mdot_A=abs(m_flow)/A_cross &quot;Mass flux&quot;;
  Real x_flow=max(0, min(1, abs(IN_var.x_flow))) &quot;Mass flow rate quality&quot;;

  //SOURCE_1: p.490 (Appendix): Characteristic numbers based on total mass flow rate flowing as liquid
  SI.FroudeNumber Fr_l=max(MIN, mdot_A^2/max(MIN, 9.81*IN_var.rho_l^2*d_hyd)) 
    &quot;Froude number based on liquid flow&quot;;
  SI.ReynoldsNumber Re_g=max(1, mdot_A*d_hyd/max(MIN, IN_var.eta_g)) 
    &quot;Reynolds number based on gas flow&quot;;
  SI.ReynoldsNumber Re_l=max(1, mdot_A*d_hyd/max(MIN, IN_var.eta_l)) 
    &quot;Reynolds number based on liquid flow&quot;;
  SI.WeberNumber We_l=max(MIN, mdot_A^2*d_hyd/max(MIN, IN_var.sigma*IN_var.rho_l)) 
    &quot;Weber number based on liquid flow&quot;;

  //SOURCE_1: p.490 (Appendix): Smoothing for sudden change from assumed laminar to assumed turbulent regime (numerical improvement at Re=1055)
  SI.ReynoldsNumber Re_lam_max=1025 
    &quot;Maximum Reynolds number assuming laminar regime&quot;;
  SI.ReynoldsNumber Re_turb_min=1075 
    &quot;Minimum Reynolds number assuming turbulent regime&quot;;

  //SOURCE_2: p.Lbb 2, eq. 9-10: Considering influence of Reynolds number on Darcy friction factor for smooth straight pipes
  //Correlation based on neglection of surface roughness
  //Correlation based on assumption that total mass flow rate is flowing as gas
  TYP.DarcyFrictionFactor lambda_lam_g=64/Re_g 
    &quot;Darcy friction factor of gas for assumed laminar regime&quot;;
  TYP.DarcyFrictionFactor lambda_turb_g=1/max(MIN, 0.86859*log(max(1, Re_g/max(
      MIN, 1.964*log(Re_g) - 3.8215))))^(2) 
    &quot;Darcy friction factor of gas for assumed turbulent regime&quot;;
  TYP.DarcyFrictionFactor lambda_g=lambda_lam_g*SMOOTH(
      Re_lam_max,
      Re_turb_min,
      Re_g) + lambda_turb_g*SMOOTH(
      Re_turb_min,
      Re_lam_max,
      Re_g) &quot;Darcy friction factor of gas for overall regime&quot;;
  //Correlation based on assumption that total mass flow rate is flowing as liquid
  TYP.DarcyFrictionFactor lambda_lam_l=64/Re_l 
    &quot;Darcy friction factor of liquid for assumed laminar regime&quot;;
  TYP.DarcyFrictionFactor lambda_turb_l=1/max(MIN, 0.86859*log(max(1, Re_l/max(
      MIN, 1.964*log(Re_l) - 3.8215))))^(2) 
    &quot;Darcy friction factor of liquid for assumed turbulent regime&quot;;
  TYP.DarcyFrictionFactor lambda_l=lambda_lam_l*SMOOTH(
      Re_lam_max,
      Re_turb_min,
      Re_l) + lambda_turb_l*SMOOTH(
      Re_turb_min,
      Re_lam_max,
      Re_l) &quot;Darcy friction factor of liquid for overall regime&quot;;

  Real A=(1 - x_flow)^2 + x_flow^2*(IN_var.rho_l/max(MIN, IN_var.rho_g))*(
      lambda_g/max(MIN, lambda_l)) &quot;Summand for two phase multiplier&quot;;

  //SOURCE_1: p.490 (Appendix): Two phase multiplier for vertical downflow for future usage
  Real phi_vdo=A + 38.5*x_flow^0.76*(1 - x_flow)^0.314*(IN_var.rho_l/max(MIN,
      IN_var.rho_g))^0.86*(IN_var.eta_g/max(MIN, IN_var.eta_l))^0.73*(1 -
      IN_var.eta_g/max(MIN, IN_var.eta_l))^6.84*(1/Fr_l^(0.0001))*(1/We_l^(
      0.087));

  //SOURCE_1: p.490 (Appendix): Two phase multiplier for horizontal and vertical upflow (failure in SOURCE_2)
  Real phi_vup=A + 3.43*x_flow^0.685*(1 - x_flow)^0.24*(IN_var.rho_l/max(MIN,
      IN_var.rho_g))^0.8*(IN_var.eta_g/max(MIN, IN_var.eta_l))^0.22*(1 - IN_var.eta_g
      /max(MIN, IN_var.eta_l))^0.89*(1/Fr_l^(0.048))*(1/We_l^(0.0334));

algorithm 
  phi := phi_vup;
end TwoPhaseMultiplierFriedel;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.twophasemultiplierchisholm"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.TwoPhaseMultiplierChisholm</h1>
<p><strong>Calculation of two phase multiplier according to Chisholm | constant mass flow rate quality</strong></p>
<h2 id="inputs-5">Inputs</h2>
<table>
<col width="75%" />
<col width="5%" />
<col width="5%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Constant inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con">TwoPhaseFlow_con</a></td>
<td align="left">IN_con</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Variable inputs</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Records_General.html#Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var">TwoPhaseFlow_var</a></td>
<td align="left">IN_var</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Input</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-5">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="56%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phi</td>
<td align="left">Two phase multiplier w.r.t. Chisholm</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>function TwoPhaseMultiplierChisholm 
  &quot;Calculation of two phase multiplier according to Chisholm | constant mass flow rate quality&quot;

  //SOURCE_1: Chisholm,D.:PRESSURE GRADIENTS DUE TO FRICTION DURING THE FLOW OF EVAPORATING TWO-PHASE MIXTURES IN SMOOTH TUBES AND CHANNELS, Int. J. Heat Mass Transfer, Vol. 16, pp. 347-358, Pergamon Press 1973
  //SOURCE_2: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.

  import SMOOTH = Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother;

  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_con
    IN_con;
  input Modelica.Fluid.Dissipation.Utilities.Records.General.TwoPhaseFlow_var
    IN_var;
  input SI.MassFlowRate m_flow &quot;Mass flow rate&quot;;

  output Real phi &quot;Two phase multiplier w.r.t. Chisholm&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  SI.Area A_cross=max(MIN, IN_con.A_cross) &quot;Cross sectional area&quot;;
  SI.Diameter d_hyd=max(MIN, 4*A_cross/max(MIN, IN_con.perimeter)) 
    &quot;Hydraulic diameter&quot;;

  Real mdot_A=abs(m_flow)/A_cross &quot;Mass flux&quot;;
  Real x_flow=max(0, min(1, abs(IN_var.x_flow))) &quot;Mass flow rate quality&quot;;

  //SOURCE_1: p.357, Appendix 1: Considering Darcy friction factor (lambda_FRI) of smooth pipes for overall flow regime
  Real n_exp=0.2 &quot;Exponent for Reynolds number (lambda_FRI= A/Re^n)&quot;;

  //SOURCE_1: p.349, eq. 21: Considering effect of physical properties (failure in SOURCE_2)
  Real gamma=max(1, abs(IN_var.rho_l/max(MIN, IN_var.rho_g))^0.5*(IN_var.eta_g/
      max(MIN, IN_var.eta_l))^(n_exp/2));

  //SOURCE: p. 353, tab. 2: Considering effect of mass flux on two phase multiplier
  Real B_gamma_1=SMOOTH(
      450,
      550,
      mdot_A)*4.8 + SMOOTH(
      550,
      450,
      mdot_A)*2400/max(MIN, mdot_A) - SMOOTH(
      1950,
      1850,
      mdot_A)*2400/max(MIN, mdot_A) + SMOOTH(
      1950,
      1850,
      mdot_A)*55/max(MIN, mdot_A^0.5) &quot;Coefficient B for gamma &lt;= 9.5&quot;;
  Real B_gamma_2=SMOOTH(
      550,
      650,
      mdot_A)*520/max(1, max(9.5, gamma)*mdot_A^0.5) + SMOOTH(
      650,
      550,
      mdot_A)*21/max(9.5, gamma) &quot;Coefficient B for 9.5 &lt;= gamma &lt;= 28&quot;;
  Real B_gamma=SMOOTH(
      9.0,
      10,
      gamma)*B_gamma_1 + SMOOTH(
      10,
      9.0,
      gamma)*B_gamma_2 - SMOOTH(
      28.5,
      27.7,
      gamma)*B_gamma_2 + SMOOTH(
      28.5,
      27.5,
      gamma)*15000/max(MIN, gamma^2*mdot_A^0.5) &quot;Coefficient B for gamma&quot;;

  //SOURCE_1: p. 350, eq. 24/26: Considering two phase multiplier w.r.t. Chisholm
algorithm 
  phi := 1 + (gamma^2 - 1)*(B_gamma*x_flow^((2 - n_exp)/2)*(1 - x_flow)^((2 -
    n_exp)/2) + x_flow^(2 - n_exp));
end TwoPhaseMultiplierChisholm;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.twophasedensity"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.TwoPhaseDensity</h1>
<p><strong>Calculation of mean density for two phase flow</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>The gaseous and the liquid part of a fluid in a two phase flow are often discontinuously distributed. This complex behaviour is simplified for engineering calculations. The two phase flow of different fluid flow situations (e.g., bubble or stratified flow) is modelled as if the gaseous and the liquid phase are continuously distributed.</p>
<p>A <strong>mean density</strong> assuming a continuous distribution out of a discontinuous two phase fluid flow situation can be calculated with a <strong>homogeneous or a heterogeneous approach</strong> (see <a href="Modelica_Fluid_Dissipation_PressureLoss_StraightPipe.html#Modelica.Fluid.Dissipation.PressureLoss.StraightPipe.dp_twoPhaseOverall_DP">dp_twoPhaseOverall_DP</a>).</p>
<p>The following <strong>modelling approaches</strong> can be used to calculate the mean density of two phase flow:</p>
<ul>
<li><strong>homogeneous density</strong> (homogeneous approach)</li>
<li><strong>momentum flux density</strong> (heterogeneous approach)</li>
<li><strong>kinetic energy flow density</strong> (heterogeneous approach)</li>
</ul>
<p>The heterogeneous approaches are analytically derived by minimising the momentum flux or the kinetic energy flow assuming implicitly that the two-phase flow will tend towards the minimum of this quantity.</p>
<h3 id="references">References</h3>
<dl>
<dt>VDI:</dt>
<dd><p><strong>VDI - Wärmeatlas: Berechnungsblätter für den Wärmeübergang</strong>. Springer Verlag, 10th edition, 2006.</p>
</dd>
</dl>
<p>::</p>
<h2 id="inputs-6">Inputs</h2>
<table>
<col width="50%" />
<col width="11%" />
<col width="15%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_g</td>
<td align="left">
</td>
<td align="left">Density of gaseous phase [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_l</td>
<td align="left">
</td>
<td align="left">Density of liquid phase [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">epsilon_A</td>
<td align="left">
</td>
<td align="left">Void fraction (cross sectional averaged)</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">x_flow</td>
<td align="left">
</td>
<td align="left">Mass flow rate quality</td>
</tr>
<tr class="odd">
<td align="left">Choices</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.Roughness">Roughness</a></td>
<td align="left">voidFractionApproach</td>
<td align="left">Modelica.Fluid.Dissipation.U...</td>
<td align="left">Choice of void fraction approach</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">massFlowRateCorrection</td>
<td align="left">false</td>
<td align="left">Consider heterogeneous mass flow rate correction</td>
</tr>
</tbody>
</table>
<h2 id="outputs-6">Outputs</h2>
<table>
<col width="53%" />
<col width="10%" />
<col width="35%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_2ph</td>
<td align="left">Mean density of two phase flow [kg/m3]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>function TwoPhaseDensity 
  &quot;Calculation of mean density for two phase flow&quot;

  //SOURCE_1: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.
  input Modelica.Fluid.Dissipation.Utilities.Types.Roughness
    voidFractionApproach=
      Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous 
    &quot;Choice of void fraction approach&quot;;

  //SOURCE_3: p.52, eq. 4.6: heterogenous effects on momentum pressure loss considered through corrected mass flow rate
  input Boolean massFlowRateCorrection=false 
    &quot;Consider heterogeneous mass flow rate correction&quot;;

  input SI.Density rho_g(min=Modelica.Constants.eps) &quot;Density of gaseous phase&quot;;
  input SI.Density rho_l(min=Modelica.Constants.eps) &quot;Density of liquid phase&quot;;
  input Real epsilon_A(min=0,max=1) &quot;Void fraction (cross sectional averaged)&quot;;
  input Real x_flow(min=0,max=1) &quot;Mass flow rate quality&quot;;

  output SI.Density rho_2ph &quot;Mean density of two phase flow&quot;;
protected 
  Real MIN=Modelica.Constants.eps;

  Real epsilonA=min(1, max(0, abs(epsilon_A))) 
    &quot;Void fraction (cross sectional averaged)&quot;;
  Real xflow=min(1, max(0, abs(x_flow))) &quot;Mass flow rate quality&quot;;

  //SOURCE_1: p.Lba 3, eq. 17: Mean two phase density assuming homogeneous approach
  SI.Density rho_hom=1/max(MIN, x_flow/max(MIN, rho_g) + (1 - x_flow)/max(MIN,
      rho_l));
  //SOURCE_1: p.Lbb 7, tab. 2: Mean two phase density assuming momentum flux approach
  SI.Density rho_mom=1/max(MIN, (x_flow)^2/max(MIN, rho_g*epsilonA) + (1 -
      x_flow)^2/max(MIN, rho_l*(1 - epsilonA)));
  //SOURCE_1: p.Lbb 7, tab. 2: Mean two phase density assuming kinetic energy flow approach from Zivi (corrected formula!)
  SI.Density rho_kin=1/max(MIN, rho_hom*(x_flow^3/max(MIN, rho_g^2*epsilonA^2)
       + (1 - x_flow)^3/max(MIN, rho_l^2*(1 - epsilonA)^2)));

algorithm 
  rho_2ph := if massFlowRateCorrection then rho_hom else if 
    voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous then 
          rho_hom else if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Momentum then 
          rho_mom else if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Energy then 
          rho_kin else MIN;

end TwoPhaseDensity;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.voidfraction"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.VoidFraction</h1>
<p><strong>Calculation of (cross sectional) void fraction for two phase flow</strong></p>
<h2 id="inputs-7">Inputs</h2>
<table>
<col width="50%" />
<col width="9%" />
<col width="12%" />
<col width="26%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">crossSectionalAveraged</td>
<td align="left">true</td>
<td align="left">true == cross sectional averaged void fraction | false == volumetric</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_g</td>
<td align="left">
</td>
<td align="left">Density of gaseous phase [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_l</td>
<td align="left">
</td>
<td align="left">Density of liquid phase [kg/m3]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">x_flow</td>
<td align="left">0</td>
<td align="left">Mass flow rate quality</td>
</tr>
<tr class="odd">
<td align="left">Choices</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach">VoidFractionApproach</a></td>
<td align="left">voidFractionApproach</td>
<td align="left">Dissipation.Utilities.Types....</td>
<td align="left">Choice of void fraction approach</td>
</tr>
</tbody>
</table>
<h2 id="outputs-7">Outputs</h2>
<table>
<col width="12%" />
<col width="19%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">epsilon</td>
<td align="left">Void fraction</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">slipRatio</td>
<td align="left">Slip ratio</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>function VoidFraction 
  &quot;Calculation of (cross sectional) void fraction for two phase flow&quot;

  //SOURCE_1: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.
  //SOURCE_2: Thome, J.R., Engineering Data Book 3, Swiss Federal Institute of Technology Lausanne (EPFL), 2009.

  input Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach
    voidFractionApproach=Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous 
    &quot;Choice of void fraction approach&quot;;

  input Boolean crossSectionalAveraged=true 
    &quot;true == cross sectional averaged void fraction | false == volumetric&quot;;

  input SI.Density rho_g(min=Modelica.Constants.eps) &quot;Density of gaseous phase&quot;;
  input SI.Density rho_l(min=Modelica.Constants.eps) &quot;Density of liquid phase&quot;;
  input Real x_flow(
    min=0,
    max=1) = 0 &quot;Mass flow rate quality&quot;;

  output Real epsilon &quot;Void fraction&quot;;
  output Real slipRatio &quot;Slip ratio&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  Real xflow=min(1, max(0, abs(x_flow))) &quot;Mass flow rate quality&quot;;

  Real SR=Dissipation.Utilities.Functions.PressureLoss.TwoPhase.SlipRatio(
      voidFractionApproach,
      rho_g,
      rho_l,
      xflow) &quot;Slip ratio for void fraction approach&quot;;

  //SOURCE_2: p.17-5, eq. 17.2.5: (Heterogeneous) cross sectional void fraction [epsilon_A=A_g/(A_g+A_l)]
  Real epsilon_A=rho_l*x_flow/max(MIN, rho_l*x_flow + rho_g*(1 - x_flow)*SR);

algorithm 
  epsilon := if crossSectionalAveraged then epsilon_A else epsilon_A/((1/max(
    MIN, SR))*(1 - epsilon_A) + epsilon_A);
  slipRatio := SR;
end VoidFraction;</code></pre>
<hr />
<h1 id="modelica.fluid.dissipation.utilities.functions.pressureloss.twophase.slipratio"><a href="Modelica_Fluid_Dissipation_Utilities_Functions_PressureLoss_TwoPhase.html#Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase">Modelica.Fluid.Dissipation.Utilities.Functions.PressureLoss.TwoPhase</a>.SlipRatio</h1>
<p><strong>Calculation of (analytical/empirical) slip ratio</strong></p>
<h2 id="inputs-8">Inputs</h2>
<table>
<col width="59%" />
<col width="10%" />
<col width="15%" />
<col width="15%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_g</td>
<td align="left">
</td>
<td align="left">Density of gaseous phase [kg/m3]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Density">Density</a></td>
<td align="left">rho_l</td>
<td align="left">
</td>
<td align="left">Density of liquid phase [kg/m3]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">x_flow</td>
<td align="left">0</td>
<td align="left">Mass flow rate quality</td>
</tr>
<tr class="even">
<td align="left">Choices</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach">VoidFractionApproach</a></td>
<td align="left">voidFractionApproach</td>
<td align="left">Dissipation.Utilities.Types....</td>
<td align="left">Choice of void fraction approach</td>
</tr>
</tbody>
</table>
<h2 id="outputs-8">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">SR</td>
<td align="left">Slip ratio</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>function SlipRatio &quot;Calculation of (analytical/empirical) slip ratio&quot;

  //SOURCE_1: VDI-Waermeatlas, 10th edition, Springer-Verlag, 2006.
  //SOURCE_2: Thome, J.R., Engineering Data Book 3, Swiss Federal Institute of Technology Lausanne (EPFL), 2009.
  //SOURCE 3: J.M. Jensen and H. Tummescheit. Moving boundary models for dynamic simulations of two-phase flows. In Proceedings of the 2nd International Modelica Conference, pp. 235-244, Oberpfaffenhofen, Germany, 2002. The Modelica Association.

  input Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach
    voidFractionApproach=Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous 
    &quot;Choice of void fraction approach&quot;;

  input SI.Density rho_g(min=Modelica.Constants.eps) &quot;Density of gaseous phase&quot;;
  input SI.Density rho_l(min=Modelica.Constants.eps) &quot;Density of liquid phase&quot;;
  input Real x_flow=0 &quot;Mass flow rate quality&quot;;

  output Real SR &quot;Slip ratio&quot;;

protected 
  Real MIN=Modelica.Constants.eps;

  //SOURCE_1: p.Lba 3, sec. 3.2
  Real SR_hom=1 &quot;Slip ratio w.r.t. homogeneous approach&quot;;
  //SOURCE_1: p.17-6, eq. 17.3.4
  Real SR_mom=abs(rho_l/max(MIN, rho_g))^0.5 
    &quot;Slip ratio w.r.t. momentum flux approach (heterogeneous)&quot;;
  //SOURCE_1: p.17-6, eq. 17.3.13
  Real SR_kin=abs(rho_l/max(MIN, rho_g))^(1/3) 
    &quot;Slip ratio w.r.t. kinetic energy flow approach from Zivi (heterogeneous)&quot;;
  //SOURCE_1: p.17-6, eq. 17.3.13
  Real SR_chi=(1 - x_flow*(1 - abs(rho_l)/max(MIN, abs(rho_g))))^0.5 
    &quot;Empirical slip ratio w.r.t. momentum flux approach from Chisholm (heterogeneous)&quot;;

algorithm 
  SR := if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Homogeneous then 
          SR_hom else if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Momentum then 
          SR_mom else if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Energy then 
          SR_kin else if voidFractionApproach == Modelica.Fluid.Dissipation.Utilities.Types.VoidFractionApproach.Chisholm then 
          SR_chi else 1;
end SlipRatio;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:23 2010.</p>
</body>
</html>
