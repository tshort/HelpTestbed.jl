<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Fluid.Pipes.BaseClasses</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Fluid.Pipes.BaseClasses</h1>
</div>
<h1 id="modelica.fluid.pipes.baseclasses"><a href="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes">Modelica.Fluid.Pipes</a>.BaseClasses</h1>
<p><strong>Base classes used in the Pipes package (only of interest to build new component models)</strong></p>
<h2 id="information">Information</h2>
<p>Extends from <a href="Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage">Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="71%" />
<col width="28%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipeS.png" alt="image6" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe">PartialStraightPipe</a></td>
<td align="left">Base class for straight pipe models</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlowS.png" alt="image7" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow">PartialTwoPortFlow</a></td>
<td align="left">Base class for distributed flow models</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.FlowModelsS.png" alt="image8" /> <a href="Modelica_Fluid_Pipes_BaseClasses_FlowModels.html#Modelica.Fluid.Pipes.BaseClasses.FlowModels">FlowModels</a></td>
<td align="left">Flow models for pipes, including wall friction, static head and momentum flow</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.FlowModelsS.png" alt="image9" /> <a href="Modelica_Fluid_Pipes_BaseClasses_HeatTransfer.html#Modelica.Fluid.Pipes.BaseClasses.HeatTransfer">HeatTransfer</a></td>
<td align="left">Heat transfer for flow models</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.FlowModelsS.png" alt="image10" /> <a href="Modelica_Fluid_Pipes_BaseClasses_CharacteristicNumbers.html#Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers">CharacteristicNumbers</a></td>
<td align="left">Functions to compute characteristic numbers</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Pipes.BaseClasses.FlowModelsS.png" alt="image11" /> <a href="Modelica_Fluid_Pipes_BaseClasses_WallFriction.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction">WallFriction</a></td>
<td align="left">Different variants for pressure drops due to pipe wall friction</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image12-modelica.fluid.pipes.baseclasses.partialstraightpipe"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipeI.png" alt="image12" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses">Modelica.Fluid.Pipes.BaseClasses</a>.PartialStraightPipe</h1>
<p><strong>Base class for straight pipe models</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>Base class for one dimensional flow models. It specializes a PartialTwoPort with a parameter interface and icon graphics.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort">Modelica.Fluid.Interfaces.PartialTwoPort</a> (Partial component with two ports).</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="21%" />
<col width="35%" />
<col width="12%" />
<col width="30%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">nParallel</td>
<td align="left">1</td>
<td align="left">Number of identical parallel pipes</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">
</td>
<td align="left">Length [m]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">isCircular</td>
<td align="left">true</td>
<td align="left">= true if cross sectional area is circular</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter</td>
<td align="left">
</td>
<td align="left">Diameter of circular pipe [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Area">Area</a></td>
<td align="left">crossArea</td>
<td align="left">Modelica.Constants.pi*diamet...</td>
<td align="left">Inner cross section area [m2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">perimeter</td>
<td align="left">Modelica.Constants.pi*diameter</td>
<td align="left">Inner perimeter [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Height">Height</a></td>
<td align="left">roughness</td>
<td align="left">2.5e-5</td>
<td align="left">Average height of surface asperities (default: smooth steel pipe) [m]</td>
</tr>
<tr class="even">
<td align="left">Static head</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">height_ab</td>
<td align="left">0</td>
<td align="left">Height(port_b) - Height(port_a) [m]</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>partial model PartialStraightPipe 
  &quot;Base class for straight pipe models&quot;
  extends Modelica.Fluid.Interfaces.PartialTwoPort;

  // Geometry

  // Note: define nParallel as Real to support inverse calculations
  parameter Real nParallel(min=1)=1 &quot;Number of identical parallel pipes&quot;;
  parameter SI.Length length &quot;Length&quot;;
  parameter Boolean isCircular=true 
    &quot;= true if cross sectional area is circular&quot;;
  parameter SI.Diameter diameter &quot;Diameter of circular pipe&quot;;
  parameter SI.Area crossArea=Modelica.Constants.pi*diameter*diameter/4 
    &quot;Inner cross section area&quot;;
  parameter SI.Length perimeter=Modelica.Constants.pi*diameter 
    &quot;Inner perimeter&quot;;
  parameter SI.Height roughness=2.5e-5 
    &quot;Average height of surface asperities (default: smooth steel pipe)&quot;;
  final parameter SI.Volume V=crossArea*length*nParallel &quot;volume size&quot;;

  // Static head
  parameter SI.Length height_ab=0 &quot;Height(port_b) - Height(port_a)&quot;;

  // Pressure loss
  replaceable model FlowModel =
    Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow
    constrainedby 
    Modelica.Fluid.Pipes.BaseClasses.FlowModels.PartialStaggeredFlowModel 
    &quot;Wall friction, gravity, momentum flow&quot;;

equation 
  assert(length &gt;= height_ab, &quot;Parameter length must be greater or equal height_ab.&quot;);

end PartialStraightPipe;</code></pre>
<hr />
<h1 id="image13-modelica.fluid.pipes.baseclasses.partialtwoportflow"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlowI.png" alt="image13" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses">Modelica.Fluid.Pipes.BaseClasses</a>.PartialTwoPortFlow</h1>
<p><strong>Base class for distributed flow models</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Base class for distributed flow models. The total volume is split into nNodes segments along the flow path. The default value is nNodes=2.</p>
<p><strong>Mass and Energy balances</strong></p>
<p>The mass and energy balances are inherited from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialDistributedVolume">Interfaces.PartialDistributedVolume</a>. One total mass and one energy balance is formed across each segment according to the finite volume approach. Substance mass balances are added if the medium contains more than one component.</p>
<p>An extending model needs to define the geometry and the difference in heights between the flow segments (static head). Moreover it needs to define two vectors of source terms for the distributed energy balance:</p>
<ul>
<li><code>Qb_flows[nNodes]</code>, the heat flow source terms, e.g., conductive heat flows across segment boundaries, and</li>
<li><code>Wb_flows[nNodes]</code>, the work source terms.</li>
</ul>
<p><strong>Momentum balance</strong></p>
<p>The momentum balance is determined by the <strong><code>FlowModel</code></strong> component, which can be replaced with any model extended from <a href="Modelica_Fluid_Pipes_BaseClasses_FlowModels.html#Modelica.Fluid.Pipes.BaseClasses.FlowModels.PartialStaggeredFlowModel">BaseClasses.FlowModels.PartialStaggeredFlowModel</a>. The default setting is <a href="Modelica_Fluid_Pipes_BaseClasses_FlowModels.html#Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow">DetailedPipeFlow</a>. This considers</p>
<ul>
<li>pressure drop due to friction and other dissipative losses, and</li>
<li>gravity effects for non-horizontal devices.</li>
<li>variation of flow velocity along the flow path, which occur due to changes in the cross sectional area or the fluid density, provided that <code>flowModel.use_Ib_flows</code> is true.</li>
</ul>
<p><strong>Model Structure</strong></p>
<p>The momentum balances are formulated across the segment boundaries along the flow path according to the staggered grid approach. The configurable <strong><code>modelStructure</code></strong> determines the formulation of the boundary conditions at <code>port_a</code> and <code>port_b</code>. The options include (default: av_vb):</p>
<ul>
<li><code>av_vb</code>: Symmetric setting with nNodes-1 momentum balances between nNodes flow segments. The ports <code>port_a</code> and <code>port_b</code> expose the first and the last thermodynamic state, respectively. Connecting two or more flow devices therefore may result in high-index DAEs for the pressures of connected flow segments.</li>
<li><code>a_v_b</code>: Alternative symmetric setting with nNodes+1 momentum balances across nNodes flow segments. Half momentum balances are placed between <code>port_a</code> and the first flow segment as well as between the last flow segment and <code>port_b</code>. Connecting two or more flow devices therefore results in algebraic pressures at the ports. The specification of good start values for the port pressures is essential for the solution of large nonlinear equation systems.</li>
<li><code>av_b</code>: Unsymmetric setting with nNodes momentum balances, one between nth volume and <code>port_b</code>, potential pressure state at <code>port_a</code></li>
<li><code>a_vb</code>: Unsymmetric setting with nNodes momentum balance, one between first volume and <code>port_a</code>, potential pressure state at <code>port_b</code></li>
</ul>
<p>When connecting two components, e.g., two pipes, the momentum balance across the connection point reduces to</p>
<pre><code>pipe1.port_b.p = pipe2.port_a.p</code></pre>
<p>This is only true if the flow velocity remains the same on each side of the connection. Consider using a fitting for any significant change in diameter or fluid density, if the resulting effects, such as change in kinetic energy, cannot be neglected. This also allows for taking into account friction losses with respect to the actual geometry of the connection point.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort">Modelica.Fluid.Interfaces.PartialTwoPort</a> (Partial component with two ports), <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialDistributedVolume">Modelica.Fluid.Interfaces.PartialDistributedVolume</a> (Base class for distributed volume models).</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="34%" />
<col width="29%" />
<col width="10%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">n</td>
<td align="left">nNodes</td>
<td align="left">Number of discrete volumes</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Volume">Volume</a></td>
<td align="left">fluidVolumes[n]</td>
<td align="left">{crossAreas[i]*lengths[i] fo...</td>
<td align="left">Discretized volume, determine in inheriting class [m3]</td>
</tr>
<tr class="even">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">nParallel</td>
<td align="left">1</td>
<td align="left">Number of identical parallel flow devices</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">lengths[n]</td>
<td align="left">
</td>
<td align="left">lengths of flow segments [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Area">Area</a></td>
<td align="left">crossAreas[n]</td>
<td align="left">
</td>
<td align="left">cross flow areas of flow segments [m2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">dimensions[n]</td>
<td align="left">
</td>
<td align="left">hydraulic diameters of flow segments [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Height">Height</a></td>
<td align="left">roughnesses[n]</td>
<td align="left">
</td>
<td align="left">Average heights of surface asperities [m]</td>
</tr>
<tr class="even">
<td align="left">Static head</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">dheights[n]</td>
<td align="left">zeros(n)</td>
<td align="left">Differences in heigths of flow segments [m]</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">energyDynamics</td>
<td align="left">system.energyDynamics</td>
<td align="left">Formulation of energy balances</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">massDynamics</td>
<td align="left">system.massDynamics</td>
<td align="left">Formulation of mass balances</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">system.momentumDynamics</td>
<td align="left">Formulation of momentum balances</td>
</tr>
<tr class="even">
<td align="left"><strong>Initialization</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_a_start</td>
<td align="left">system.p_start</td>
<td align="left">Start value of pressure at port a [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_b_start</td>
<td align="left">p_a_start</td>
<td align="left">Start value of pressure at port b [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_T_start</td>
<td align="left">true</td>
<td align="left">Use T_start if true, otherwise h_start</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature">Temperature</a></td>
<td align="left">T_start</td>
<td align="left">if use_T_start then system.T...</td>
<td align="left">Start value of temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_start</td>
<td align="left">if use_T_start then Medium.s...</td>
<td align="left">Start value of specific enthalpy [J/kg]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">X_start[Medium.nX]</td>
<td align="left">Medium.X_default</td>
<td align="left">Start value of mass fractions m_i/m [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_start[Medium.nC]</td>
<td align="left">fill(0, Medium.nC)</td>
<td align="left">Start value of trace substances</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Start value for mass flow rate [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">nNodes</td>
<td align="left">2</td>
<td align="left">Number of discrete flow volumes</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.ModelStructure">ModelStructure</a></td>
<td align="left">modelStructure</td>
<td align="left">Types.ModelStructure.av_vb</td>
<td align="left">Determines whether flow or volume models are present at the ports</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useLumpedPressure</td>
<td align="left">false</td>
<td align="left">=true to lump pressure states together</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useInnerPortProperties</td>
<td align="left">false</td>
<td align="left">=true to take port properties for flow models from internal control volumes</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>partial model PartialTwoPortFlow 
  &quot;Base class for distributed flow models&quot;

  import Modelica.Fluid.Types.ModelStructure;

  // extending PartialTwoPort
  extends Modelica.Fluid.Interfaces.PartialTwoPort(
    final port_a_exposesState = (modelStructure == ModelStructure.av_b) or (modelStructure == ModelStructure.av_vb),
    final port_b_exposesState = (modelStructure == ModelStructure.a_vb) or (modelStructure == ModelStructure.av_vb));

  // distributed volume model
  extends Modelica.Fluid.Interfaces.PartialDistributedVolume(
    final n = nNodes,
    final fluidVolumes = {crossAreas[i]*lengths[i] for i in 1:n}*nParallel);

  // Geometry parameters
  parameter Real nParallel(min=1)=1 &quot;Number of identical parallel flow devices&quot;;
  parameter SI.Length[n] lengths &quot;lengths of flow segments&quot;;
  parameter SI.Area[n] crossAreas &quot;cross flow areas of flow segments&quot;;
  parameter SI.Length[n] dimensions &quot;hydraulic diameters of flow segments&quot;;
  parameter SI.Height[n] roughnesses &quot;Average heights of surface asperities&quot;;

  // Static head
  parameter SI.Length[n] dheights=zeros(n) 
    &quot;Differences in heigths of flow segments&quot;;

  // Assumptions
  parameter Types.Dynamics momentumDynamics=system.momentumDynamics 
    &quot;Formulation of momentum balances&quot;;

  // Initialization
  parameter Medium.MassFlowRate m_flow_start = system.m_flow_start 
    &quot;Start value for mass flow rate&quot;;

  // Discretization
  parameter Integer nNodes(min=1)=2 &quot;Number of discrete flow volumes&quot;;

  parameter Types.ModelStructure modelStructure=Types.ModelStructure.av_vb 
    &quot;Determines whether flow or volume models are present at the ports&quot;;

  parameter Boolean useLumpedPressure=false 
    &quot;=true to lump pressure states together&quot;;
  final parameter Integer nFM=if useLumpedPressure then nFMLumped else nFMDistributed 
    &quot;number of flow models in flowModel&quot;;
  final parameter Integer nFMDistributed=if modelStructure==Types.ModelStructure.a_v_b then n+1 else if (modelStructure==Types.ModelStructure.a_vb or modelStructure==Types.ModelStructure.av_b) then n else n-1;
  final parameter Integer nFMLumped=if modelStructure==Types.ModelStructure.a_v_b then 2 else 1;
  final parameter Integer iLumped=integer(n/2)+1 
    &quot;Index of control volume with representative state if useLumpedPressure&quot;;

  // Advanced model options
  parameter Boolean useInnerPortProperties=false 
    &quot;=true to take port properties for flow models from internal control volumes&quot;;
  Medium.ThermodynamicState state_a &quot;state defined by volume outside port_a&quot;;
  Medium.ThermodynamicState state_b &quot;state defined by volume outside port_b&quot;;
  Medium.ThermodynamicState[nFM+1] statesFM &quot;state vector for flowModel model&quot;;

  // Pressure loss model
  replaceable model FlowModel =
    Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow
    constrainedby 
    Modelica.Fluid.Pipes.BaseClasses.FlowModels.PartialStaggeredFlowModel 
    &quot;Wall friction, gravity, momentum flow&quot;;
  FlowModel flowModel(
          redeclare final package Medium = Medium,
          final n=nFM+1,
          final states=statesFM,
          final vs=vsFM,
          final momentumDynamics=momentumDynamics,
          final allowFlowReversal=allowFlowReversal,
          final p_a_start=p_a_start,
          final p_b_start=p_b_start,
          final m_flow_start=m_flow_start,
          final nParallel=nParallel,
          final pathLengths=pathLengths,
          final crossAreas=crossAreasFM,
          final dimensions=dimensionsFM,
          final roughnesses=roughnessesFM,
          final dheights=dheightsFM,
          final g=system.g) &quot;Flow model&quot;;

  // Flow quantities
  Medium.MassFlowRate[n+1] m_flows(
     each min=if allowFlowReversal then -Modelica.Constants.inf else 0,
     each start=m_flow_start) 
    &quot;Mass flow rates of fluid across segment boundaries&quot;;
  Medium.MassFlowRate[n+1, Medium.nXi] mXi_flows 
    &quot;Independent mass flow rates across segment boundaries&quot;;
  Medium.MassFlowRate[n+1, Medium.nC] mC_flows 
    &quot;Trace substance mass flow rates across segment boundaries&quot;;
  Medium.EnthalpyFlowRate[n+1] H_flows 
    &quot;Enthalpy flow rates of fluid across segment boundaries&quot;;

  SI.Velocity[n] vs = {0.5*(m_flows[i] + m_flows[i+1])/mediums[i].d/crossAreas[i] for i in 1:n}/nParallel 
    &quot;mean velocities in flow segments&quot;;

  // Model structure dependent flow geometry
protected 
  SI.Length[nFM] pathLengths &quot;Lengths along flow path&quot;;
  SI.Length[nFM] dheightsFM &quot;Differences in heights between flow segments&quot;;
  SI.Area[nFM+1] crossAreasFM &quot;Cross flow areas of flow segments&quot;;
  SI.Velocity[nFM+1] vsFM &quot;Mean velocities in flow segments&quot;;
  SI.Length[nFM+1] dimensionsFM &quot;Hydraulic diameters of flow segments&quot;;
  SI.Height[nFM+1] roughnessesFM &quot;Average heights of surface asperities&quot;;

equation 
  assert(nNodes &gt; 1 or modelStructure &lt;&gt; ModelStructure.av_vb,
     &quot;nNodes needs to be at least 2 for modelStructure av_vb, as flow model disappears otherwise!&quot;);
  // staggered grid discretization of geometry for flowModel, depending on modelStructure
  if useLumpedPressure then
    if modelStructure &lt;&gt; ModelStructure.a_v_b then
      pathLengths[1] = sum(lengths);
      dheightsFM[1] = sum(dheights);
      if n == 1 then
        crossAreasFM[1:2] = {crossAreas[1], crossAreas[1]};
        dimensionsFM[1:2] = {dimensions[1], dimensions[1]};
        roughnessesFM[1:2] = {roughnesses[1], roughnesses[1]};
      else // n &gt; 1
        crossAreasFM[1:2] = {sum(crossAreas[1:iLumped-1])/(iLumped-1), sum(crossAreas[iLumped:n])/(n-iLumped+1)};
        dimensionsFM[1:2] = {sum(dimensions[1:iLumped-1])/(iLumped-1), sum(dimensions[iLumped:n])/(n-iLumped+1)};
        roughnessesFM[1:2] = {sum(roughnesses[1:iLumped-1])/(iLumped-1), sum(roughnesses[iLumped:n])/(n-iLumped+1)};
      end if;
    else
      if n == 1 then
        pathLengths[1:2] = {lengths[1]/2, lengths[1]/2};
        dheightsFM[1:2] = {dheights[1]/2, dheights[1]/2};
        crossAreasFM[1:3] = {crossAreas[1], crossAreas[1], crossAreas[1]};
        dimensionsFM[1:3] = {dimensions[1], dimensions[1], dimensions[1]};
        roughnessesFM[1:3] = {roughnesses[1], roughnesses[1], roughnesses[1]};
      else // n &gt; 1
        pathLengths[1:2] = {sum(lengths[1:iLumped-1]), sum(lengths[iLumped:n])};
        dheightsFM[1:2] = {sum(dheights[1:iLumped-1]), sum(dheights[iLumped:n])};
        crossAreasFM[1:3] = {sum(crossAreas[1:iLumped-1])/(iLumped-1), sum(crossAreas)/n, sum(crossAreas[iLumped:n])/(n-iLumped+1)};
        dimensionsFM[1:3] = {sum(dimensions[1:iLumped-1])/(iLumped-1), sum(dimensions)/n, sum(dimensions[iLumped:n])/(n-iLumped+1)};
        roughnessesFM[1:3] = {sum(roughnesses[1:iLumped-1])/(iLumped-1), sum(roughnesses)/n, sum(roughnesses[iLumped:n])/(n-iLumped+1)};
      end if;
    end if;
  else
    if modelStructure == ModelStructure.av_vb then
      //nFM = n-1;
      if n == 2 then
        pathLengths[1] = lengths[1] + lengths[2];
        dheightsFM[1] = dheights[1] + dheights[2];
      else
        pathLengths[1:n-1] = cat(1, {lengths[1] + 0.5*lengths[2]}, 0.5*(lengths[2:n-2] + lengths[3:n-1]), {0.5*lengths[n-1] + lengths[n]});
        dheightsFM[1:n-1] = cat(1, {dheights[1] + 0.5*dheights[2]}, 0.5*(dheights[2:n-2] + dheights[3:n-1]), {0.5*dheights[n-1] + dheights[n]});
      end if;
      crossAreasFM[1:n] = crossAreas;
      dimensionsFM[1:n] = dimensions;
      roughnessesFM[1:n] = roughnesses;
    elseif modelStructure == ModelStructure.av_b then
      //nFM = n
      pathLengths[1:n] = lengths;
      dheightsFM[1:n] = dheights;
      crossAreasFM[1:n+1] = cat(1, crossAreas[1:n], {crossAreas[n]});
      dimensionsFM[1:n+1] = cat(1, dimensions[1:n], {dimensions[n]});
      roughnessesFM[1:n+1] = cat(1, roughnesses[1:n], {roughnesses[n]});
    elseif modelStructure == ModelStructure.a_vb then
      //nFM = n
      pathLengths[1:n] = lengths;
      dheightsFM[1:n] = dheights;
      crossAreasFM[1:n+1] = cat(1, {crossAreas[1]}, crossAreas[1:n]);
      dimensionsFM[1:n+1] = cat(1, {dimensions[1]}, dimensions[1:n]);
      roughnessesFM[1:n+1] = cat(1, {roughnesses[1]}, roughnesses[1:n]);
    elseif modelStructure == ModelStructure.a_v_b then
      //nFM = n+1;
      pathLengths[1:n+1] = cat(1, {0.5*lengths[1]}, 0.5*(lengths[1:n-1] + lengths[2:n]), {0.5*lengths[n]});
      dheightsFM[1:n+1] = cat(1, {0.5*dheights[1]}, 0.5*(dheights[1:n-1] + dheights[2:n]), {0.5*dheights[n]});
      crossAreasFM[1:n+2] = cat(1, {crossAreas[1]}, crossAreas[1:n], {crossAreas[n]});
      dimensionsFM[1:n+2] = cat(1, {dimensions[1]}, dimensions[1:n], {dimensions[n]});
      roughnessesFM[1:n+2] = cat(1, {roughnesses[1]}, roughnesses[1:n], {roughnesses[n]});
    else
      assert(true, &quot;Unknown model structure&quot;);
    end if;
  end if;

  // Source/sink terms for mass and energy balances
  for i in 1:n loop
    mb_flows[i] = m_flows[i] - m_flows[i + 1];
    mbXi_flows[i, :] = mXi_flows[i, :] - mXi_flows[i + 1, :];
    mbC_flows[i, :]  = mC_flows[i, :]  - mC_flows[i + 1, :];
    Hb_flows[i] = H_flows[i] - H_flows[i + 1];
  end for;

  // Distributed flow quantities, upwind discretization
  for i in 2:n loop
    H_flows[i] = semiLinear(m_flows[i], mediums[i - 1].h, mediums[i].h);
    mXi_flows[i, :] = semiLinear(m_flows[i], mediums[i - 1].Xi, mediums[i].Xi);
    mC_flows[i, :]  = semiLinear(m_flows[i], Cs[i - 1, :],         Cs[i, :]);
  end for;
  H_flows[1] = semiLinear(port_a.m_flow, inStream(port_a.h_outflow), mediums[1].h);
  H_flows[n + 1] = -semiLinear(port_b.m_flow, inStream(port_b.h_outflow), mediums[n].h);
  mXi_flows[1, :] = semiLinear(port_a.m_flow, inStream(port_a.Xi_outflow), mediums[1].Xi);
  mXi_flows[n + 1, :] = -semiLinear(port_b.m_flow, inStream(port_b.Xi_outflow), mediums[n].Xi);
  mC_flows[1, :] = semiLinear(port_a.m_flow, inStream(port_a.C_outflow), Cs[1, :]);
  mC_flows[n + 1, :] = -semiLinear(port_b.m_flow, inStream(port_b.C_outflow), Cs[n, :]);

  // Boundary conditions
  port_a.m_flow    = m_flows[1];
  port_b.m_flow    = -m_flows[n + 1];
  port_a.h_outflow = mediums[1].h;
  port_b.h_outflow = mediums[n].h;
  port_a.Xi_outflow = mediums[1].Xi;
  port_b.Xi_outflow = mediums[n].Xi;
  port_a.C_outflow = Cs[1, :];
  port_b.C_outflow = Cs[n, :];
  // The two equations below are not correct if C is stored in volumes.
  // C should be treated the same way as Xi.
  //port_a.C_outflow = inStream(port_b.C_outflow);
  //port_b.C_outflow = inStream(port_a.C_outflow);

  if useInnerPortProperties and n &gt; 0 then
    state_a = Medium.setState_phX(port_a.p, mediums[1].h, mediums[1].Xi);
    state_b = Medium.setState_phX(port_b.p, mediums[n].h, mediums[n].Xi);
  else
    state_a = Medium.setState_phX(port_a.p, inStream(port_a.h_outflow), inStream(port_a.Xi_outflow));
    state_b = Medium.setState_phX(port_b.p, inStream(port_b.h_outflow), inStream(port_b.Xi_outflow));
  end if;

  // staggered grid discretization for flowModel, depending on modelStructure
  if useLumpedPressure then
    if modelStructure &lt;&gt; ModelStructure.av_vb then
      // all pressures are equal
      fill(mediums[1].p, n-1) = mediums[2:n].p;
    elseif n &gt; 2 then
      // need two pressures
      fill(mediums[1].p, iLumped-2) = mediums[2:iLumped-1].p;
      fill(mediums[n].p, n-iLumped) = mediums[iLumped:n-1].p;
    end if;
    if modelStructure == ModelStructure.av_vb then
      port_a.p = mediums[1].p;
      statesFM[1] = mediums[1].state;
      m_flows[iLumped] = flowModel.m_flows[1];
      statesFM[2] = mediums[n].state;
      port_b.p = mediums[n].p;
    elseif modelStructure == ModelStructure.av_b then
      port_a.p = mediums[1].p;
      statesFM[1] = mediums[iLumped].state;
      statesFM[2] = state_b;
      m_flows[n+1] = flowModel.m_flows[1];
    elseif modelStructure == ModelStructure.a_vb then
      m_flows[1] = flowModel.m_flows[1];
      statesFM[1] = state_a;
      statesFM[2] = mediums[iLumped].state;
      port_b.p = mediums[n].p;
    elseif modelStructure == ModelStructure.a_v_b then
      m_flows[1] = flowModel.m_flows[1];
      statesFM[1] = state_a;
      statesFM[2] = mediums[iLumped].state;
      statesFM[3] = state_b;
      m_flows[n+1] = flowModel.m_flows[2];
    else
      assert(true, &quot;Unknown model structure&quot;);
    end if;
    if modelStructure &lt;&gt; ModelStructure.a_v_b then
      vsFM[1] = vs[1:iLumped-1]*lengths[1:iLumped-1]/sum(lengths[1:iLumped-1]);
      vsFM[2] = vs[iLumped:n]*lengths[iLumped:n]/sum(lengths[iLumped:n]);
    else
      vsFM[1] = vs[1:iLumped-1]*lengths[1:iLumped-1]/sum(lengths[1:iLumped-1]);
      vsFM[2] = vs[2:n-1]*lengths[2:n-1]/sum(lengths[2:n-1]);
      vsFM[3] = vs[iLumped:n]*lengths[iLumped:n]/sum(lengths[iLumped:n]);
    end if;
  else
    if modelStructure == ModelStructure.av_vb then
      //nFM = n-1
      statesFM[1:n] = mediums[1:n].state;
      m_flows[2:n] = flowModel.m_flows[1:n-1];
      vsFM[1:n] = vs;
      port_a.p = mediums[1].p;
      port_b.p = mediums[n].p;
    elseif modelStructure == ModelStructure.av_b then
      //nFM = n
      statesFM[1:n] = mediums[1:n].state;
      statesFM[n+1] = state_b;
      m_flows[2:n+1] = flowModel.m_flows[1:n];
      vsFM[1:n] = vs;
      vsFM[n+1] = m_flows[n+1]/Medium.density(state_b)/crossAreas[n]/nParallel;
      port_a.p = mediums[1].p;
    elseif modelStructure == ModelStructure.a_vb then
      //nFM = n
      statesFM[1] = state_a;
      statesFM[2:n+1] = mediums[1:n].state;
      m_flows[1:n] = flowModel.m_flows[1:n];
      vsFM[1] = m_flows[1]/Medium.density(state_a)/crossAreas[1]/nParallel;
      vsFM[2:n+1] = vs;
      port_b.p = mediums[n].p;
    elseif modelStructure == ModelStructure.a_v_b then
      //nFM = n+1
      statesFM[1] = state_a;
      statesFM[2:n+1] = mediums[1:n].state;
      statesFM[n+2] = state_b;
      m_flows[1:n+1] = flowModel.m_flows[1:n+1];
      vsFM[1] = m_flows[1]/Medium.density(state_a)/crossAreas[1]/nParallel;
      vsFM[2:n+1] = vs;
      vsFM[n+2] = m_flows[n+1]/Medium.density(state_b)/crossAreas[n]/nParallel;
    else
      assert(true, &quot;Unknown model structure&quot;);
    end if;
  end if;

end PartialTwoPortFlow;</code></pre>
<hr />
<h1 id="modelica.fluid.pipes.baseclasses.partialstraightpipe.flowmodel-modelica.fluid.pipes.baseclasses.partialstraightpipe.flowmodel"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe.FlowModelI.png" alt="Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe.FlowModel" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe">Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe</a>.FlowModel</h1>
<p><strong>Wall friction, gravity, momentum flow</strong></p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="32%" />
<col width="27%" />
<col width="9%" />
<col width="30%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_nominal</td>
<td align="left">1e3*dp_small</td>
<td align="left">Nominal pressure loss (for nominal models) [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_nominal</td>
<td align="left">1e2*m_flow_small</td>
<td align="left">Mass flow rate for dp_nominal (for nominal models) [kg/s]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">from_dp</td>
<td align="left">momentumDynamics &gt;= Types.Dy...</td>
<td align="left">= true, use m_flow = f(dp), otherwise dp = f(m_flow)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">system.dp_small</td>
<td align="left">Within regularization if |dp| &lt; dp_small (may be wider for large discontinuities in static head) [Pa]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Within regularization if |m_flows| &lt; m_flow_small (may be wider for large discontinuities in static head) [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Advanced</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useUpstreamScheme</td>
<td align="left">true</td>
<td align="left">= false to average upstream and downstream properties across flow segments</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">use_Ib_flows</td>
<td align="left">momentumDynamics &lt;&gt; Types.Dy...</td>
<td align="left">= true to consider differences in flow of momentum through boundaries</td>
</tr>
<tr class="odd">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_Res</td>
<td align="left">false</td>
<td align="left">= true, if Reynolds numbers are included for plotting</td>
</tr>
<tr class="odd">
<td align="left"><strong>Internal Interface</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">n</td>
<td align="left">2</td>
<td align="left">Number of discrete flow volumes</td>
</tr>
<tr class="even">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">nParallel</td>
<td align="left">
</td>
<td align="left">number of identical parallel flow devices</td>
</tr>
<tr class="even">
<td align="left">Static head</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Acceleration">Acceleration</a></td>
<td align="left">g</td>
<td align="left">system.g</td>
<td align="left">Constant gravity acceleration [m/s2]</td>
</tr>
<tr class="even">
<td align="left">Assumptions</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (states[1] -&gt; states[n+1])</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">system.momentumDynamics</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Start value of mass flow rates [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_a_start</td>
<td align="left">
</td>
<td align="left">Start value for p[1] at design inflow [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_b_start</td>
<td align="left">
</td>
<td align="left">Start value for p[n+1] at design outflow [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>replaceable model FlowModel =
  Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow
  constrainedby 
  Modelica.Fluid.Pipes.BaseClasses.FlowModels.PartialStaggeredFlowModel 
  &quot;Wall friction, gravity, momentum flow&quot;;</code></pre>
<hr />
<h1 id="modelica.fluid.pipes.baseclasses.partialtwoportflow.flowmodel-modelica.fluid.pipes.baseclasses.partialtwoportflow.flowmodel"><img src="Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe.FlowModelI.png" alt="Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow.FlowModel" /> <a href="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow">Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow</a>.FlowModel</h1>
<p><strong>Wall friction, gravity, momentum flow</strong></p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="32%" />
<col width="27%" />
<col width="9%" />
<col width="30%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_nominal</td>
<td align="left">1e3*dp_small</td>
<td align="left">Nominal pressure loss (for nominal models) [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_nominal</td>
<td align="left">1e2*m_flow_small</td>
<td align="left">Mass flow rate for dp_nominal (for nominal models) [kg/s]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">from_dp</td>
<td align="left">momentumDynamics &gt;= Types.Dy...</td>
<td align="left">= true, use m_flow = f(dp), otherwise dp = f(m_flow)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_small</td>
<td align="left">system.dp_small</td>
<td align="left">Within regularization if |dp| &lt; dp_small (may be wider for large discontinuities in static head) [Pa]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Within regularization if |m_flows| &lt; m_flow_small (may be wider for large discontinuities in static head) [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Advanced</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useUpstreamScheme</td>
<td align="left">true</td>
<td align="left">= false to average upstream and downstream properties across flow segments</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">use_Ib_flows</td>
<td align="left">momentumDynamics &lt;&gt; Types.Dy...</td>
<td align="left">= true to consider differences in flow of momentum through boundaries</td>
</tr>
<tr class="odd">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_Res</td>
<td align="left">false</td>
<td align="left">= true, if Reynolds numbers are included for plotting</td>
</tr>
<tr class="odd">
<td align="left"><strong>Internal Interface</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">n</td>
<td align="left">2</td>
<td align="left">Number of discrete flow volumes</td>
</tr>
<tr class="even">
<td align="left">Geometry</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">nParallel</td>
<td align="left">
</td>
<td align="left">number of identical parallel flow devices</td>
</tr>
<tr class="even">
<td align="left">Static head</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Acceleration">Acceleration</a></td>
<td align="left">g</td>
<td align="left">system.g</td>
<td align="left">Constant gravity acceleration [m/s2]</td>
</tr>
<tr class="even">
<td align="left">Assumptions</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (states[1] -&gt; states[n+1])</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">system.momentumDynamics</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Start value of mass flow rates [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_a_start</td>
<td align="left">
</td>
<td align="left">Start value for p[1] at design inflow [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_b_start</td>
<td align="left">
</td>
<td align="left">Start value for p[n+1] at design outflow [Pa]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>replaceable model FlowModel =
  Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow
  constrainedby 
  Modelica.Fluid.Pipes.BaseClasses.FlowModels.PartialStaggeredFlowModel 
  &quot;Wall friction, gravity, momentum flow&quot;;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:13 2010.</p>
</body>
</html>
