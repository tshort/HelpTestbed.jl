<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Fluid.Interfaces</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Fluid.Interfaces</h1>
</div>
<h1 id="modelica.fluid.interfaces"><a href="Modelica_Fluid.html#Modelica.Fluid">Modelica.Fluid</a>.Interfaces</h1>
<p><strong>Interfaces for steady state and unsteady, mixed-phase, multi-substance, incompressible and compressible flow</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_InterfacesPackage.html#Modelica.Icons.InterfacesPackage">Modelica.Icons.InterfacesPackage</a> (Icon for packages containing interfaces).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="52%" />
<col width="47%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.FluidPortS.png" alt="image11" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort">FluidPort</a></td>
<td align="left">Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Interfaces.FluidPort_aS.png" alt="image12" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">Generic fluid connector at design inlet</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.FluidPort_bS.png" alt="image13" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">Generic fluid connector at design outlet</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Interfaces.FluidPorts_aS.png" alt="image14" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPorts_a">FluidPorts_a</a></td>
<td align="left">Fluid connector with filled, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.FluidPorts_bS.png" alt="image15" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPorts_b">FluidPorts_b</a></td>
<td align="left">Fluid connector with outlined, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Interfaces.PartialTwoPortS.png" alt="image16" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort">PartialTwoPort</a></td>
<td align="left">Partial component with two ports</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.PartialTwoPortTransportS.png" alt="image17" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport">PartialTwoPortTransport</a></td>
<td align="left">Partial element transporting fluid between two ports without storage of mass or energy</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Interfaces.HeatPorts_aS.png" alt="image18" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a">HeatPorts_a</a></td>
<td align="left">HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.HeatPorts_bS.png" alt="image19" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_b">HeatPorts_b</a></td>
<td align="left">HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Fluid.Interfaces.PartialHeatTransferS.png" alt="image20" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialHeatTransfer">PartialHeatTransfer</a></td>
<td align="left">Common interface for heat transfer models</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedVolume">PartialLumpedVolume</a></td>
<td align="left">Lumped volume with mass and energy balance</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow">PartialLumpedFlow</a></td>
<td align="left">Base class for a lumped momentum balance</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialDistributedVolume">PartialDistributedVolume</a></td>
<td align="left">Base class for distributed volume models</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialDistributedFlow">PartialDistributedFlow</a></td>
<td align="left">Base class for a distributed momentum balance</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Fluid.Interfaces.PartialPressureLossS.png" alt="image21" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialPressureLoss">PartialPressureLoss</a></td>
<td align="left">Base flow model for pressure loss functions with the same area at port_a and at port_b</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.fluid.interfaces.fluidport"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.FluidPort</h1>
<p><strong>Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)</strong></p>
<h2 id="contents">Contents</h2>
<table>
<col width="51%" />
<col width="10%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flow <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from the connection point into the component [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p</td>
<td align="left">Thermodynamic pressure in the connection point [Pa]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_outflow</td>
<td align="left">Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0 [J/kg]</td>
</tr>
<tr class="even">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">Xi_outflow[Medium.nXi]</td>
<td align="left">Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0 [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_outflow[Medium.nC]</td>
<td align="left">Properties c_i/m close to the connection point if m_flow &lt; 0</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>connector FluidPort 
  &quot;Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)&quot;

  replaceable package Medium = Modelica.Media.Interfaces.PartialMedium 
    &quot;Medium model&quot;;

  flow Medium.MassFlowRate m_flow 
    &quot;Mass flow rate from the connection point into the component&quot;;
  Medium.AbsolutePressure p &quot;Thermodynamic pressure in the connection point&quot;;
  stream Medium.SpecificEnthalpy h_outflow 
    &quot;Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0&quot;;
  stream Medium.MassFraction Xi_outflow[Medium.nXi] 
    &quot;Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0&quot;;
  stream Medium.ExtraProperty C_outflow[Medium.nC] 
    &quot;Properties c_i/m close to the connection point if m_flow &lt; 0&quot;;
end FluidPort;</code></pre>
<hr />
<h1 id="image22-modelica.fluid.interfaces.fluidport_a"><img src="Modelica.Fluid.Interfaces.FluidPort_aI.png" alt="image22" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.FluidPort_a</h1>
<p><strong>Generic fluid connector at design inlet</strong></p>
<h2 id="information-1">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort">FluidPort</a> (Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)).</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="17%" />
<col width="62%" />
<col width="9%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium model</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="contents-1">Contents</h2>
<table>
<col width="51%" />
<col width="10%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flow <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from the connection point into the component [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p</td>
<td align="left">Thermodynamic pressure in the connection point [Pa]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_outflow</td>
<td align="left">Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0 [J/kg]</td>
</tr>
<tr class="even">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">Xi_outflow[Medium.nXi]</td>
<td align="left">Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0 [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_outflow[Medium.nC]</td>
<td align="left">Properties c_i/m close to the connection point if m_flow &lt; 0</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>connector FluidPort_a &quot;Generic fluid connector at design inlet&quot;
  extends FluidPort;
end FluidPort_a;</code></pre>
<hr />
<h1 id="image23-modelica.fluid.interfaces.fluidport_b"><img src="Modelica.Fluid.Interfaces.FluidPort_bI.png" alt="image23" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.FluidPort_b</h1>
<p><strong>Generic fluid connector at design outlet</strong></p>
<h2 id="information-2">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort">FluidPort</a> (Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)).</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="17%" />
<col width="62%" />
<col width="9%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium model</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="contents-2">Contents</h2>
<table>
<col width="51%" />
<col width="10%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flow <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from the connection point into the component [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p</td>
<td align="left">Thermodynamic pressure in the connection point [Pa]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_outflow</td>
<td align="left">Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0 [J/kg]</td>
</tr>
<tr class="even">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">Xi_outflow[Medium.nXi]</td>
<td align="left">Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0 [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_outflow[Medium.nC]</td>
<td align="left">Properties c_i/m close to the connection point if m_flow &lt; 0</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>connector FluidPort_b &quot;Generic fluid connector at design outlet&quot;
  extends FluidPort;
end FluidPort_b;</code></pre>
<hr />
<h1 id="image24-modelica.fluid.interfaces.fluidports_a"><img src="Modelica.Fluid.Interfaces.FluidPorts_aI.png" alt="image24" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.FluidPorts_a</h1>
<p><strong>Fluid connector with filled, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)</strong></p>
<h2 id="information-3">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort">FluidPort</a> (Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="17%" />
<col width="62%" />
<col width="9%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium model</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="contents-3">Contents</h2>
<table>
<col width="51%" />
<col width="10%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flow <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from the connection point into the component [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p</td>
<td align="left">Thermodynamic pressure in the connection point [Pa]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_outflow</td>
<td align="left">Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0 [J/kg]</td>
</tr>
<tr class="even">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">Xi_outflow[Medium.nXi]</td>
<td align="left">Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0 [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_outflow[Medium.nC]</td>
<td align="left">Properties c_i/m close to the connection point if m_flow &lt; 0</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>connector FluidPorts_a 
  &quot;Fluid connector with filled, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)&quot;
  extends FluidPort;
end FluidPorts_a;</code></pre>
<hr />
<h1 id="image25-modelica.fluid.interfaces.fluidports_b"><img src="Modelica.Fluid.Interfaces.FluidPorts_bI.png" alt="image25" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.FluidPorts_b</h1>
<p><strong>Fluid connector with outlined, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)</strong></p>
<h2 id="information-4">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort">FluidPort</a> (Interface for quasi one-dimensional fluid flow in a piping network (incompressible or compressible, one or more phases, one or more substances)).</p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="17%" />
<col width="62%" />
<col width="9%" />
<col width="9%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium model</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="contents-4">Contents</h2>
<table>
<col width="51%" />
<col width="10%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flow <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow</td>
<td align="left">Mass flow rate from the connection point into the component [kg/s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p</td>
<td align="left">Thermodynamic pressure in the connection point [Pa]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_outflow</td>
<td align="left">Specific thermodynamic enthalpy close to the connection point if m_flow &lt; 0 [J/kg]</td>
</tr>
<tr class="even">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">Xi_outflow[Medium.nXi]</td>
<td align="left">Independent mixture mass fractions m_i/m close to the connection point if m_flow &lt; 0 [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left">stream <a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_outflow[Medium.nC]</td>
<td align="left">Properties c_i/m close to the connection point if m_flow &lt; 0</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>connector FluidPorts_b 
  &quot;Fluid connector with outlined, large icon to be used for vectors of FluidPorts (vector dimensions must be added after dragging)&quot;
  extends FluidPort;
end FluidPorts_b;</code></pre>
<hr />
<h1 id="image26-modelica.fluid.interfaces.partialtwoport"><img src="Modelica.Fluid.Interfaces.PartialTwoPortI.png" alt="image26" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialTwoPort</h1>
<p><strong>Partial component with two ports</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>This partial model defines an interface for components with two ports. The treatment of the design flow direction and of flow reversal are predefined based on the parameter <code>allowFlowReversal</code>. The component may transport fluid and may have internal storage for a given fluid <code>Medium</code>.</p>
<p>An extending model providing direct access to internal storage of mass or energy through port_a or port_b should redefine the protected parameters <code>port_a_exposesState</code> and <code>port_b_exposesState</code> appropriately. This will be visualized at the port icons, in order to improve the understanding of fluid model diagrams.</p>
<p>::</p>
<h2 id="parameters-4">Parameters</h2>
<table>
<col width="12%" />
<col width="13%" />
<col width="17%" />
<col width="56%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>partial model PartialTwoPort &quot;Partial component with two ports&quot;
  import Modelica.Constants;
  outer Modelica.Fluid.System system &quot;System wide properties&quot;;

  replaceable package Medium =
      Modelica.Media.Interfaces.PartialMedium &quot;Medium in the component&quot;;

  parameter Boolean allowFlowReversal = system.allowFlowReversal 
    &quot;= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)&quot;;

  Modelica.Fluid.Interfaces.FluidPort_a port_a(
                                redeclare package Medium = Medium,
                     m_flow(min=if allowFlowReversal then -Constants.inf else 0)) 
    &quot;Fluid connector a (positive design flow direction is from port_a to port_b)&quot;;
  Modelica.Fluid.Interfaces.FluidPort_b port_b(
                                redeclare package Medium = Medium,
                     m_flow(max=if allowFlowReversal then +Constants.inf else 0)) 
    &quot;Fluid connector b (positive design flow direction is from port_a to port_b)&quot;;
  // Model structure, e.g., used for visualization
protected 
  parameter Boolean port_a_exposesState = false 
    &quot;= true if port_a exposes the state of a fluid volume&quot;;
  parameter Boolean port_b_exposesState = false 
    &quot;= true if port_b.p exposes the state of a fluid volume&quot;;
  parameter Boolean showDesignFlowDirection = true 
    &quot;= false to hide the arrow in the model icon&quot;;

end PartialTwoPort;</code></pre>
<hr />
<h1 id="image27-modelica.fluid.interfaces.partialtwoporttransport"><img src="Modelica.Fluid.Interfaces.PartialTwoPortTransportI.png" alt="image27" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialTwoPortTransport</h1>
<p><strong>Partial element transporting fluid between two ports without storage of mass or energy</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>This component transports fluid between its two ports, without storing mass or energy. Energy may be exchanged with the environment though, e.g., in the form of work. <code>PartialTwoPortTransport</code> is intended as base class for devices like orifices, valves and simple fluid machines.</p>
<p>Three equations need to be added by an extending class using this component:</p>
<ul>
<li>the momentum balance specifying the relationship between the pressure drop <code>dp</code> and the mass flow rate <code>m_flow</code></li>
<li><code>port_b.h_outflow</code> for flow in design direction, and</li>
<li><code>port_a.h_outflow</code> for flow in reverse direction.</li>
</ul>
<p>::</p>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort">PartialTwoPort</a> (Partial component with two ports).</p>
<h2 id="parameters-5">Parameters</h2>
<table>
<col width="35%" />
<col width="30%" />
<col width="8%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_start</td>
<td align="left">0.01*system.p_start</td>
<td align="left">Guess value of dp = port_a.p - port_b.p [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Guess value of m_flow = port_a.m_flow [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Small mass flow rate for regularization of zero flow [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_T</td>
<td align="left">true</td>
<td align="left">= true, if temperatures at port_a and port_b are computed</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_V_flow</td>
<td align="left">true</td>
<td align="left">= true, if volume flow rate at inflowing port is computed</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>partial model PartialTwoPortTransport 
  &quot;Partial element transporting fluid between two ports without storage of mass or energy&quot;

  extends PartialTwoPort(
    final port_a_exposesState=false,
    final port_b_exposesState=false);

  // Advanced
  parameter Medium.AbsolutePressure dp_start = 0.01*system.p_start 
    &quot;Guess value of dp = port_a.p - port_b.p&quot;;
  parameter Medium.MassFlowRate m_flow_start = system.m_flow_start 
    &quot;Guess value of m_flow = port_a.m_flow&quot;;
  parameter Medium.MassFlowRate m_flow_small = system.m_flow_small 
    &quot;Small mass flow rate for regularization of zero flow&quot;;

  // Diagnostics
  parameter Boolean show_T = true 
    &quot;= true, if temperatures at port_a and port_b are computed&quot;;
  parameter Boolean show_V_flow = true 
    &quot;= true, if volume flow rate at inflowing port is computed&quot;;

  // Variables
  Medium.MassFlowRate m_flow(
     min=if allowFlowReversal then -Modelica.Constants.inf else 0,
     start = m_flow_start) &quot;Mass flow rate in design flow direction&quot;;
  Modelica.SIunits.Pressure dp(start=dp_start) 
    &quot;Pressure difference between port_a and port_b (= port_a.p - port_b.p)&quot;;

  Modelica.SIunits.VolumeFlowRate V_flow=
      m_flow/Modelica.Fluid.Utilities.regStep(m_flow,
                  Medium.density(state_a),
                  Medium.density(state_b),
                  m_flow_small) if show_V_flow 
    &quot;Volume flow rate at inflowing port (positive when flow from port_a to port_b)&quot;;

  Medium.Temperature port_a_T=
      Modelica.Fluid.Utilities.regStep(port_a.m_flow,
                  Medium.temperature(state_a),
                  Medium.temperature(Medium.setState_phX(port_a.p, port_a.h_outflow, port_a.Xi_outflow)),
                  m_flow_small) if show_T 
    &quot;Temperature close to port_a, if show_T = true&quot;;
  Medium.Temperature port_b_T=
      Modelica.Fluid.Utilities.regStep(port_b.m_flow,
                  Medium.temperature(state_b),
                  Medium.temperature(Medium.setState_phX(port_b.p, port_b.h_outflow, port_b.Xi_outflow)),
                  m_flow_small) if show_T 
    &quot;Temperature close to port_b, if show_T = true&quot;;
protected 
  Medium.ThermodynamicState state_a &quot;state for medium inflowing through port_a&quot;;
  Medium.ThermodynamicState state_b &quot;state for medium inflowing through port_b&quot;;
equation 
  // medium states
  state_a = Medium.setState_phX(port_a.p, inStream(port_a.h_outflow), inStream(port_a.Xi_outflow));
  state_b = Medium.setState_phX(port_b.p, inStream(port_b.h_outflow), inStream(port_b.Xi_outflow));

  // Pressure drop in design flow direction
  dp = port_a.p - port_b.p;

  // Design direction of mass flow rate
  m_flow = port_a.m_flow;
  assert(m_flow &gt; -m_flow_small or allowFlowReversal, &quot;Reverting flow occurs even though allowFlowReversal is false&quot;);

  // Mass balance (no storage)
  port_a.m_flow + port_b.m_flow = 0;

  // Transport of substances
  port_a.Xi_outflow = inStream(port_b.Xi_outflow);
  port_b.Xi_outflow = inStream(port_a.Xi_outflow);

  port_a.C_outflow = inStream(port_b.C_outflow);
  port_b.C_outflow = inStream(port_a.C_outflow);

end PartialTwoPortTransport;</code></pre>
<hr />
<h1 id="image28-modelica.fluid.interfaces.heatports_a"><img src="Modelica.Fluid.Interfaces.HeatPorts_aI.png" alt="image28" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.HeatPorts_a</h1>
<p><strong>HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)</strong></p>
<h2 id="information-7">Information</h2>
<p>Extends from <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort">Modelica.Thermal.HeatTransfer.Interfaces.HeatPort</a> (Thermal port for 1-dim. heat transfer).</p>
<h2 id="contents-5">Contents</h2>
<table>
<col width="47%" />
<col width="7%" />
<col width="45%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temperature">Temperature</a></td>
<td align="left">T</td>
<td align="left">Port temperature [K]</td>
</tr>
<tr class="even">
<td align="left">flow <a href="Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate">HeatFlowRate</a></td>
<td align="left">Q_flow</td>
<td align="left">Heat flow rate (positive if flowing from outside into the component) [W]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>connector HeatPorts_a 
  &quot;HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)&quot;
  extends Modelica.Thermal.HeatTransfer.Interfaces.HeatPort;
end HeatPorts_a;</code></pre>
<hr />
<h1 id="image29-modelica.fluid.interfaces.heatports_b"><img src="Modelica.Fluid.Interfaces.HeatPorts_bI.png" alt="image29" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.HeatPorts_b</h1>
<p><strong>HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)</strong></p>
<h2 id="information-8">Information</h2>
<p>Extends from <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort">Modelica.Thermal.HeatTransfer.Interfaces.HeatPort</a> (Thermal port for 1-dim. heat transfer).</p>
<h2 id="contents-6">Contents</h2>
<table>
<col width="47%" />
<col width="7%" />
<col width="45%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temperature">Temperature</a></td>
<td align="left">T</td>
<td align="left">Port temperature [K]</td>
</tr>
<tr class="even">
<td align="left">flow <a href="Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate">HeatFlowRate</a></td>
<td align="left">Q_flow</td>
<td align="left">Heat flow rate (positive if flowing from outside into the component) [W]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>connector HeatPorts_b 
  &quot;HeatPort connector with filled, large icon to be used for vectors of HeatPorts (vector dimensions must be added after dragging)&quot;
  extends Modelica.Thermal.HeatTransfer.Interfaces.HeatPort;
end HeatPorts_b;</code></pre>
<hr />
<h1 id="image30-modelica.fluid.interfaces.partialheattransfer"><img src="Modelica.Fluid.Interfaces.PartialHeatTransferI.png" alt="image30" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialHeatTransfer</h1>
<p><strong>Common interface for heat transfer models</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>This component is a common interface for heat transfer models. The heat flow rates <code>Q_flows[n]</code> through the boundaries of n flow segments are obtained as function of the thermodynamic <code>states</code> of the flow segments for a given fluid <code>Medium</code>, the <code>surfaceAreas[n]</code> and the boundary temperatures <code>heatPorts[n].T</code>.</p>
<p>The heat loss coefficient <code>k</code> can be used to model a thermal isolation between <code>heatPorts.T</code> and <code>T_ambient</code>.</p>
<p>An extending model implementing this interface needs to define one equation: the relation between the predefined fluid temperatures <code>Ts[n]</code>, the boundary temperatures <code>heatPorts[n].T</code>, and the heat flow rates <code>Q_flows[n]</code>.</p>
<p>::</p>
<h2 id="parameters-6">Parameters</h2>
<table>
<col width="52%" />
<col width="7%" />
<col width="11%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Ambient</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer">CoefficientOfHeatTransfer</a></td>
<td align="left">k</td>
<td align="left">0</td>
<td align="left">Heat transfer coefficient to ambient [W/(m2.K)]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temperature">Temperature</a></td>
<td align="left">T_ambient</td>
<td align="left">system.T_ambient</td>
<td align="left">Ambient temperature [K]</td>
</tr>
<tr class="even">
<td align="left"><strong>Internal Interface</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">n</td>
<td align="left">1</td>
<td align="left">Number of heat transfer segments</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">use_k</td>
<td align="left">false</td>
<td align="left">= true to use k value for thermal isolation</td>
</tr>
</tbody>
</table>
<h2 id="connectors-2">Connectors</h2>
<table>
<col width="63%" />
<col width="11%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a">HeatPorts_a</a></td>
<td align="left">heatPorts[n]</td>
<td align="left">Heat port to component boundary</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>partial model PartialHeatTransfer 
  &quot;Common interface for heat transfer models&quot;

  // Parameters
  replaceable package Medium=Modelica.Media.Interfaces.PartialMedium 
    &quot;Medium in the component&quot;;

  parameter Integer n=1 &quot;Number of heat transfer segments&quot;;

  // Inputs provided to heat transfer model
  input Medium.ThermodynamicState[n] states 
    &quot;Thermodynamic states of flow segments&quot;;

  input SI.Area[n] surfaceAreas &quot;Heat transfer areas&quot;;

  // Outputs defined by heat transfer model
  output SI.HeatFlowRate[n] Q_flows &quot;Heat flow rates&quot;;

  // Parameters
  parameter Boolean use_k = false &quot;= true to use k value for thermal isolation&quot;;
  parameter SI.CoefficientOfHeatTransfer k = 0 
    &quot;Heat transfer coefficient to ambient&quot;;
  parameter SI.Temperature T_ambient = system.T_ambient &quot;Ambient temperature&quot;;
  outer Modelica.Fluid.System system &quot;System wide properties&quot;;

  // Heat ports
  Modelica.Fluid.Interfaces.HeatPorts_a[n] heatPorts 
    &quot;Heat port to component boundary&quot;;

  // Variables
  SI.Temperature[n] Ts = Medium.temperature(states) 
    &quot;Temperatures defined by fluid states&quot;;

equation 
  if use_k then
    Q_flows = heatPorts.Q_flow + {k*surfaceAreas[i]*(T_ambient - heatPorts[i].T) for i in 1:n};
  else
    Q_flows = heatPorts.Q_flow;
  end if;

end PartialHeatTransfer;</code></pre>
<hr />
<h1 id="modelica.fluid.interfaces.partiallumpedvolume"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialLumpedVolume</h1>
<p><strong>Lumped volume with mass and energy balance</strong></p>
<h2 id="information-10">Information</h2>
<p>::</p>
<p>Interface and base class for an ideally mixed fluid volume with the ability to store mass and energy. The following boundary flow and source terms are part of the energy balance and must be specified in an extending class:</p>
<ul>
<li><code>Qb_flow</code>, e.g., convective or latent heat flow rate across segment boundary, and</li>
<li><code>Wb_flow</code>, work term, e.g., p*der(fluidVolume) if the volume is not constant.</li>
</ul>
<p>The component volume <code>fluidVolume</code> is an input that needs to be set in the extending class to complete the model.</p>
<p>Further source terms must be defined by an extending class for fluid flow across the segment boundary:</p>
<ul>
<li><code>Hb_flow</code>, enthalpy flow,</li>
<li><code>mb_flow</code>, mass flow,</li>
<li><code>mbXi_flow</code>, substance mass flow, and</li>
<li><code>mbC_flow</code>, trace substance mass flow.</li>
</ul>
<p>::</p>
<h2 id="parameters-7">Parameters</h2>
<table>
<col width="53%" />
<col width="10%" />
<col width="15%" />
<col width="20%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">energyDynamics</td>
<td align="left">system.energyDynamics</td>
<td align="left">Formulation of energy balance</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">massDynamics</td>
<td align="left">system.massDynamics</td>
<td align="left">Formulation of mass balance</td>
</tr>
<tr class="odd">
<td align="left"><strong>Initialization</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_start</td>
<td align="left">system.p_start</td>
<td align="left">Start value of pressure [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_T_start</td>
<td align="left">true</td>
<td align="left">= true, use T_start, otherwise h_start</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature">Temperature</a></td>
<td align="left">T_start</td>
<td align="left">if use_T_start then system.T...</td>
<td align="left">Start value of temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_start</td>
<td align="left">if use_T_start then Medium.s...</td>
<td align="left">Start value of specific enthalpy [J/kg]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">X_start[Medium.nX]</td>
<td align="left">Medium.X_default</td>
<td align="left">Start value of mass fractions m_i/m [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_start[Medium.nC]</td>
<td align="left">fill(0, Medium.nC)</td>
<td align="left">Start value of trace substances</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>partial model PartialLumpedVolume 
  &quot;Lumped volume with mass and energy balance&quot;
  import Modelica.Fluid.Types;
  import Modelica.Fluid.Types.Dynamics;
  import Modelica.Media.Interfaces.PartialMedium.Choices.IndependentVariables;

  outer Modelica.Fluid.System system &quot;System properties&quot;;
  replaceable package Medium =
    Modelica.Media.Interfaces.PartialMedium &quot;Medium in the component&quot;;

  // Inputs provided to the volume model
  input SI.Volume fluidVolume &quot;Volume&quot;;

  // Assumptions
  parameter Types.Dynamics energyDynamics=system.energyDynamics 
    &quot;Formulation of energy balance&quot;;
  parameter Types.Dynamics massDynamics=system.massDynamics 
    &quot;Formulation of mass balance&quot;;
  final parameter Types.Dynamics substanceDynamics=massDynamics 
    &quot;Formulation of substance balance&quot;;
  final parameter Types.Dynamics traceDynamics=massDynamics 
    &quot;Formulation of trace substance balance&quot;;

  // Initialization
  parameter Medium.AbsolutePressure p_start = system.p_start 
    &quot;Start value of pressure&quot;;
  parameter Boolean use_T_start = true &quot;= true, use T_start, otherwise h_start&quot;;
  parameter Medium.Temperature T_start=
    if use_T_start then system.T_start else Medium.temperature_phX(p_start,h_start,X_start) 
    &quot;Start value of temperature&quot;;
  parameter Medium.SpecificEnthalpy h_start=
    if use_T_start then Medium.specificEnthalpy_pTX(p_start, T_start, X_start) else Medium.h_default 
    &quot;Start value of specific enthalpy&quot;;
  parameter Medium.MassFraction X_start[Medium.nX] = Medium.X_default 
    &quot;Start value of mass fractions m_i/m&quot;;
  parameter Medium.ExtraProperty C_start[Medium.nC](
       quantity=Medium.extraPropertiesNames)=fill(0, Medium.nC) 
    &quot;Start value of trace substances&quot;;

  Medium.BaseProperties medium(
    preferredMediumStates=true,
    p(start=p_start),
    h(start=h_start),
    T(start=T_start),
    Xi(start=X_start[1:Medium.nXi]));
  SI.Energy U &quot;Internal energy of fluid&quot;;
  SI.Mass m &quot;Mass of fluid&quot;;
  SI.Mass[Medium.nXi] mXi &quot;Masses of independent components in the fluid&quot;;
  SI.Mass[Medium.nC] mC &quot;Masses of trace substances in the fluid&quot;;
  // C need to be added here because unlike for Xi, which has medium.Xi,
  // there is no variable medium.C
  Medium.ExtraProperty C[Medium.nC] &quot;Trace substance mixture content&quot;;

  // variables that need to be defined by an extending class
  SI.MassFlowRate mb_flow &quot;Mass flows across boundaries&quot;;
  SI.MassFlowRate[Medium.nXi] mbXi_flow 
    &quot;Substance mass flows across boundaries&quot;;
  Medium.ExtraPropertyFlowRate[Medium.nC] mbC_flow 
    &quot;Trace substance mass flows across boundaries&quot;;
  SI.EnthalpyFlowRate Hb_flow 
    &quot;Enthalpy flow across boundaries or energy source/sink&quot;;
  SI.HeatFlowRate Qb_flow &quot;Heat flow across boundaries or energy source/sink&quot;;
  SI.Power Wb_flow &quot;Work flow across boundaries or source term&quot;;
protected 
  parameter Boolean initialize_p = not Medium.singleState 
    &quot;= true to set up initial equations for pressure&quot;;
  Real[Medium.nC] mC_scaled(min=fill(Modelica.Constants.eps, Medium.nC)) 
    &quot;Scaled masses of trace substances in the fluid&quot;;
equation 
  assert(not (energyDynamics&lt;&gt;Dynamics.SteadyState and massDynamics==Dynamics.SteadyState) or Medium.singleState,
         &quot;Bad combination of dynamics options and Medium not conserving mass if fluidVolume is fixed.&quot;);

  // Total quantities
  m = fluidVolume*medium.d;
  mXi = m*medium.Xi;
  U = m*medium.u;
  mC = m*C;

  // Energy and mass balances
  if energyDynamics == Dynamics.SteadyState then
    0 = Hb_flow + Qb_flow + Wb_flow;
  else
    der(U) = Hb_flow + Qb_flow + Wb_flow;
  end if;

  if massDynamics == Dynamics.SteadyState then
    0 = mb_flow;
  else
    der(m) = mb_flow;
  end if;

  if substanceDynamics == Dynamics.SteadyState then
    zeros(Medium.nXi) = mbXi_flow;
  else
    der(mXi) = mbXi_flow;
  end if;

  if traceDynamics == Dynamics.SteadyState then
    zeros(Medium.nC)  = mbC_flow;
  else
    der(mC_scaled) = mbC_flow./Medium.C_nominal;
  end if;
    mC = mC_scaled.*Medium.C_nominal;

initial equation 
  // initialization of balances
  if energyDynamics == Dynamics.FixedInitial then
    /*
    if use_T_start then
      medium.T = T_start;
    else
      medium.h = h_start;
    end if;
    */
    if Medium.ThermoStates == IndependentVariables.ph or 
       Medium.ThermoStates == IndependentVariables.phX then
       medium.h = h_start;
    else
       medium.T = T_start;
    end if;
  elseif energyDynamics == Dynamics.SteadyStateInitial then
    /*
    if use_T_start then
      der(medium.T) = 0;
    else
      der(medium.h) = 0;
    end if;
    */
    if Medium.ThermoStates == IndependentVariables.ph or 
       Medium.ThermoStates == IndependentVariables.phX then
       der(medium.h) = 0;
    else
       der(medium.T) = 0;
    end if;
  end if;

  if massDynamics == Dynamics.FixedInitial then
    if initialize_p then
      medium.p = p_start;
    end if;
  elseif massDynamics == Dynamics.SteadyStateInitial then
    if initialize_p then
      der(medium.p) = 0;
    end if;
  end if;

  if substanceDynamics == Dynamics.FixedInitial then
    medium.Xi = X_start[1:Medium.nXi];
  elseif substanceDynamics == Dynamics.SteadyStateInitial then
    der(medium.Xi) = zeros(Medium.nXi);
  end if;

  if traceDynamics == Dynamics.FixedInitial then
    mC_scaled = m*C_start[1:Medium.nC]./Medium.C_nominal;
  elseif traceDynamics == Dynamics.SteadyStateInitial then
    der(mC_scaled) = zeros(Medium.nC);
  end if;

end PartialLumpedVolume;</code></pre>
<hr />
<h1 id="modelica.fluid.interfaces.partiallumpedflow"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialLumpedFlow</h1>
<p><strong>Base class for a lumped momentum balance</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>Interface and base class for a momentum balance, defining the mass flow rate <code>m_flow</code> of a given <code>Medium</code> in a flow model.</p>
<p>The following boundary flow and force terms are part of the momentum balance and must be specified in an extending model (to zero if not considered):</p>
<ul>
<li><code>Ib_flow</code>, the flow of momentum across model boundaries,</li>
<li><code>F_p[m]</code>, pressure force, and</li>
<li><code>F_fg[m]</code>, friction and gravity forces.</li>
</ul>
<p>The length of the flow path <code>pathLength</code> is an input that needs to be set in an extending class to complete the model.</p>
<p>::</p>
<h2 id="parameters-8">Parameters</h2>
<table>
<col width="44%" />
<col width="13%" />
<col width="10%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left">Modelica.Media.Interfaces.Pa...</td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (m_flow &gt;= 0)</td>
</tr>
<tr class="even">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">system.momentumDynamics</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="even">
<td align="left"><strong>Initialization</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Start value of mass flow rates [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-3">Connectors</h2>
<table>
<col width="41%" />
<col width="37%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>partial model PartialLumpedFlow 
  &quot;Base class for a lumped momentum balance&quot;

  outer Modelica.Fluid.System system &quot;System properties&quot;;

  replaceable package Medium =
    Modelica.Media.Interfaces.PartialMedium &quot;Medium in the component&quot;;

  parameter Boolean allowFlowReversal = system.allowFlowReversal 
    &quot;= true to allow flow reversal, false restricts to design direction (m_flow &gt;= 0)&quot;;

  // Inputs provided to the flow model
  input SI.Length pathLength &quot;Length flow path&quot;;

  // Variables defined by the flow model
  Medium.MassFlowRate m_flow(
     min=if allowFlowReversal then -Modelica.Constants.inf else 0,
     start = m_flow_start,
     stateSelect = if momentumDynamics == Types.Dynamics.SteadyState then StateSelect.default else 
                               StateSelect.prefer) 
    &quot;mass flow rates between states&quot;;

  // Parameters
  parameter Modelica.Fluid.Types.Dynamics momentumDynamics=system.momentumDynamics 
    &quot;Formulation of momentum balance&quot;;

  parameter Medium.MassFlowRate m_flow_start=system.m_flow_start 
    &quot;Start value of mass flow rates&quot;;

  // Total quantities
  SI.Momentum I &quot;Momentums of flow segments&quot;;

  // Source terms and forces to be defined by an extending model (zero if not used)
  SI.Force Ib_flow &quot;Flow of momentum across boudaries&quot;;
  SI.Force F_p &quot;Pressure force&quot;;
  SI.Force F_fg &quot;Friction and gravity force&quot;;

equation 
  // Total quantities
  I = m_flow*pathLength;

  // Momentum balances
  if momentumDynamics == Types.Dynamics.SteadyState then
    0 = Ib_flow - F_p - F_fg;
  else
    der(I) = Ib_flow - F_p - F_fg;
  end if;

initial equation 
  if momentumDynamics == Types.Dynamics.FixedInitial then
    m_flow = m_flow_start;
  elseif momentumDynamics == Types.Dynamics.SteadyStateInitial then
    der(m_flow) = 0;
  end if;

end PartialLumpedFlow;</code></pre>
<hr />
<h1 id="modelica.fluid.interfaces.partialdistributedvolume"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialDistributedVolume</h1>
<p><strong>Base class for distributed volume models</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>Interface and base class for <code>n</code> ideally mixed fluid volumes with the ability to store mass and energy. It is inteded to model a one-dimensional spatial discretization of fluid flow according to the finite volume method. The following boundary flow and source terms are part of the energy balance and must be specified in an extending class:</p>
<ul>
<li><code>Qb_flows[n]</code>, heat flow term, e.g., conductive heat flows across segment boundaries, and</li>
<li><code>Wb_flows[n]</code>, work term.</li>
</ul>
<p>The component volumes <code>fluidVolumes[n]</code> are an input that needs to be set in an extending class to complete the model.</p>
<p>Further source terms must be defined by an extending class for fluid flow across the segment boundary:</p>
<ul>
<li><code>Hb_flows[n]</code>, enthalpy flow,</li>
<li><code>mb_flows[n]</code>, mass flow,</li>
<li><code>mbXi_flows[n]</code>, substance mass flow, and</li>
<li><code>mbC_flows[n]</code>, trace substance mass flow.</li>
</ul>
<p>::</p>
<h2 id="parameters-9">Parameters</h2>
<table>
<col width="53%" />
<col width="10%" />
<col width="15%" />
<col width="20%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">n</td>
<td align="left">2</td>
<td align="left">Number of discrete volumes</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">energyDynamics</td>
<td align="left">system.energyDynamics</td>
<td align="left">Formulation of energy balances</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">massDynamics</td>
<td align="left">system.massDynamics</td>
<td align="left">Formulation of mass balances</td>
</tr>
<tr class="even">
<td align="left"><strong>Initialization</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_a_start</td>
<td align="left">system.p_start</td>
<td align="left">Start value of pressure at port a [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">p_b_start</td>
<td align="left">p_a_start</td>
<td align="left">Start value of pressure at port b [Pa]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_T_start</td>
<td align="left">true</td>
<td align="left">Use T_start if true, otherwise h_start</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature">Temperature</a></td>
<td align="left">T_start</td>
<td align="left">if use_T_start then system.T...</td>
<td align="left">Start value of temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy">SpecificEnthalpy</a></td>
<td align="left">h_start</td>
<td align="left">if use_T_start then Medium.s...</td>
<td align="left">Start value of specific enthalpy [J/kg]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction">MassFraction</a></td>
<td align="left">X_start[Medium.nX]</td>
<td align="left">Medium.X_default</td>
<td align="left">Start value of mass fractions m_i/m [kg/kg]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty">ExtraProperty</a></td>
<td align="left">C_start[Medium.nC]</td>
<td align="left">fill(0, Medium.nC)</td>
<td align="left">Start value of trace substances</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-12">Modelica definition</h2>
<pre><code>partial model PartialDistributedVolume 
  &quot;Base class for distributed volume models&quot;
    import Modelica.Fluid.Types;
    import Modelica.Fluid.Types.Dynamics;
    import Modelica.Media.Interfaces.PartialMedium.Choices.IndependentVariables;
  outer Modelica.Fluid.System system &quot;System properties&quot;;

  replaceable package Medium =
    Modelica.Media.Interfaces.PartialMedium &quot;Medium in the component&quot;;

  // Discretization
  parameter Integer n=2 &quot;Number of discrete volumes&quot;;

  // Inputs provided to the volume model
  input SI.Volume[n] fluidVolumes 
    &quot;Discretized volume, determine in inheriting class&quot;;

  // Assumptions
  parameter Types.Dynamics energyDynamics=system.energyDynamics 
    &quot;Formulation of energy balances&quot;;
  parameter Types.Dynamics massDynamics=system.massDynamics 
    &quot;Formulation of mass balances&quot;;
  final parameter Types.Dynamics substanceDynamics=massDynamics 
    &quot;Formulation of substance balances&quot;;
  final parameter Types.Dynamics traceDynamics=massDynamics 
    &quot;Formulation of trace substance balances&quot;;

  //Initialization
  parameter Medium.AbsolutePressure p_a_start=system.p_start 
    &quot;Start value of pressure at port a&quot;;
  parameter Medium.AbsolutePressure p_b_start=p_a_start 
    &quot;Start value of pressure at port b&quot;;
  final parameter Medium.AbsolutePressure[n] ps_start=if n &gt; 1 then linspace(
        p_a_start, p_b_start, n) else {(p_a_start + p_b_start)/2} 
    &quot;Start value of pressure&quot;;

  parameter Boolean use_T_start=true &quot;Use T_start if true, otherwise h_start&quot;;

  parameter Medium.Temperature T_start=if use_T_start then system.T_start else 
              Medium.temperature_phX(
        (p_a_start + p_b_start)/2,
        h_start,
        X_start) &quot;Start value of temperature&quot;;
  parameter Medium.SpecificEnthalpy h_start=if use_T_start then 
        Medium.specificEnthalpy_pTX(
        (p_a_start + p_b_start)/2,
        T_start,
        X_start) else Medium.h_default &quot;Start value of specific enthalpy&quot;;
  parameter Medium.MassFraction X_start[Medium.nX]=Medium.X_default 
    &quot;Start value of mass fractions m_i/m&quot;;
  parameter Medium.ExtraProperty C_start[Medium.nC](
       quantity=Medium.extraPropertiesNames)=fill(0, Medium.nC) 
    &quot;Start value of trace substances&quot;;

  // Total quantities
  SI.Energy[n] Us &quot;Internal energy of fluid&quot;;
  SI.Mass[n] ms &quot;Fluid mass&quot;;
  SI.Mass[n,Medium.nXi] mXis &quot;Substance mass&quot;;
  SI.Mass[n,Medium.nC] mCs &quot;Trace substance mass&quot;;
  // C need to be added here because unlike for Xi, which has medium[:].Xi,
  // there is no variable medium[:].C
  SI.Mass[n,Medium.nC] mCs_scaled &quot;Scaled trace substance mass&quot;;
  Medium.ExtraProperty Cs[n, Medium.nC] &quot;Trace substance mixture content&quot;;

  Medium.BaseProperties[n] mediums(
    each preferredMediumStates=true,
    p(start=ps_start),
    each h(start=h_start),
    each T(start=T_start),
    each Xi(start=X_start[1:Medium.nXi]));

  //Source terms, have to be defined by an extending model (to zero if not used)
  Medium.MassFlowRate[n] mb_flows &quot;Mass flow rate, source or sink&quot;;
  Medium.MassFlowRate[n,Medium.nXi] mbXi_flows 
    &quot;Independent mass flow rates, source or sink&quot;;
  Medium.ExtraPropertyFlowRate[n,Medium.nC] mbC_flows 
    &quot;Trace substance mass flow rates, source or sink&quot;;
  SI.EnthalpyFlowRate[n] Hb_flows &quot;Enthalpy flow rate, source or sink&quot;;
  SI.HeatFlowRate[n] Qb_flows &quot;Heat flow rate, source or sink&quot;;
  SI.Power[n] Wb_flows &quot;Mechanical power, p*der(V) etc.&quot;;

protected 
  parameter Boolean initialize_p = not Medium.singleState 
    &quot;= true to set up initial equations for pressure&quot;;

equation 
  assert(not (energyDynamics&lt;&gt;Dynamics.SteadyState and massDynamics==Dynamics.SteadyState) or Medium.singleState,
         &quot;Bad combination of dynamics options and Medium not conserving mass if fluidVolumes are fixed.&quot;);

  // Total quantities
  for i in 1:n loop
    ms[i] =fluidVolumes[i]*mediums[i].d;
    mXis[i, :] = ms[i]*mediums[i].Xi;
    mCs[i, :]  = ms[i]*Cs[i, :];
    Us[i] = ms[i]*mediums[i].u;
  end for;

  // Energy and mass balances
  if energyDynamics == Dynamics.SteadyState then
    for i in 1:n loop
      0 = Hb_flows[i] + Wb_flows[i] + Qb_flows[i];
    end for;
  else
    for i in 1:n loop
      der(Us[i]) = Hb_flows[i] + Wb_flows[i] + Qb_flows[i];
    end for;
  end if;
  if massDynamics == Dynamics.SteadyState then
    for i in 1:n loop
      0 = mb_flows[i];
    end for;
  else
    for i in 1:n loop
      der(ms[i]) = mb_flows[i];
    end for;
  end if;
  if substanceDynamics == Dynamics.SteadyState then
    for i in 1:n loop
      zeros(Medium.nXi) = mbXi_flows[i, :];
    end for;
  else
    for i in 1:n loop
      der(mXis[i, :]) = mbXi_flows[i, :];
    end for;
  end if;
  if traceDynamics == Dynamics.SteadyState then
    for i in 1:n loop
      zeros(Medium.nC)  = mbC_flows[i, :];
    end for;
  else
    for i in 1:n loop
      der(mCs_scaled[i, :])  = mbC_flows[i, :]./Medium.C_nominal;
      mCs[i, :] = mCs_scaled[i, :].*Medium.C_nominal;
    end for;
  end if;

initial equation 
  // initialization of balances
  if energyDynamics == Dynamics.FixedInitial then
    /*
    if use_T_start then
      mediums.T = fill(T_start, n);
    else
      mediums.h = fill(h_start, n);
    end if;
    */
    if Medium.ThermoStates == IndependentVariables.ph or 
       Medium.ThermoStates == IndependentVariables.phX then
       mediums.h = fill(h_start, n);
    else
       mediums.T = fill(T_start, n);
    end if;

  elseif energyDynamics == Dynamics.SteadyStateInitial then
    /*
    if use_T_start then
      der(mediums.T) = zeros(n);
    else
      der(mediums.h) = zeros(n);
    end if;
    */
    if Medium.ThermoStates == IndependentVariables.ph or 
       Medium.ThermoStates == IndependentVariables.phX then
       der(mediums.h) = zeros(n);
    else
       der(mediums.T) = zeros(n);
    end if;
  end if;

  if massDynamics == Dynamics.FixedInitial then
    if initialize_p then
      mediums.p = ps_start;
    end if;
  elseif massDynamics == Dynamics.SteadyStateInitial then
    if initialize_p then
      der(mediums.p) = zeros(n);
    end if;
  end if;

  if substanceDynamics == Dynamics.FixedInitial then
    mediums.Xi = fill(X_start[1:Medium.nXi], n);
  elseif substanceDynamics == Dynamics.SteadyStateInitial then
    for i in 1:n loop
      der(mediums[i].Xi) = zeros(Medium.nXi);
    end for;
  end if;

  if traceDynamics == Dynamics.FixedInitial then
    Cs = fill(C_start[1:Medium.nC], n);
  elseif traceDynamics == Dynamics.SteadyStateInitial then
    for i in 1:n loop
      der(mCs[i,:])      = zeros(Medium.nC);
    end for;
  end if;

end PartialDistributedVolume;</code></pre>
<hr />
<h1 id="modelica.fluid.interfaces.partialdistributedflow"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialDistributedFlow</h1>
<p><strong>Base class for a distributed momentum balance</strong></p>
<h2 id="information-13">Information</h2>
<p>::</p>
<p>Interface and base class for <code>m</code> momentum balances, defining the mass flow rates <code>m_flows[m]</code> of a given <code>Medium</code> in <code>m</code> flow segments.</p>
<p>The following boundary flow and force terms are part of the momentum balances and must be specified in an extending model (to zero if not considered):</p>
<ul>
<li><code>Ib_flows[m]</code>, the flows of momentum across segment boundaries,</li>
<li><code>Fs_p[m]</code>, pressure forces, and</li>
<li><code>Fs_fg[m]</code>, friction and gravity forces.</li>
</ul>
<p>The lengths along the flow path <code>pathLengths[m]</code> are an input that needs to be set in an extending class to complete the model.</p>
<p>::</p>
<h2 id="parameters-10">Parameters</h2>
<table>
<col width="43%" />
<col width="12%" />
<col width="10%" />
<col width="33%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left">Modelica.Media.Interfaces.Pa...</td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">m</td>
<td align="left">1</td>
<td align="left">Number of flow segments</td>
</tr>
<tr class="odd">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (m_flows &gt;= zeros(m))</td>
</tr>
<tr class="odd">
<td align="left">Dynamics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics">Dynamics</a></td>
<td align="left">momentumDynamics</td>
<td align="left">system.momentumDynamics</td>
<td align="left">Formulation of momentum balance</td>
</tr>
<tr class="odd">
<td align="left"><strong>Initialization</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Start value of mass flow rates [kg/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-4">Connectors</h2>
<table>
<col width="41%" />
<col width="37%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-13">Modelica definition</h2>
<pre><code>partial model PartialDistributedFlow 
  &quot;Base class for a distributed momentum balance&quot;

  outer Modelica.Fluid.System system &quot;System properties&quot;;

  replaceable package Medium =
    Modelica.Media.Interfaces.PartialMedium &quot;Medium in the component&quot;;

  parameter Boolean allowFlowReversal = system.allowFlowReversal 
    &quot;= true to allow flow reversal, false restricts to design direction (m_flows &gt;= zeros(m))&quot;;

  // Discretization
  parameter Integer m=1 &quot;Number of flow segments&quot;;

  // Inputs provided to the flow model
  input SI.Length[m] pathLengths &quot;Lengths along flow path&quot;;

  // Variables defined by momentum model
  Medium.MassFlowRate[m] m_flows(
     each min=if allowFlowReversal then -Modelica.Constants.inf else 0,
     each start = m_flow_start,
     each stateSelect = if momentumDynamics == Types.Dynamics.SteadyState then StateSelect.default else 
                               StateSelect.prefer) 
    &quot;mass flow rates between states&quot;;

  // Parameters
  parameter Modelica.Fluid.Types.Dynamics momentumDynamics=system.momentumDynamics 
    &quot;Formulation of momentum balance&quot;;

  parameter Medium.MassFlowRate m_flow_start=system.m_flow_start 
    &quot;Start value of mass flow rates&quot;;

  // Total quantities
  SI.Momentum[m] Is &quot;Momentums of flow segments&quot;;

  // Source terms and forces to be defined by an extending model (zero if not used)
  SI.Force[m] Ib_flows &quot;Flow of momentum across boudaries&quot;;
  SI.Force[m] Fs_p &quot;Pressure forces&quot;;
  SI.Force[m] Fs_fg &quot;Friction and gravity forces&quot;;

equation 
  // Total quantities
  Is = {m_flows[i]*pathLengths[i] for i in 1:m};

  // Momentum balances
  if momentumDynamics == Types.Dynamics.SteadyState then
    zeros(m) = Ib_flows - Fs_p - Fs_fg;
  else
    der(Is) = Ib_flows - Fs_p - Fs_fg;
  end if;

initial equation 
  if momentumDynamics == Types.Dynamics.FixedInitial then
    m_flows = fill(m_flow_start, m);
  elseif momentumDynamics == Types.Dynamics.SteadyStateInitial then
    der(m_flows) = zeros(m);
  end if;

end PartialDistributedFlow;</code></pre>
<hr />
<h1 id="image31-modelica.fluid.interfaces.partialpressureloss"><img src="Modelica.Fluid.Interfaces.PartialPressureLossI.png" alt="image31" /> <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces">Modelica.Fluid.Interfaces</a>.PartialPressureLoss</h1>
<p><strong>Base flow model for pressure loss functions with the same area at port_a and at port_b</strong></p>
<h2 id="information-14">Information</h2>
<p>Extends from <a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport">Modelica.Fluid.Interfaces.PartialTwoPortTransport</a> (Partial element transporting fluid between two ports without storage of mass or energy).</p>
<h2 id="parameters-11">Parameters</h2>
<table>
<col width="35%" />
<col width="30%" />
<col width="8%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">replaceable package Medium</td>
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium">PartialMedium</a></td>
<td align="left">Medium in the component</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><strong>Assumptions</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">allowFlowReversal</td>
<td align="left">system.allowFlowReversal</td>
<td align="left">= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure">AbsolutePressure</a></td>
<td align="left">dp_start</td>
<td align="left">0.01*system.p_start</td>
<td align="left">Guess value of dp = port_a.p - port_b.p [Pa]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_start</td>
<td align="left">system.m_flow_start</td>
<td align="left">Guess value of m_flow = port_a.m_flow [kg/s]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate">MassFlowRate</a></td>
<td align="left">m_flow_small</td>
<td align="left">system.m_flow_small</td>
<td align="left">Small mass flow rate for regularization of zero flow [kg/s]</td>
</tr>
<tr class="even">
<td align="left">Diagnostics</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">show_T</td>
<td align="left">true</td>
<td align="left">= true, if temperatures at port_a and port_b are computed</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">show_V_flow</td>
<td align="left">true</td>
<td align="left">= true, if volume flow rate at inflowing port is computed</td>
</tr>
</tbody>
</table>
<h2 id="connectors-5">Connectors</h2>
<table>
<col width="49%" />
<col width="6%" />
<col width="44%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td>
<td align="left">port_a</td>
<td align="left">Fluid connector a (positive design flow direction is from port_a to port_b)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td>
<td align="left">port_b</td>
<td align="left">Fluid connector b (positive design flow direction is from port_a to port_b)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-14">Modelica definition</h2>
<pre><code>partial model PartialPressureLoss 
  &quot;Base flow model for pressure loss functions with the same area at port_a and at port_b&quot;
  extends Modelica.Fluid.Interfaces.PartialTwoPortTransport;
protected 
  parameter Medium.ThermodynamicState state_dp_small=Medium.setState_pTX(
                       Medium.reference_p,
                       Medium.reference_T,
                       Medium.reference_X) &quot;Medium state to compute dp_small&quot;;
  Medium.Density d_a 
    &quot;Density at port_a when fluid is flowing from port_a to port_b&quot;;
  Medium.Density d_b 
    &quot;If allowFlowReversal=true then Density at port_b when fluid is flowing from port_b to port_a else d_a&quot;;
  Medium.DynamicViscosity eta_a 
    &quot;Dynamic viscosity at port_a when fluid is flowing from port_a to port_b&quot;;
  Medium.DynamicViscosity eta_b 
    &quot;If allowFlowReversal=true then Dynamic viscosity at port_b when fluid is flowing from port_b to port_a else eta_a&quot;;
equation 
  // Isenthalpic state transformation (no storage and no loss of energy)
  port_a.h_outflow = inStream(port_b.h_outflow);
  port_b.h_outflow = inStream(port_a.h_outflow);

  // Medium properties
  d_a   = Medium.density(state_a);
  eta_a = Medium.dynamicViscosity(state_a);
  if allowFlowReversal then
    d_b   = Medium.density(state_b);
    eta_b = Medium.dynamicViscosity(state_b);
  else
    d_b   = d_a;
    eta_b = eta_a;
  end if;

end PartialPressureLoss;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:19 2010.</p>
</body>
</html>
