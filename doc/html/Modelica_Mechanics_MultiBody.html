<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.MultiBody</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.MultiBody</h1>
</div>
<h1 id="modelica.mechanics.multibody"><a href="Modelica_Mechanics.html#Modelica.Mechanics">Modelica.Mechanics</a>.MultiBody</h1>
<p><strong>Library to model 3-dimensional mechanical systems</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>Library <strong>MultiBody</strong> is a <strong>free</strong> Modelica package providing 3-dimensional mechanical components to model in a convenient way <strong>mechanical systems</strong>, such as robots, mechanisms, vehicles. Typical animations generated with this library are shown in the next figure:</p>
<p>For an introduction, have especially a look at:</p>
<ul>
<li><a href="Modelica_Mechanics_MultiBody_UsersGuide.html#Modelica.Mechanics.MultiBody.UsersGuide">MultiBody.UsersGuide</a> discusses the most important aspects how to use this library.</li>
<li><a href="Modelica_Mechanics_MultiBody_Examples.html#Modelica.Mechanics.MultiBody.Examples">MultiBody.Examples</a> contains examples that demonstrate the usage of this library.</li>
</ul>
<p>Copyright Â© 1998-2010, Modelica Association and DLR.</p>
<p><em>This Modelica package is free software and the use is completely at your own risk; it can be redistributed and/or modified under the terms of the Modelica License 2. For license conditions (including the disclaimer of warranty) see <a href="Modelica_UsersGuide.html#Modelica.UsersGuide.ModelicaLicense2">Modelica.UsersGuide.ModelicaLicense2</a> or visit <a href="http://www.modelica.org/licenses/ModelicaLicense2"><a href="http://www.modelica.org/licenses/ModelicaLicense2">http://www.modelica.org/licenses/ModelicaLicense2</a></a>.</em></p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="66%" />
<col width="33%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.UsersGuideS.png" alt="image12" /> <a href="Modelica_Mechanics_MultiBody_UsersGuide.html#Modelica.Mechanics.MultiBody.UsersGuide">UsersGuide</a></td>
<td align="left">User's Guide of MultiBody Library</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.WorldS.png" alt="image13" /> <a href="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World">World</a></td>
<td align="left">World coordinate system + gravity field + default animation definition</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.ExamplesS.png" alt="image14" /> <a href="Modelica_Mechanics_MultiBody_Examples.html#Modelica.Mechanics.MultiBody.Examples">Examples</a></td>
<td align="left">Examples that demonstrate the usage of the MultiBody library</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.ForcesS.png" alt="image15" /> <a href="Modelica_Mechanics_MultiBody_Forces.html#Modelica.Mechanics.MultiBody.Forces">Forces</a></td>
<td align="left">Components that exert forces and/or torques between frames</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.FramesS.png" alt="image16" /> <a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames">Frames</a></td>
<td align="left">Functions to transform rotational frame quantities</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.InterfacesS.png" alt="image17" /> <a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces">Interfaces</a></td>
<td align="left">Connectors and partial models for 3-dim. mechanical components</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.JointsS.png" alt="image18" /> <a href="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints">Joints</a></td>
<td align="left">Components that constrain the motion between two frames</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.JointsS.png" alt="image19" /> <a href="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts">Parts</a></td>
<td align="left">Rigid components such as bodies with mass and inertia and massless rods</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.SensorsS.png" alt="image20" /> <a href="Modelica_Mechanics_MultiBody_Sensors.html#Modelica.Mechanics.MultiBody.Sensors">Sensors</a></td>
<td align="left">Sensors to measure variables</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.VisualizersS.png" alt="image21" /> <a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers">Visualizers</a></td>
<td align="left">3-dimensional visual objects used for animation</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.VisualizersS.png" alt="image22" /> <a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types">Types</a></td>
<td align="left">Constants and types with choices, especially to build menus</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.VisualizersS.png" alt="image23" /> <a href="Modelica_Mechanics_MultiBody_Icons.html#Modelica.Mechanics.MultiBody.Icons">Icons</a></td>
<td align="left">Icons for MultiBody package</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image24-modelica.mechanics.multibody.world"><img src="Modelica.Mechanics.MultiBody.WorldI.png" alt="image24" /> <a href="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody">Modelica.Mechanics.MultiBody</a>.World</h1>
<p><strong>World coordinate system + gravity field + default animation definition</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>Model <strong>World</strong> represents a global coordinate system fixed in ground. This model serves several purposes:</p>
<ul>
<li>It is used as <strong>inertial system</strong> in which the equations of all elements of the MultiBody library are defined.</li>
<li>It is the world frame of an <strong>animation window</strong> in which all elements of the MultiBody library are visualized.</li>
<li>It is used to define the <strong>gravity field</strong> in which a multi-body model is present. Default is a uniform gravity field where the gravity acceleration vector g is the same at every position. Additionally, a point gravity field or no gravity can be selected. Also, function gravityAcceleration can be redeclared to a user-defined function that computes the gravity acceleration, see example <a href="Modelica_Mechanics_MultiBody_Examples_Elementary.html#Modelica.Mechanics.MultiBody.Examples.Elementary.UserDefinedGravityField">Examples.Elementary.UserDefinedGravityField</a>.</li>
<li>It is used to define <strong>default settings</strong> of animation properties (e.g., the diameter of a sphere representing by default the center of mass of a body, or the diameters of the cylinders representing a revolute joint).</li>
<li>It is used to define a <strong>visual representation</strong> of the world model (= 3 coordinate axes with labels) and of the defined gravity field. <img src="../Resources/Images/MultiBody/world.png" alt="MultiBodys.World" /></li>
</ul>
<p>Since the gravity field function is required from all bodies with mass and the default settings of animation properties are required from nearly every component, exactly one instance of model World needs to be present in every model on the top level. The basic declaration needs to be:</p>
<pre><code>inner Modelica.Mechanics.MultiBody.World world</code></pre>
<p>Note, it must be an <strong>inner</strong> declaration with instance name <strong>world</strong> in order that this world object can be accessed from all objects in the model. When dragging the &quot;World&quot; object from the package browser into the diagram layer, this declaration is automatically generated (this is defined via annotations in model World).</p>
<p>All vectors and tensors of a mechanical system are resolved in a frame that is local to the corresponding component. Usually, if all relative joint coordinates vanish, the local frames of all components are parallel to each other, as well as to the world frame (this holds as long as a Parts.FixedRotation, component is <strong>not</strong> used). In this &quot;reference configuration&quot; it is therefore alternatively possible to resolve all vectors in the world frame, since all frames are parallel to each other. This is often very convenient. In order to give some visual support in such a situation, in the icon of a World instance two axes of the world frame are shown and the labels of these axes can be set via parameters.</p>
<p>::</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="38%" />
<col width="11%" />
<col width="12%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">enableAnimation</td>
<td align="left">true</td>
<td align="left">= true, if animation of all components is enabled</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">animateWorld</td>
<td align="left">true</td>
<td align="left">= true, if world coordinate system shall be visualized</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">animateGravity</td>
<td align="left">true</td>
<td align="left">= true, if gravity field shall be visualized (acceleration vector or field center)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel">AxisLabel</a></td>
<td align="left">label1</td>
<td align="left">&quot;x&quot;</td>
<td align="left">Label of horizontal axis in icon</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel">AxisLabel</a></td>
<td align="left">label2</td>
<td align="left">&quot;y&quot;</td>
<td align="left">Label of vertical axis in icon</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes">GravityTypes</a></td>
<td align="left">gravityType</td>
<td align="left">GravityTypes.UniformGravity</td>
<td align="left">Type of gravity field</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Acceleration">Acceleration</a></td>
<td align="left">g</td>
<td align="left">9.81</td>
<td align="left">Constant gravity acceleration [m/s2]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Axis">Axis</a></td>
<td align="left">n</td>
<td align="left">{0,-1,0}</td>
<td align="left">Direction of gravity resolved in world frame (gravity = g*n/length(n)) [1]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">mue</td>
<td align="left">3.986e14</td>
<td align="left">Gravity field constant (default = field constant of earth) [m3/s2]</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">driveTrainMechanics3D</td>
<td align="left">true</td>
<td align="left">= true, if 3-dim. mechanical effects of Parts.Mounting1D/Rotor1D/BevelGear1D shall be taken into account</td>
</tr>
<tr class="odd">
<td align="left"><strong>Animation</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">if animateWorld = true</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">axisLength</td>
<td align="left">nominalLength/2</td>
<td align="left">Length of world axes arrows [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">axisDiameter</td>
<td align="left">axisLength/defaultFrameDiame...</td>
<td align="left">Diameter of world axes arrows [m]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">axisShowLabels</td>
<td align="left">true</td>
<td align="left">= true, if labels shall be shown</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">axisColor_x</td>
<td align="left">Modelica.Mechanics.MultiBody...</td>
<td align="left">Color of x-arrow</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">axisColor_y</td>
<td align="left">axisColor_x</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">axisColor_z</td>
<td align="left">axisColor_x</td>
<td align="left">Color of z-arrow</td>
</tr>
<tr class="odd">
<td align="left">if animateGravity = true and gravityType = UniformGravity</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">gravityArrowTail[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to arrow tail, resolved in world frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">gravityArrowLength</td>
<td align="left">axisLength/2</td>
<td align="left">Length of gravity arrow [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">gravityArrowDiameter</td>
<td align="left">gravityArrowLength/defaultWi...</td>
<td align="left">Diameter of gravity arrow [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">gravityArrowColor</td>
<td align="left">{0,230,0}</td>
<td align="left">Color of gravity arrow</td>
</tr>
<tr class="even">
<td align="left">if animateGravity = true and gravityType = PointGravity</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">gravitySphereDiameter</td>
<td align="left">12742000</td>
<td align="left">Diameter of sphere representing gravity center (default = mean diameter of earth) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">gravitySphereColor</td>
<td align="left">{0,230,0}</td>
<td align="left">Color of gravity sphere</td>
</tr>
<tr class="odd">
<td align="left"><strong>Defaults</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">nominalLength</td>
<td align="left">1</td>
<td align="left">&quot;Nominal&quot; length of multi-body system [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultAxisLength</td>
<td align="left">nominalLength/5</td>
<td align="left">Default for length of a frame axis (but not world frame) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultJointLength</td>
<td align="left">nominalLength/10</td>
<td align="left">Default for the fixed length of a shape representing a joint [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultJointWidth</td>
<td align="left">nominalLength/20</td>
<td align="left">Default for the fixed width of a shape representing a joint [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultForceLength</td>
<td align="left">nominalLength/10</td>
<td align="left">Default for the fixed length of a shape representing a force (e.g., damper) [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultForceWidth</td>
<td align="left">nominalLength/20</td>
<td align="left">Default for the fixed width of a shape represening a force (e.g., spring, bushing) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultBodyDiameter</td>
<td align="left">nominalLength/9</td>
<td align="left">Default for diameter of sphere representing the center of mass of a body [m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">defaultWidthFraction</td>
<td align="left">20</td>
<td align="left">Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">defaultArrowDiameter</td>
<td align="left">nominalLength/40</td>
<td align="left">Default for arrow diameter (e.g., of forces, torques, sensors) [m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">defaultFrameDiameterFraction</td>
<td align="left">40</td>
<td align="left">Default for arrow diameter of a coordinate system as a fraction of axis length</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">defaultSpecularCoefficient</td>
<td align="left">0.7</td>
<td align="left">Default reflection of ambient light (= 0: light is completely absorbed)</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">defaultN_to_m</td>
<td align="left">1000</td>
<td align="left">Default scaling of force arrows (length = force/defaultN_to_m) [N/m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">defaultNm_to_m</td>
<td align="left">1000</td>
<td align="left">Default scaling of torque arrows (length = torque/defaultNm_to_m) [N.m/m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="60%" />
<col width="7%" />
<col width="32%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.Frame_b">Frame_b</a></td>
<td align="left">frame_b</td>
<td align="left">Coordinate system fixed in the origin of the world frame</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>model World 
  &quot;World coordinate system + gravity field + default animation definition&quot;

  import SI = Modelica.SIunits;
  import Modelica.Mechanics.MultiBody.Types.GravityTypes;
  import Modelica.Mechanics.MultiBody.Types;

    Interfaces.Frame_b frame_b 
    &quot;Coordinate system fixed in the origin of the world frame&quot;;

  parameter Boolean enableAnimation=true 
    &quot;= true, if animation of all components is enabled&quot;;
  parameter Boolean animateWorld=true 
    &quot;= true, if world coordinate system shall be visualized&quot;;
  parameter Boolean animateGravity=true 
    &quot;= true, if gravity field shall be visualized (acceleration vector or field center)&quot;;
  parameter Types.AxisLabel label1=&quot;x&quot; &quot;Label of horizontal axis in icon&quot;;
  parameter Types.AxisLabel label2=&quot;y&quot; &quot;Label of vertical axis in icon&quot;;
  parameter Types.GravityTypes gravityType=GravityTypes.UniformGravity 
    &quot;Type of gravity field&quot;;
  parameter SI.Acceleration g=9.81 &quot;Constant gravity acceleration&quot;;
  parameter Types.Axis n={0,-1,0} 
    &quot;Direction of gravity resolved in world frame (gravity = g*n/length(n))&quot;;
  parameter Real mue(
    unit=&quot;m3/s2&quot;,
    min=0) = 3.986e14 
    &quot;Gravity field constant (default = field constant of earth)&quot;;
  parameter Boolean driveTrainMechanics3D=true 
    &quot;= true, if 3-dim. mechanical effects of Parts.Mounting1D/Rotor1D/BevelGear1D shall be taken into account&quot;;

  parameter SI.Distance axisLength=nominalLength/2 
    &quot;Length of world axes arrows&quot;;
  parameter SI.Distance axisDiameter=axisLength/defaultFrameDiameterFraction 
    &quot;Diameter of world axes arrows&quot;;
  parameter Boolean axisShowLabels=true &quot;= true, if labels shall be shown&quot;;
  input Types.Color axisColor_x=Modelica.Mechanics.MultiBody.Types.Defaults.FrameColor 
    &quot;Color of x-arrow&quot;;
  input Types.Color axisColor_y=axisColor_x;
  input Types.Color axisColor_z=axisColor_x &quot;Color of z-arrow&quot;;

  parameter SI.Position gravityArrowTail[3]={0,0,0} 
    &quot;Position vector from origin of world frame to arrow tail, resolved in world frame&quot;;
  parameter SI.Length gravityArrowLength=axisLength/2 &quot;Length of gravity arrow&quot;;
  parameter SI.Diameter gravityArrowDiameter=gravityArrowLength/
      defaultWidthFraction &quot;Diameter of gravity arrow&quot;;
  input Types.Color gravityArrowColor={0,230,0} &quot;Color of gravity arrow&quot;;
  parameter SI.Diameter gravitySphereDiameter=12742000 
    &quot;Diameter of sphere representing gravity center (default = mean diameter of earth)&quot;;
  input Types.Color gravitySphereColor={0,230,0} &quot;Color of gravity sphere&quot;;

  parameter SI.Length nominalLength=1 &quot;\&quot;Nominal\&quot; length of multi-body system&quot;;
  parameter SI.Length defaultAxisLength=nominalLength/5 
    &quot;Default for length of a frame axis (but not world frame)&quot;;
  parameter SI.Length defaultJointLength=nominalLength/10 
    &quot;Default for the fixed length of a shape representing a joint&quot;;
  parameter SI.Length defaultJointWidth=nominalLength/20 
    &quot;Default for the fixed width of a shape representing a joint&quot;;
  parameter SI.Length defaultForceLength=nominalLength/10 
    &quot;Default for the fixed length of a shape representing a force (e.g., damper)&quot;;
  parameter SI.Length defaultForceWidth=nominalLength/20 
    &quot;Default for the fixed width of a shape represening a force (e.g., spring, bushing)&quot;;
  parameter SI.Length defaultBodyDiameter=nominalLength/9 
    &quot;Default for diameter of sphere representing the center of mass of a body&quot;;
  parameter Real defaultWidthFraction=20 
    &quot;Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)&quot;;
  parameter SI.Length defaultArrowDiameter=nominalLength/40 
    &quot;Default for arrow diameter (e.g., of forces, torques, sensors)&quot;;
  parameter Real defaultFrameDiameterFraction=40 
    &quot;Default for arrow diameter of a coordinate system as a fraction of axis length&quot;;
  parameter Real defaultSpecularCoefficient(min=0) = 0.7 
    &quot;Default reflection of ambient light (= 0: light is completely absorbed)&quot;;
  parameter Real defaultN_to_m(unit=&quot;N/m&quot;, min=0) = 1000 
    &quot;Default scaling of force arrows (length = force/defaultN_to_m)&quot;;
  parameter Real defaultNm_to_m(unit=&quot;N.m/m&quot;, min=0) = 1000 
    &quot;Default scaling of torque arrows (length = torque/defaultNm_to_m)&quot;;

  replaceable function gravityAcceleration =
       Modelica.Mechanics.MultiBody.Forces.Internal.standardGravityAcceleration
      (    gravityType=gravityType, g=g*Modelica.Math.Vectors.normalize(n,0.0), mue=mue)
       constrainedby 
    Modelica.Mechanics.MultiBody.Interfaces.partialGravityAcceleration 
    &quot;Function to compute the gravity acceleration, resolved in world frame&quot;;

  /* The World object can only use the Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape model, but no
     other models in package Modelica.Mechanics.MultiBody.Visualizers, since the other models access
     data of the &quot;outer Modelica.Mechanics.MultiBody.World world&quot; object, i.e., there are
     mutually dependent classes. For this reason, the higher level visualization
     objects cannot be used.
  */
protected 
  parameter Integer ndim=if enableAnimation and animateWorld then 1 else 0;
  parameter Integer ndim2=if enableAnimation and animateWorld and 
      axisShowLabels then 1 else 0;

  // Parameters to define axes
  parameter SI.Length headLength=min(axisLength, axisDiameter*Types.Defaults.
      FrameHeadLengthFraction);
  parameter SI.Length headWidth=axisDiameter*Types.Defaults.
      FrameHeadWidthFraction;
  parameter SI.Length lineLength=max(0, axisLength - headLength);
  parameter SI.Length lineWidth=axisDiameter;

  // Parameters to define axes labels
  parameter SI.Length scaledLabel=Modelica.Mechanics.MultiBody.Types.Defaults.FrameLabelHeightFraction*
      axisDiameter;
  parameter SI.Length labelStart=1.05*axisLength;

  // x-axis
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape x_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    color=axisColor_x,
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape x_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    color=axisColor_x,
    r={lineLength,0,0},
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines x_label(
    lines=scaledLabel*{[0, 0; 1, 1],[0, 1; 1, 0]},
    diameter=axisDiameter,
    color=axisColor_x,
    r_lines={labelStart,0,0},
    n_x={1,0,0},
    n_y={0,1,0},
    specularCoefficient=0) if enableAnimation and animateWorld and axisShowLabels;

  // y-axis
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape y_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={0,1,0},
    widthDirection={1,0,0},
    color=axisColor_y,
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape y_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={0,1,0},
    widthDirection={1,0,0},
    color=axisColor_y,
    r={0,lineLength,0},
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines y_label(
    lines=scaledLabel*{[0, 0; 1, 1.5],[0, 1.5; 0.5, 0.75]},
    diameter=axisDiameter,
    color=axisColor_y,
    r_lines={0,labelStart,0},
    n_x={0,1,0},
    n_y={-1,0,0},
    specularCoefficient=0) if enableAnimation and animateWorld and axisShowLabels;

  // z-axis
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape z_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={0,0,1},
    widthDirection={0,1,0},
    color=axisColor_z,
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape z_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={0,0,1},
    widthDirection={0,1,0},
    color=axisColor_z,
    r={0,0,lineLength},
    specularCoefficient=0) if enableAnimation and animateWorld;
  Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines z_label(
    lines=scaledLabel*{[0, 0; 1, 0],[0, 1; 1, 1],[0, 1; 1, 0]},
    diameter=axisDiameter,
    color=axisColor_z,
    r_lines={0,0,labelStart},
    n_x={0,0,1},
    n_y={0,1,0},
    specularCoefficient=0) if enableAnimation and animateWorld and axisShowLabels;

  // Uniform gravity visualization
  parameter SI.Length gravityHeadLength=min(gravityArrowLength,
      gravityArrowDiameter*Types.Defaults.ArrowHeadLengthFraction);
  parameter SI.Length gravityHeadWidth=gravityArrowDiameter*Types.Defaults.ArrowHeadWidthFraction;
  parameter SI.Length gravityLineLength=max(0, gravityArrowLength - gravityHeadLength);
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape gravityArrowLine(
    shapeType=&quot;cylinder&quot;,
    length=gravityLineLength,
    width=gravityArrowDiameter,
    height=gravityArrowDiameter,
    lengthDirection=n,
    widthDirection={0,1,0},
    color=gravityArrowColor,
    r_shape=gravityArrowTail,
    specularCoefficient=0) if enableAnimation and animateGravity and gravityType == GravityTypes.UniformGravity;
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape gravityArrowHead(
    shapeType=&quot;cone&quot;,
    length=gravityHeadLength,
    width=gravityHeadWidth,
    height=gravityHeadWidth,
    lengthDirection=n,
    widthDirection={0,1,0},
    color=gravityArrowColor,
    r_shape=gravityArrowTail + Modelica.Math.Vectors.normalize(
                                                n)*gravityLineLength,
    specularCoefficient=0) if enableAnimation and animateGravity and gravityType == GravityTypes.UniformGravity;

  // Point gravity visualization
  parameter Integer ndim_pointGravity=if enableAnimation and animateGravity
       and gravityType == 2 then 1 else 0;
  Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape gravitySphere(
    shapeType=&quot;sphere&quot;,
    r_shape={-gravitySphereDiameter/2,0,0},
    lengthDirection={1,0,0},
    length=gravitySphereDiameter,
    width=gravitySphereDiameter,
    height=gravitySphereDiameter,
    color=gravitySphereColor,
    specularCoefficient=0) if enableAnimation and animateGravity and gravityType == GravityTypes.PointGravity;

/*
  function gravityAcceleration = gravityAccelerationTypes (
      gravityType=gravityType,
      g=g*Modelica.Math.Vectors.normalize(
                                     n),
      mue=mue);
*/

equation 
  Connections.root(frame_b.R);

  assert(Modelica.Math.Vectors.length(
                       n) &gt; 1.e-10,
    &quot;Parameter n of World object is wrong (lenght(n) &gt; 0 required)&quot;);
  frame_b.r_0 = zeros(3);
  frame_b.R = Frames.nullRotation();
end World;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:03 2010.</p>
</body>
</html>
