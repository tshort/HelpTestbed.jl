<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Electrical.Spice3.Internal.Functions</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Electrical.Spice3.Internal.Functions</h1>
</div>
<h1 id="modelica.electrical.spice3.internal.functions"><a href="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal">Modelica.Electrical.Spice3.Internal</a>.Functions</h1>
<p><strong>Equations for semiconductor calculation</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>The package Equation contains functions that are needed to model the semiconductor models. Some of these functions are used by several semiconductor models.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="83%" />
<col width="16%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image15" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTemp">energyGapDepTemp</a></td>
<td align="left">Temperature dependency of energy gap</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image16" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionPotDepTemp">junctionPotDepTemp</a></td>
<td align="left">Temperature dependency of junction potential</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image17" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3MOSFET">saturationCurDepTempSPICE3MOSFET</a></td>
<td align="left">Temperature dependency of saturation current</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image18" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit">junctionVCrit</a></td>
<td align="left">Voltage limitation</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image19" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3">junctionParamDepTempSPICE3</a></td>
<td align="left">Temperature dependency of junction parameters</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image20" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs">junctionCapCoeffs</a></td>
<td align="left">Coefficient calculation</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image21" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction2SPICE3MOSFET">junction2SPICE3MOSFET</a></td>
<td align="left">Junction current and conductance calculation</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image22" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCap">junctionCap</a></td>
<td align="left">Junction capacity</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image23" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3">saturationCurDepTempSPICE3</a></td>
<td align="left">Temperature dependency of saturation current</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image24" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3">junctionVoltage23SPICE3</a></td>
<td align="left">Junction Voltage</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image25" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction3">junction3</a></td>
<td align="left">Junction current and conductance calculation</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image26" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime">junctionCapTransTime</a></td>
<td align="left">Junction capacitance transittime calculation</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image27" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction2">junction2</a></td>
<td align="left">Junction current and conductance calculation</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image28" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.resDepTemp">resDepTemp</a></td>
<td align="left">Temperature dependent conductance</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" alt="image29" /> <a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.resDepGeom">resDepGeom</a></td>
<td align="left">Resistance dependent from width and narrow</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.energygapdeptemp"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.energyGapDepTemp</h1>
<p><strong>Temperature dependency of energy gap</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>This internal function calculates the temperature dependent energy gap based on the actual temperature, and two coefficients given as input to the function.</p>
<p>::</p>
<h2 id="inputs">Inputs</h2>
<table>
<col width="60%" />
<col width="8%" />
<col width="11%" />
<col width="19%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Temperature [K]</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<col width="66%" />
<col width="9%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">ret</td>
<td align="left">Output voltage [V]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>function energyGapDepTemp &quot;Temperature dependency of energy gap&quot;

  input Modelica.SIunits.Temp_K temp &quot;Temperature&quot;;
  output Modelica.SIunits.Voltage ret &quot;Output voltage&quot;;

protected 
   Modelica.SIunits.Voltage gap0 =   1.16;
   Real coeff1( final unit = &quot;V/K&quot;) = 7.02e-4;
   Modelica.SIunits.Temp_K coeff2 = 1108.0;

algorithm 
  ret := gap0 - (coeff1 * temp * temp) / (temp + coeff2);

end energyGapDepTemp;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctionpotdeptemp"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionPotDepTemp</h1>
<p><strong>Temperature dependency of junction potential</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>This internal function calculates the temperature dependent junction potential based on the actual and the nominal temperature.</p>
<p>::</p>
<h2 id="inputs-1">Inputs</h2>
<table>
<col width="56%" />
<col width="7%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">phi0</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">tnom</td>
<td align="left">
</td>
<td align="left">Nominal Temperature [K]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-1">Outputs</h2>
<table>
<col width="66%" />
<col width="9%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">ret</td>
<td align="left">Output voltage [V]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>function junctionPotDepTemp 
  &quot;Temperature dependency of junction potential&quot;

  input Modelica.SIunits.Voltage phi0;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Modelica.SIunits.Temp_K tnom &quot;Nominal Temperature&quot;;

  output Modelica.SIunits.Voltage ret &quot;Output voltage&quot;;

protected 
  Modelica.SIunits.Voltage phibtemp;
  Modelica.SIunits.Voltage phibtnom;
  Modelica.SIunits.Voltage vt;

algorithm 
  phibtemp := energyGapDepTemp( temp);
  phibtnom := energyGapDepTemp( tnom);
  vt       := SpiceConstants.CONSTKoverQ * temp;
  ret := (phi0 - phibtnom) * temp / tnom + phibtemp + vt * 3 * Modelica.Math.log( tnom / temp);

end junctionPotDepTemp;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.saturationcurdeptempspice3mosfet"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.saturationCurDepTempSPICE3MOSFET</h1>
<p><strong>Temperature dependency of saturation current</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>This internal function calculates the temperature dependent saturation current based on the actual and the nominal temperature.</p>
<p>::</p>
<h2 id="inputs-2">Inputs</h2>
<table>
<col width="55%" />
<col width="10%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur0</td>
<td align="left">
</td>
<td align="left">Satuaration current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">tnom</td>
<td align="left">
</td>
<td align="left">Nominal Temperature [K]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-2">Outputs</h2>
<table>
<col width="66%" />
<col width="9%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">ret</td>
<td align="left">Output current [A]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>function saturationCurDepTempSPICE3MOSFET 
  &quot;Temperature dependency of saturation current&quot;

  input Modelica.SIunits.Current satcur0 &quot;Satuaration current&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Modelica.SIunits.Temp_K tnom &quot;Nominal Temperature&quot;;

  output Modelica.SIunits.Current ret &quot;Output current&quot;;

protected 
  Modelica.SIunits.Voltage vt;
  Modelica.SIunits.Voltage vtnom;
  Modelica.SIunits.Voltage energygaptnom;
  Modelica.SIunits.Voltage energygaptemp;

algorithm 
  vt            := SpiceConstants.CONSTKoverQ * temp;
  vtnom         := SpiceConstants.CONSTKoverQ * tnom;
  energygaptnom := energyGapDepTemp( tnom);
  energygaptemp := energyGapDepTemp( temp);
  ret           := satcur0  * exp( energygaptnom / vtnom - energygaptemp / vt);

end saturationCurDepTempSPICE3MOSFET;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctionvcrit"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionVCrit</h1>
<p><strong>Voltage limitation</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>This internal function limits the junction voltage. If it increases 1.e10, it is hold to be constant at that value.</p>
<p>::</p>
<h2 id="inputs-3">Inputs</h2>
<table>
<col width="56%" />
<col width="9%" />
<col width="10%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">temperature [K]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">ncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-3">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ret</td>
<td align="left">Output value</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>function junctionVCrit &quot;Voltage limitation&quot;

  input Modelica.SIunits.Temp_K temp &quot;temperature&quot;;
  input Real ncoeff;
  input Modelica.SIunits.Current satcur &quot;Saturation current&quot;;

  output Real ret &quot;Output value&quot;;

protected 
  Modelica.SIunits.Voltage vte;

algorithm 
  vte := SpiceConstants.CONSTKoverQ * temp * ncoeff;
  ret := vte * Modelica.Math.log( vte / (sqrt(2) * satcur));
  ret := if ( ret &gt; 1e10) then  1e10 else ret;

end junctionVCrit;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctionparamdeptempspice3"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionParamDepTempSPICE3</h1>
<p><strong>Temperature dependency of junction parameters</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>This internal function calculates several temperature dependent junction parameters based on the actual and the nominal temperature.</p>
<p>::</p>
<h2 id="inputs-4">Inputs</h2>
<table>
<col width="55%" />
<col width="9%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phi0</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">cap0</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">mcoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">tnom</td>
<td align="left">
</td>
<td align="left">Nominal temperature [K]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-4">Outputs</h2>
<table>
<col width="12%" />
<col width="22%" />
<col width="34%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">junctionpot</td>
<td align="left">Junction potential</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">jucntioncap</td>
<td align="left">Junction capacitance</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>function junctionParamDepTempSPICE3 
  &quot;Temperature dependency of junction parameters&quot;

  input Real phi0;
  input Real cap0;
  input Real mcoeff;
  input Modelica.SIunits.Temp_K temp &quot;Device temperature&quot;;
  input Modelica.SIunits.Temp_K tnom &quot;Nominal temperature&quot;;

  output Real junctionpot &quot;Junction potential&quot;;
  output Real jucntioncap &quot;Junction capacitance&quot;;

protected 
  Real phibtemp;
  Real phibtnom;
  Real vt;
  Real vtnom;
  Real arg;
  Real fact2;
  Real pbfact;
  Real arg1;
  Real fact1;
  Real pbfact1;
  Real pbo;
  Real gmaold;
  Real gmanew;

algorithm 
  phibtemp    := energyGapDepTemp( temp);
  phibtnom    := energyGapDepTemp( tnom);
  vt          := SpiceConstants.CONSTKoverQ * temp;
  vtnom       := SpiceConstants.CONSTKoverQ * tnom;
  arg         := -phibtemp/(2*Modelica.Constants.k*temp) +
                 1.1150877/(Modelica.Constants.k*(2*SpiceConstants.REFTEMP));
  fact2       := temp/SpiceConstants.REFTEMP;
  pbfact      := -2*vt*(1.5*Modelica.Math.log(fact2)+SpiceConstants.CHARGE*arg);
  arg1        := -phibtnom/(Modelica.Constants.k*2*tnom) +
                 1.1150877/(2*Modelica.Constants.k*SpiceConstants.REFTEMP);
  fact1       := tnom/SpiceConstants.REFTEMP;
  pbfact1     := -2 * vtnom*(1.5*Modelica.Math.log(fact1)+SpiceConstants.CHARGE*arg1);
  pbo         := (phi0-pbfact1)/fact1;
  junctionpot := pbfact+fact2*pbo;
  gmaold      := (phi0 -pbo)/pbo;
  gmanew      := (junctionpot-pbo)/pbo;
  jucntioncap := cap0 /
                 (1+mcoeff* (400e-6*(tnom-SpiceConstants.REFTEMP)-gmaold))  *
                 (1+mcoeff* (400e-6*(temp-SpiceConstants.REFTEMP)-gmanew));

end junctionParamDepTempSPICE3;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctioncapcoeffs"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionCapCoeffs</h1>
<p><strong>Coefficient calculation</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>This internal auxiliary function calculates some coefficients which are necessary for the calculation of junction capacities.</p>
<p>::</p>
<h2 id="inputs-5">Inputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="16%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">mj</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">fc</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phij</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-5">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">f1</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">f2</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">f3</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>function junctionCapCoeffs &quot;Coefficient calculation&quot;

  input Real mj;
  input Real fc;
  input Real phij;

  output Real f1;
  output Real f2;
  output Real f3;

protected 
  Real xfc;

algorithm 
  xfc := Modelica.Math.log(1 - fc);
  f1  := phij * (1 - exp(( 1 - mj)  * xfc)) / (1 - mj);
  f2  := exp(( 1 + mj) * xfc);
  f3  := 1 - fc * (1 + mj);

end junctionCapCoeffs;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junction2spice3mosfet"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junction2SPICE3MOSFET</h1>
<p><strong>Junction current and conductance calculation</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<p>::</p>
<h2 id="inputs-6">Inputs</h2>
<table>
<col width="58%" />
<col width="9%" />
<col width="9%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current</td>
<td align="left">
</td>
<td align="left">Input current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">cond</td>
<td align="left">
</td>
<td align="left">Input conductance [S]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">voltage</td>
<td align="left">
</td>
<td align="left">Input voltage [V]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-6">Outputs</h2>
<table>
<col width="60%" />
<col width="14%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">out_current</td>
<td align="left">Calculated current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">out_cond</td>
<td align="left">Calculated conductance [S]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>function junction2SPICE3MOSFET 
  &quot;Junction current and conductance calculation&quot;

  input Modelica.SIunits.Current current &quot;Input current&quot;;
  input Modelica.SIunits.Conductance cond &quot;Input conductance&quot;;
  input Modelica.SIunits.Voltage voltage &quot;Input voltage&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Real ncoeff;
  input Modelica.SIunits.Current satcur &quot;Saturation current&quot;;

  output Modelica.SIunits.Current out_current &quot;Calculated current&quot;;
  output Modelica.SIunits.Conductance out_cond &quot;Calculated conductance&quot;;

protected 
  Modelica.SIunits.Voltage vte;
  Real max_exponent;
  Real evbd;
  Real evd;
  constant Real max_exp =     50.;
  constant Modelica.SIunits.Current max_current = 1.e4;

algorithm 
  out_current := current;
  out_cond := cond;
  if (satcur &gt; 1e-101) then
    vte := SpiceConstants.CONSTKoverQ * temp * ncoeff;

    max_exponent := Modelica.Math.log(max_current/satcur);
    max_exponent := min(max_exp, max_exponent);

    if (voltage &lt;= 0) then
      out_cond    := satcur/vte;
      out_current := out_cond * voltage;
      out_cond    := out_cond + SpiceConstants.CKTgmin;
    elseif (voltage &gt;= max_exponent * vte) then
      evd         := exp( max_exponent);
      out_cond    := satcur * evd / vte;
      out_current := satcur * (evd - 1) + out_cond * (voltage - max_exponent * vte);

    else
      evbd        := exp( voltage / vte);
      out_cond    := satcur*evbd/vte + SpiceConstants.CKTgmin;
      out_current := satcur *(evbd-1);
    end if;
  else
    out_current := 0.;
    out_cond    := 0.;
  end if;

end junction2SPICE3MOSFET;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctioncap"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionCap</h1>
<p><strong>Junction capacity</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>This internal function calculates the charge and the capacitance of the junction capacity dependent from the given voltage.</p>
<p>::</p>
<h2 id="inputs-7">Inputs</h2>
<table>
<col width="59%" />
<col width="9%" />
<col width="9%" />
<col width="21%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance">Capacitance</a></td>
<td align="left">capin</td>
<td align="left">
</td>
<td align="left">Input capacitance [F]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">voltage</td>
<td align="left">
</td>
<td align="left">Input voltage [V]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">depcap</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">mj</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phij</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">f1</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">f2</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">f3</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-7">Outputs</h2>
<table>
<col width="65%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance">Capacitance</a></td>
<td align="left">capout</td>
<td align="left">Output capacitance [F]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Charge">Charge</a></td>
<td align="left">charge</td>
<td align="left">Output charge [C]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>function junctionCap &quot;Junction capacity&quot;

  input Modelica.SIunits.Capacitance capin &quot;Input capacitance&quot;;
  input Modelica.SIunits.Voltage voltage &quot;Input voltage&quot;;
  input Modelica.SIunits.Voltage depcap;
  input Real mj;
  input Real phij;
  input Modelica.SIunits.Voltage f1;
  input Real f2;
  input Real f3;

  output Modelica.SIunits.Capacitance capout &quot;Output capacitance&quot;;
  output Modelica.SIunits.Charge charge &quot;Output charge&quot;;

protected 
  Real arg;
  Real sarg;
  Real czof2;

algorithm 
  if (voltage &lt; depcap) then
    arg  := 1 - (voltage / phij);
    if (mj == 0.5) then
      sarg := 1 / sqrt(arg);
    else
      sarg := exp( -1 * mj * Modelica.Math.log( arg));
    end if;
    capout := capin * sarg;
    charge := phij * (capin * (1 - arg * sarg) / (1 - mj));
  else
    czof2  := capin / f2;
    capout := czof2 * (f3 + mj * voltage / phij);
    charge := capin * f1 + czof2 *
              (f3 * (voltage - depcap) + (mj / (2*phij)) * (voltage^2 - depcap^2));
  end if;

end junctionCap;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.saturationcurdeptempspice3"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.saturationCurDepTempSPICE3</h1>
<p><strong>Temperature dependency of saturation current</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>This internal function calculates the temperature dependent saturation current based on the actual and the nominal temperature.</p>
<p>::</p>
<h2 id="inputs-8">Inputs</h2>
<table>
<col width="52%" />
<col width="14%" />
<col width="9%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur0</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">tnom</td>
<td align="left">
</td>
<td align="left">Nominal Temperature [K]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">emissioncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">energygap</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">satcurexp</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-8">Outputs</h2>
<table>
<col width="68%" />
<col width="9%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">ret</td>
<td align="left">Output value [A]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>function saturationCurDepTempSPICE3 
  &quot;Temperature dependency of saturation current&quot;

  input Modelica.SIunits.Current satcur0 &quot;Saturation current&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Modelica.SIunits.Temp_K tnom &quot;Nominal Temperature&quot;;
  input Real emissioncoeff;
  input Real energygap;
  input Real satcurexp;

  output Modelica.SIunits.Current ret &quot;Output value&quot;;

protected 
  Modelica.SIunits.Voltage vt;
  Modelica.SIunits.Voltage vte;

algorithm 
    vt := SpiceConstants.CONSTKoverQ*temp;
  vte := emissioncoeff * vt;
  ret := satcur0 * exp( ((temp / tnom) - 1) * energygap / vte
         + satcurexp / emissioncoeff * Modelica.Math.log( temp / tnom));

end saturationCurDepTempSPICE3;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctionvoltage23spice3"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionVoltage23SPICE3</h1>
<p><strong>Junction Voltage</strong></p>
<h2 id="information-10">Information</h2>
<p>::</p>
<p>This internal function calculates the junction voltage based on the actual temperature, voltage and saturation current.</p>
<p>::</p>
<h2 id="inputs-9">Inputs</h2>
<table>
<col width="56%" />
<col width="9%" />
<col width="10%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">vb</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">ivb</td>
<td align="left">
</td>
<td align="left">[A]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device temperature [K]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-9">Outputs</h2>
<table>
<col width="68%" />
<col width="9%" />
<col width="22%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">v23</td>
<td align="left">Output value [V]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>function junctionVoltage23SPICE3 &quot;Junction Voltage&quot;

  input Modelica.SIunits.Voltage vb;
  input Modelica.SIunits.Current ivb;
  input Modelica.SIunits.Current satcur &quot;Saturation current&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device temperature&quot;;
  input Real ncoeff;

  output Modelica.SIunits.Voltage v23 &quot;Output value&quot;;

protected 
  Modelica.SIunits.Voltage vt;
  Modelica.SIunits.Current cbv;
  Real tol;
  Integer iter;

algorithm 
    vt := SpiceConstants.CONSTKoverQ*temp;
  v23 := vb;
  cbv := ivb;

  if (cbv &lt; satcur * vb / vt) then
    cbv := satcur * vb / vt;
  else
      tol := SpiceConstants.CKTreltol*cbv;
    v23 := vb - vt * Modelica.Math.log( 1 + cbv / satcur);
    for iter in 0:24 loop
      v23 := vb - vt * Modelica.Math.log( cbv / satcur + 1 - v23 / vt);
      if (abs( satcur * ( exp(( vb - v23) / vt) - 1 + v23 / vt) - cbv) &lt;= tol) then

      end if;
    end for;
  end if;

end junctionVoltage23SPICE3;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junction3"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junction3</h1>
<p><strong>Junction current and conductance calculation</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<p>::</p>
<h2 id="inputs-10">Inputs</h2>
<table>
<col width="55%" />
<col width="10%" />
<col width="10%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">voltage</td>
<td align="left">
</td>
<td align="left">Input voltage [V]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">v23</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-10">Outputs</h2>
<table>
<col width="64%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current</td>
<td align="left">Output curret [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">cond</td>
<td align="left">Output conductance [S]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>function junction3 &quot;Junction current and conductance calculation&quot;

  input Modelica.SIunits.Voltage voltage &quot;Input voltage&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Real ncoeff;
  input Modelica.SIunits.Current satcur &quot;Saturation current&quot;;
  input Modelica.SIunits.Voltage v23;

  output Modelica.SIunits.Current current &quot;Output curret&quot;;
  output Modelica.SIunits.Conductance cond &quot;Output conductance&quot;;

protected 
  constant Real max_exp = 50.0;
  constant Modelica.SIunits.Current max_current = 1.0e4;
  Modelica.SIunits.Voltage vte;
  Real max_exponent;
  Real evd;
  Real arg;
  Real evrev;
  Modelica.SIunits.Voltage vr;

algorithm 
  if (satcur &gt; 1.0e-101) then
      vte := SpiceConstants.CONSTKoverQ*temp*ncoeff;
    max_exponent := Modelica.Math.log( max_current / satcur);
    max_exponent := min( max_exp, max_exponent);
    if (voltage &gt;= max_exponent * vte) then
      evd     := exp( max_exponent);
      cond    := satcur * evd / vte;
      current := satcur * (evd - 1) + cond * (voltage - max_exponent * vte);
    elseif (voltage &gt;= -3 * vte) then
      evd     := exp( voltage / vte);
        current := satcur*(evd - 1) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*evd/vte + SpiceConstants.CKTgmin;
    elseif (voltage &gt;= -v23) then
        arg := 3*vte/(voltage*SpiceConstants.CONSTe);
      arg     := arg * arg * arg;
        current := -1.*satcur*(1 + arg) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*3*arg/voltage + SpiceConstants.CKTgmin;
    else
      vr := -( v23 + voltage);
      if (vr &gt; max_exponent * vte) then
        evd     := exp( max_exponent);
        cond    := satcur * evd / vte;
        current := -1. * (satcur * (evd - 1) + cond * (vr - max_exponent * vte));
      else
        evrev   := exp( vr / vte);
          current := -1.*satcur*evrev + SpiceConstants.CKTgmin*voltage;
          cond := satcur*evrev/vte + SpiceConstants.CKTgmin;
      end if;
    end if;
  else
    current := 0.0;
    cond    := 0.0;
  end if;

end junction3;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junctioncaptranstime"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junctionCapTransTime</h1>
<p><strong>Junction capacitance transittime calculation</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>This internal function calculates the capacitance and the charge dependent on the transittime.</p>
<p>::</p>
<h2 id="inputs-11">Inputs</h2>
<table>
<col width="57%" />
<col width="12%" />
<col width="9%" />
<col width="20%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance">Capacitance</a></td>
<td align="left">capin</td>
<td align="left">
</td>
<td align="left">Input capacitance [F]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">voltage</td>
<td align="left">
</td>
<td align="left">Input voltage [V]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">depcap</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">mj</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">phij</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">f1</td>
<td align="left">
</td>
<td align="left">[V]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">f2</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">f3</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Time">Time</a></td>
<td align="left">transittime</td>
<td align="left">
</td>
<td align="left">[s]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">conduct</td>
<td align="left">
</td>
<td align="left">Input conductance [S]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current</td>
<td align="left">
</td>
<td align="left">Input current [A]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-11">Outputs</h2>
<table>
<col width="65%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance">Capacitance</a></td>
<td align="left">capout</td>
<td align="left">Output capacitance [F]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Charge">Charge</a></td>
<td align="left">charge</td>
<td align="left">Output charge [C]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>function junctionCapTransTime 
  &quot;Junction capacitance transittime calculation&quot;

  input Modelica.SIunits.Capacitance capin &quot;Input capacitance&quot;;
  input Modelica.SIunits.Voltage voltage &quot;Input voltage&quot;;
  input Modelica.SIunits.Voltage depcap;
  input Real mj;
  input Real phij;
  input Modelica.SIunits.Voltage f1;
  input Real f2;
  input Real f3;
  input Modelica.SIunits.Time transittime;
  input Modelica.SIunits.Conductance conduct &quot;Input conductance&quot;;
  input Modelica.SIunits.Current current &quot;Input current&quot;;

  output Modelica.SIunits.Capacitance capout &quot;Output capacitance&quot;;
  output Modelica.SIunits.Charge charge &quot;Output charge&quot;;

algorithm 
    (capout,charge) := junctionCap(
          capin,
          voltage,
          depcap,
          mj,
          phij,
          f1,
          f2,
          f3);
  capout := capout + transittime * conduct;
  charge := charge + transittime * current;

end junctionCapTransTime;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.junction2"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.junction2</h1>
<p><strong>Junction current and conductance calculation</strong></p>
<h2 id="information-13">Information</h2>
<p>::</p>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<p>::</p>
<h2 id="inputs-12">Inputs</h2>
<table>
<col width="55%" />
<col width="10%" />
<col width="10%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage">Voltage</a></td>
<td align="left">voltage</td>
<td align="left">
</td>
<td align="left">Input Voltage [V]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device Temperature [K]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ncoeff</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">satcur</td>
<td align="left">
</td>
<td align="left">Saturation current [A]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-12">Outputs</h2>
<table>
<col width="64%" />
<col width="10%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Current">Current</a></td>
<td align="left">current</td>
<td align="left">Output current [A]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">cond</td>
<td align="left">Output conductance [S]</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-12">Modelica definition</h2>
<pre><code>function junction2 &quot;Junction current and conductance calculation&quot;

  input Modelica.SIunits.Voltage voltage &quot;Input Voltage&quot;;
  input Modelica.SIunits.Temp_K temp &quot;Device Temperature&quot;;
  input Real ncoeff;
  input Modelica.SIunits.Current satcur &quot;Saturation current&quot;;

  output Modelica.SIunits.Current current &quot;Output current&quot;;
  output Modelica.SIunits.Conductance cond &quot;Output conductance&quot;;

protected 
  constant Real max_exp = 50.0;
  constant Real max_current = 1.0e4;
  Modelica.SIunits.Voltage vte;
  Real max_exponent;
  Real evd;
  Real arg;

algorithm 
  if (satcur &gt; 1.0e-101) then
      vte := SpiceConstants.CONSTKoverQ*temp*ncoeff;
    max_exponent := Modelica.Math.log( max_current / satcur);
    max_exponent := min( max_exp, max_exponent);
    if (voltage &gt;= max_exponent * vte) then
      evd     := exp( max_exponent);
      cond    := satcur * evd / vte;
      current := satcur * (evd - 1) + cond * (voltage - max_exponent * vte);

    elseif (voltage &gt;= -5 * vte) then
      evd     := exp( voltage / vte);
        current := satcur*(evd - 1) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*evd/vte + SpiceConstants.CKTgmin;
    else
        arg := 3*vte/(voltage*SpiceConstants.CONSTe);
      arg     := arg * arg * arg;
        current := -1*satcur*(1 + arg) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*3*arg/voltage + SpiceConstants.CKTgmin;
    end if;
  else
    current := 0.0;
    cond    := 0.0;
  end if;

end junction2;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.resdeptemp"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.resDepTemp</h1>
<p><strong>Temperature dependent conductance</strong></p>
<h2 id="information-14">Information</h2>
<p>::</p>
<p>This internal function calculates the conductance in dependency from the temperature.</p>
<p>::</p>
<h2 id="inputs-13">Inputs</h2>
<table>
<col width="57%" />
<col width="9%" />
<col width="9%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance">Resistance</a></td>
<td align="left">resist</td>
<td align="left">
</td>
<td align="left">Input resistance [Ohm]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">temp</td>
<td align="left">
</td>
<td align="left">Device temperature [K]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Temp_K">Temp_K</a></td>
<td align="left">tnom</td>
<td align="left">
</td>
<td align="left">Nominal temperature [K]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">tc1</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">tc2</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="outputs-13">Outputs</h2>
<table>
<col width="62%" />
<col width="14%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Conductance">Conductance</a></td>
<td align="left">conduct</td>
<td align="left">Output conductance [S]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">dCond_dTemp</td>
<td align="left">Output value</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-13">Modelica definition</h2>
<pre><code>function resDepTemp &quot;Temperature dependent conductance&quot;

input Modelica.SIunits.Resistance resist &quot;Input resistance&quot;;
input Modelica.SIunits.Temp_K temp &quot;Device temperature&quot;;
input Modelica.SIunits.Temp_K tnom &quot;Nominal temperature&quot;;
input Real tc1;
input Real tc2;

output Modelica.SIunits.Conductance conduct &quot;Output conductance&quot;;
output Real dCond_dTemp &quot;Output value&quot;;

protected 
  Real difference;
  Real factor;

algorithm 
  difference := temp - tnom;
  factor := 1.0 + tc1 * difference + tc2 * difference * difference;
  conduct := 1.0 /(resist * factor);
  dCond_dTemp := (tc1 + 2 * tc2 * difference) * conduct * conduct;

end resDepTemp;</code></pre>
<hr />
<h1 id="modelica.electrical.spice3.internal.functions.resdepgeom"><a href="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions">Modelica.Electrical.Spice3.Internal.Functions</a>.resDepGeom</h1>
<p><strong>Resistance dependent from width and narrow</strong></p>
<h2 id="information-15">Information</h2>
<p>::</p>
<p>This internal function calculates the resistance in dependency from the geometrical values (width, narrow) and resistivity.</p>
<p>::</p>
<h2 id="inputs-14">Inputs</h2>
<table>
<col width="52%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">rsh</td>
<td align="left">
</td>
<td align="left">Input sheet resistance</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">width</td>
<td align="left">
</td>
<td align="left">Input transistor width [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">
</td>
<td align="left">Input transistor length [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">narrow</td>
<td align="left">
</td>
<td align="left">Input narrow [m]</td>
</tr>
</tbody>
</table>
<h2 id="outputs-14">Outputs</h2>
<table>
<col width="12%" />
<col width="12%" />
<col width="23%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">out</td>
<td align="left">Output value</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-14">Modelica definition</h2>
<pre><code>function resDepGeom &quot;Resistance dependent from width and narrow&quot;

input Real rsh &quot;Input sheet resistance&quot;;
input Modelica.SIunits.Length width &quot;Input transistor width&quot;;
input Modelica.SIunits.Length length &quot;Input transistor length&quot;;
input Modelica.SIunits.Length narrow &quot;Input narrow&quot;;

output Real out &quot;Output value&quot;;

algorithm 
  out :=rsh*(length - narrow)/(width - narrow);

end resDepGeom;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.</p>
</body>
</html>
