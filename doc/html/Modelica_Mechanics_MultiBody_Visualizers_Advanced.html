<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.MultiBody.Visualizers.Advanced</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.MultiBody.Visualizers.Advanced</h1>
</div>
<h1 id="modelica.mechanics.multibody.visualizers.advanced"><a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers">Modelica.Mechanics.MultiBody.Visualizers</a>.Advanced</h1>
<p><strong>Visualizers that require basic knowledge about Modelica in order to use them</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>Package <strong>Visualizers.Advanced</strong> contains components to visualize 3-dimensional shapes with dynamical sizes. None of the components has a frame connector. The position and orientation is set via modifiers. Basic knowledge of Modelica is needed in order to utilize the components of this package. These components have also to be used for models, where the forces and torques in the frame connector are set via equations (in this case, the models of the Visualizers package cannot be used, since they all have frame connectors).</p>
<h3 id="content">Content</h3>
<table>
<col width="61%" />
<col width="38%" />
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Arrow">Arrow</a></td>
<td align="left"><dl>
<dt>Visualizing an arrow where all parts of the arrow can vary dynamically:</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/Arrow.png" alt="image5" /><p class="caption">image5</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.DoubleArrow">DoubleArrow</a></td>
<td align="left"><dl>
<dt>Visualizing a double arrow where all parts of the arrow can vary dynamically:</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/DoubleArrow.png" alt="image6" /><p class="caption">image6</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape">Shape</a></td>
<td align="left"><dl>
<dt>Visualizing an elementary object with variable size. The following shape types are supported:</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/FixedShape.png" alt="image7" /><p class="caption">image7</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Surface">Surface</a></td>
<td align="left"><dl>
<dt>Visualizing a moveable parameterized surface:</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/Surface_small.png" alt="image8" /><p class="caption">image8</p>
</div>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.PipeWithScalarField">PipeWithScalarField</a></td>
<td align="left"><dl>
<dt>Visualizing a pipe with a scalar field represented by a color coding:</dt>
<dd><div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/PipeWithScalarFieldIcon.png" alt="image9" /><p class="caption">image9</p>
</div>
</dd>
</dl></td>
</tr>
</tbody>
</table>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="69%" />
<col width="30%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.ArrowS.png" alt="image16" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Arrow">Arrow</a></td>
<td align="left">Visualizing an arrow with variable size; all data have to be set as modifiers (see info layer)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.DoubleArrowS.png" alt="image17" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.DoubleArrow">DoubleArrow</a></td>
<td align="left">Visualizing a double arrow with variable size; all data have to be set as modifiers (see info layer)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.ShapeS.png" alt="image18" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape">Shape</a></td>
<td align="left">Visualizing an elementary object with variable size; all data have to be set as modifiers (see info layer)</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceS.png" alt="image19" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Surface">Surface</a></td>
<td align="left">Visualizing a moveable, parameterized surface; the surface characteristic is provided by a function</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.PipeWithScalarFieldS.png" alt="image20" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.PipeWithScalarField">PipeWithScalarField</a></td>
<td align="left">Visualizing a pipe with a scalar field</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristicsS.png" alt="image21" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced_SurfaceCharacteristics.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics">SurfaceCharacteristics</a></td>
<td align="left">Functions returning surface descriptions</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image22-modelica.mechanics.multibody.visualizers.advanced.arrow"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.ArrowI.png" alt="image22" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.Arrow</h1>
<p><strong>Visualizing an arrow with variable size; all data have to be set as modifiers (see info layer)</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>Model <strong>Arrow</strong> defines an arrow that is dynamically visualized at the defined location (see variables below).</p>
<p>The variables under heading <strong>Parameters</strong> below are declared as (time varying) <strong>input</strong> variables. If the default equation is not appropriate, a corresponding modifier equation has to be provided in the model where an <strong>Arrow</strong> instance is used, e.g., in the form</p>
<pre><code>Visualizers.Advanced.Arrow arrow(diameter = sin(time));</code></pre>
<p>Variable <strong>color</strong> is an Integer vector with 3 elements, {r, g, b}, and specifies the color of the shape. {r,g,b} are the &quot;red&quot;, &quot;green&quot; and &quot;blue&quot; color parts. Note, r g, b are given in the range 0 .. 255. The predefined type <strong>MultiBody.Types.Color</strong> contains a menu definition of the colors used in the MultiBody library (will be replaced by a color editor).</p>
<p>::</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="41%" />
<col width="8%" />
<col width="12%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation">Orientation</a></td>
<td align="left">R</td>
<td align="left">Frames.nullRotation()</td>
<td align="left">Orientation object to rotate the world frame into the arrow frame.</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to origin of arrow frame, resolved in world frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_tail[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of arrow frame to arrow tail, resolved in arrow frame [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_head[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from arrow tail to the head of the arrow, resolved in arrow frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter</td>
<td align="left">world.defaultArrowDiameter</td>
<td align="left">Diameter of arrow line [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">color</td>
<td align="left">Modelica.Mechanics.MultiBody...</td>
<td align="left">Color of arrow</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.SpecularCoefficient">SpecularCoefficient</a></td>
<td align="left">specularCoefficient</td>
<td align="left">world.defaultSpecularCoeffic...</td>
<td align="left">Material property describing the reflecting of ambient light (= 0 means, that light is completely absorbed)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>model Arrow 
  &quot;Visualizing an arrow with variable size; all data have to be set as modifiers (see info layer)&quot;

  import SI = Modelica.SIunits;
  import Modelica.Mechanics.MultiBody.Types;
  import Modelica.Mechanics.MultiBody.Frames;
  import T = Modelica.Mechanics.MultiBody.Frames.TransformationMatrices;

  input Frames.Orientation R=Frames.nullRotation() 
    &quot;Orientation object to rotate the world frame into the arrow frame.&quot;;
  input SI.Position r[3]={0,0,0} 
    &quot;Position vector from origin of world frame to origin of arrow frame, resolved in world frame&quot;;
  input SI.Position r_tail[3]={0,0,0} 
    &quot;Position vector from origin of arrow frame to arrow tail, resolved in arrow frame&quot;;
  input SI.Position r_head[3]={0,0,0} 
    &quot;Position vector from arrow tail to the head of the arrow, resolved in arrow frame&quot;;
  input SI.Diameter diameter=world.defaultArrowDiameter 
    &quot;Diameter of arrow line&quot;;
  input Modelica.Mechanics.MultiBody.Types.Color color=Modelica.Mechanics.MultiBody.Types.Defaults.ArrowColor 
    &quot;Color of arrow&quot;;
  input Types.SpecularCoefficient specularCoefficient = world.defaultSpecularCoefficient 
    &quot;Material property describing the reflecting of ambient light (= 0 means, that light is completely absorbed)&quot;;

protected 
  outer Modelica.Mechanics.MultiBody.World world;
  SI.Length length=Modelica.Math.Vectors.length(r_head) &quot;Length of arrow&quot;;
  Real e_x[3](each final unit=&quot;1&quot;, start={1,0,0}) = noEvent(if length &lt; 1.e-10 then {1,0,0} else r_head/length);
  Real rxvisobj[3](each final unit=&quot;1&quot;) = transpose(R.T)*e_x 
    &quot;X-axis unit vector of shape, resolved in world frame&quot;;
  SI.Position rvisobj[3] = r + T.resolve1(R.T, r_tail) 
    &quot;Position vector from world frame to shape frame, resolved in world frame&quot;;

  Visualizers.Advanced.Shape arrowLine(
    length=noEvent(max(0, length - diameter*Types.Defaults.
        ArrowHeadLengthFraction)),
    width=diameter,
    height=diameter,
    lengthDirection=r_head,
    widthDirection={0,1,0},
    shapeType=&quot;cylinder&quot;,
    color=color,
    specularCoefficient=specularCoefficient,
    r_shape=r_tail,
    r=r,
    R=R) if world.enableAnimation;
  Visualizers.Advanced.Shape arrowHead(
    length=noEvent(max(0, min(length, diameter*Types.Defaults.
        ArrowHeadLengthFraction))),
    width=noEvent(max(0, diameter*MultiBody.Types.Defaults.
        ArrowHeadWidthFraction)),
    height=noEvent(max(0, diameter*MultiBody.Types.Defaults.
        ArrowHeadWidthFraction)),
    lengthDirection=r_head,
    widthDirection={0,1,0},
    shapeType=&quot;cone&quot;,
    color=color,
    specularCoefficient=specularCoefficient,
    r=rvisobj + rxvisobj*arrowLine.length,
    R=R) if world.enableAnimation;

end Arrow;</code></pre>
<hr />
<h1 id="image23-modelica.mechanics.multibody.visualizers.advanced.doublearrow"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.DoubleArrowI.png" alt="image23" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.DoubleArrow</h1>
<p><strong>Visualizing a double arrow with variable size; all data have to be set as modifiers (see info layer)</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Model <strong>DoubleArrow</strong> defines a double arrow that is dynamically visualized at the defined location (see variables below).</p>
<p>The variables under heading <strong>Parameters</strong> below are declared as (time varying) <strong>input</strong> variables. If the default equation is not appropriate, a corresponding modifier equation has to be provided in the model where an <strong>Arrow</strong> instance is used, e.g., in the form</p>
<pre><code>Visualizers.Advanced.DoubleArrow doubleArrow(diameter = sin(time));</code></pre>
<p>Variable <strong>color</strong> is an Integer vector with 3 elements, {r, g, b}, and specifies the color of the shape. {r,g,b} are the &quot;red&quot;, &quot;green&quot; and &quot;blue&quot; color parts. Note, r g, b are given in the range 0 .. 255. The predefined type <strong>MultiBody.Types.Color</strong> contains a menu definition of the colors used in the MultiBody library (will be replaced by a color editor).</p>
<p>::</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="41%" />
<col width="8%" />
<col width="12%" />
<col width="37%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation">Orientation</a></td>
<td align="left">R</td>
<td align="left">Frames.nullRotation()</td>
<td align="left">Orientation object to rotate the world frame into the arrow frame.</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to origin of arrow frame, resolved in world frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_tail[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of arrow frame to double arrow tail, resolved in arrow frame [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_head[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from double arrow tail to the head of the double arrow, resolved in arrow frame [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Diameter">Diameter</a></td>
<td align="left">diameter</td>
<td align="left">world.defaultArrowDiameter</td>
<td align="left">Diameter of arrow line [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color">Color</a></td>
<td align="left">color</td>
<td align="left">Modelica.Mechanics.MultiBody...</td>
<td align="left">Color of double arrow</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.SpecularCoefficient">SpecularCoefficient</a></td>
<td align="left">specularCoefficient</td>
<td align="left">world.defaultSpecularCoeffic...</td>
<td align="left">Material property describing the reflecting of ambient light (= 0 means, that light is completely absorbed)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>model DoubleArrow 
  &quot;Visualizing a double arrow with variable size; all data have to be set as modifiers (see info layer)&quot;

  import SI = Modelica.SIunits;
  import Modelica.Mechanics.MultiBody.Types;
  import Modelica.Mechanics.MultiBody.Frames;
  import T = Modelica.Mechanics.MultiBody.Frames.TransformationMatrices;

  input Frames.Orientation R=Frames.nullRotation() 
    &quot;Orientation object to rotate the world frame into the arrow frame.&quot;;
  input SI.Position r[3]={0,0,0} 
    &quot;Position vector from origin of world frame to origin of arrow frame, resolved in world frame&quot;;
  input SI.Position r_tail[3]={0,0,0} 
    &quot;Position vector from origin of arrow frame to double arrow tail, resolved in arrow frame&quot;;
  input SI.Position r_head[3]={0,0,0} 
    &quot;Position vector from double arrow tail to the head of the double arrow, resolved in arrow frame&quot;;
  input SI.Diameter diameter=world.defaultArrowDiameter 
    &quot;Diameter of arrow line&quot;;
  input Modelica.Mechanics.MultiBody.Types.Color color=Modelica.Mechanics.MultiBody.Types.Defaults.ArrowColor 
    &quot;Color of double arrow&quot;;
  input Types.SpecularCoefficient specularCoefficient = world.defaultSpecularCoefficient 
    &quot;Material property describing the reflecting of ambient light (= 0 means, that light is completely absorbed)&quot;;

protected 
  outer Modelica.Mechanics.MultiBody.World world;
  SI.Length length=Modelica.Math.Vectors.length(r_head) &quot;Length of arrow&quot;;
  Real e_x[3](each final unit=&quot;1&quot;, start={1,0,0}) = noEvent(if length &lt; 1.e-10 then {1,0,0} else r_head/length);
  Real rxvisobj[3](each final unit=&quot;1&quot;) = transpose(R.T)*e_x 
    &quot;X-axis unit vector of shape, resolved in world frame&quot;;
  SI.Position rvisobj[3] = r + T.resolve1(R.T, r_tail) 
    &quot;Position vector from world frame to shape frame, resolved in world frame&quot;;

  SI.Length headLength=noEvent(max(0, min(length, diameter*MultiBody.Types.
      Defaults.ArrowHeadLengthFraction)));
  SI.Length headWidth=noEvent(max(0, diameter*MultiBody.Types.Defaults.
      ArrowHeadWidthFraction));
  Visualizers.Advanced.Shape arrowLine(
    length=noEvent(max(0, length - 1.5*diameter*MultiBody.Types.Defaults.
        ArrowHeadLengthFraction)),
    width=diameter,
    height=diameter,
    lengthDirection=r_head,
    widthDirection={0,1,0},
    shapeType=&quot;cylinder&quot;,
    color=color,
    specularCoefficient=specularCoefficient,
    r_shape=r_tail,
    r=r,
    R=R) if world.enableAnimation;
  Visualizers.Advanced.Shape arrowHead1(
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection=r_head,
    widthDirection={0,1,0},
    shapeType=&quot;cone&quot;,
    color=color,
    specularCoefficient=specularCoefficient,
    r=rvisobj + rxvisobj*arrowLine.length,
    R=R) if world.enableAnimation;
  Visualizers.Advanced.Shape arrowHead2(
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection=r_head,
    widthDirection={0,1,0},
    shapeType=&quot;cone&quot;,
    color=color,
    specularCoefficient=specularCoefficient,
    r=rvisobj + rxvisobj*(arrowLine.length + 0.5*arrowHead1.length),
    R=R) if world.enableAnimation;

end DoubleArrow;</code></pre>
<hr />
<h1 id="image24-modelica.mechanics.multibody.visualizers.advanced.shape"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.ShapeI.png" alt="image24" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.Shape</h1>
<p><strong>Visualizing an elementary object with variable size; all data have to be set as modifiers (see info layer)</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>Model <strong>Shape</strong> defines a visual shape that is shown at the location of its reference coordinate system, called 'object frame' below. All describing variables such as size and color can vary dynamically (with the only exception of parameter shapeType). The default equations in the declarations should be modified by providing appropriate modifier quations. Model <strong>Shape</strong> is usually used as a basic building block to implement simpler to use graphical components.</p>
<p>The following shapes are supported via parameter <strong>shapeType</strong> (e.g., shapeType=&quot;box&quot;):</p>
<p><strong>lengthDirection</strong>. The light blue arrows are directed along variable <strong>widthDirection</strong>. The <strong>coordinate systems</strong> in the figure represent frame_a of the Shape component.</p>
<p>Additionally, external shapes are specified as DXF-files (only 3-dim. Face is supported). External shapes must be named &quot;1&quot;, &quot;2&quot;, ... &quot;N&quot;. The corresponding definitions should be in files &quot;1.dxf&quot;, &quot;2.dxf&quot; etc. Since the DXF-files contain color and dimensions for the individual faces, the corresponding information in the model is currently ignored. The DXF-files must be found either in the current directory or in the directory where the Shape instance is stored that references the DXF file.</p>
<p>Via input variable <strong>extra</strong> additional sizing data is defined according to:</p>
<table>
<col width="7%" />
<col width="92%" />
<thead>
<tr class="header">
<th align="left"><strong>shapeType</strong></th>
<th align="left">Meaning of variable <strong>extra</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">&quot;cylinder&quot;</td>
<td align="left">if extra &gt; 0, a black line is included in the cylinder to show the rotation of it.</td>
</tr>
<tr class="even">
<td align="left">&quot;cone&quot;</td>
<td align="left"><dl>
<dt>extra = diameter-left-side / diameter-right-side, i.e.,</dt>
<dd><p>extra = 1: cylinder extra = 0: &quot;real&quot; cone.</p>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td align="left">&quot;pipe&quot;</td>
<td align="left"><dl>
<dt>extra = outer-diameter / inner-diameter, i.e,</dt>
<dd><p>extra = 1: cylinder that is completely hollow extra = 0: cylinder without a hole.</p>
</dd>
</dl></td>
</tr>
<tr class="even">
<td align="left">&quot;gearwheel&quot;</td>
<td align="left">extra is the number of teeth of the (external) gear. If extra &lt; 0, an internal gear is visualized with |extra| teeth. The axis of the gearwheel is along &quot;lengthDirection&quot;, and usually: width = height = 2*radiusOfGearWheel.</td>
</tr>
<tr class="odd">
<td align="left">&quot;spring&quot;</td>
<td align="left">extra is the number of windings of the spring. Additionally, &quot;height&quot; is <strong>not</strong> the &quot;height&quot; but 2*coil-width.</td>
</tr>
</tbody>
</table>
<p>Parameter <strong>color</strong> is a Real vector with 3 elements, {r, g, b}, and specifies the color of the shape. {r,g,b} are the &quot;red&quot;, &quot;green&quot; and &quot;blue&quot; color parts. Note, r g, b are given in the range 0 .. 255. The predefined type <strong>MultiBody.Types.Color</strong> contains a menu definition of the colors used in the MultiBody library.</p>
<p>The variables under heading <strong>Parameters</strong> below are declared as (time varying) <strong>input</strong> variables. If the default equation is not appropriate, a corresponding modifier equation has to be provided in the model where a <strong>Shape</strong> instance is used, e.g., in the form</p>
<pre><code>Visualizers.Advanced.Shape shape(length = sin(time));</code></pre>
<p>::</p>
<p>Extends from <a href="../../ModelicaServices%201.1/help/ModelicaServices_Animation.html#ModelicaServices.Animation.Shape">ModelicaServices.Animation.Shape</a> (Different visual shapes with variable size; all data have to be set as modifiers (see info layer)), <a href="Modelica_Utilities_Internal_PartialModelicaServices_Animation.html#Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialShape">Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialShape</a> (Interface for 3D animation of elementary shapes).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="44%" />
<col width="8%" />
<col width="9%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.ShapeType">ShapeType</a></td>
<td align="left">shapeType</td>
<td align="left">&quot;box&quot;</td>
<td align="left">Type of shape (box, sphere, cylinder, pipecylinder, cone, pipe, beam, gearwheel, spring)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation">Orientation</a></td>
<td align="left">R</td>
<td align="left">Frames.nullRotation()</td>
<td align="left">Orientation object to rotate the world frame into the object frame</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to origin of object frame, resolved in world frame [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_shape[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of object frame to shape origin, resolved in object frame [m]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">lengthDirection[3]</td>
<td align="left">{1,0,0}</td>
<td align="left">Vector in length direction, resolved in object frame [1]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">widthDirection[3]</td>
<td align="left">{0,1,0}</td>
<td align="left">Vector in width direction, resolved in object frame [1]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">0</td>
<td align="left">Length of visual object [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">width</td>
<td align="left">0</td>
<td align="left">Width of visual object [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">height</td>
<td align="left">0</td>
<td align="left">Height of visual object [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.ShapeExtra">ShapeExtra</a></td>
<td align="left">extra</td>
<td align="left">0.0</td>
<td align="left">Additional size data for some of the shape types</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">color[3]</td>
<td align="left">{255,0,0}</td>
<td align="left">Color of shape</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.SpecularCoefficient">SpecularCoefficient</a></td>
<td align="left">specularCoefficient</td>
<td align="left">0.7</td>
<td align="left">Reflection of ambient light (= 0: light is completely absorbed)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>model Shape 
  &quot;Visualizing an elementary object with variable size; all data have to be set as modifiers (see info layer)&quot;

   extends ModelicaServices.Animation.Shape;
   extends Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialShape;

end Shape;</code></pre>
<hr />
<h1 id="image25-modelica.mechanics.multibody.visualizers.advanced.surface"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceI.png" alt="image25" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.Surface</h1>
<p><strong>Visualizing a moveable, parameterized surface; the surface characteristic is provided by a function</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>Model <strong>Surface</strong> defines a moveable, parametrized surface in 3-dim. space that is used for animation. This object is specified by:</p>
<ul>
<li>The surface frame (orientation object &quot;R&quot; and origin &quot;r_0&quot;) in which the data is specified.</li>
<li>A set of two parameters, one in u- and one in v-direction, that defines the control points.</li>
<li>A time-varying position of each control point with respect to the surface frame.</li>
</ul>
<p>The parameter values (u,v) are given by the ordinal numbers of the corresponding control point in u- or in v-direction, respectively. The surface is then defined by the replaceable function &quot;surfaceCharacteristic&quot; with the interface <a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic">partialSurfaceCharacteristic</a> that returns the x-, y-, z- coordinate of every control point in form of 3 arrays X, Y, Z, and an optional color array C, if every control point shall have a different color:</p>
<pre><code>Real X[nu,nv], Y[nu,nv], Z[nu,nv], C[nu,nv,3];</code></pre>
<p>An example of a parameterized surface with color coding is shown in the next figure:</p>
<blockquote>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/Surface.png" alt="image26" /><p class="caption">image26</p>
</div>
</blockquote>
<p>Models <a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers.Torus">Torus</a>, <a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers.VoluminousWheel">VoluminousWheel</a>, <a href="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers.PipeWithScalarField">PipeWithScalarField</a>, demonstrate how new visualizer objects can be constructed with the Surface model. The direct usage of the Surface model, as well as of the Torus and the VoluminousWheel models, are demonstrated with example <a href="Modelica_Mechanics_MultiBody_Examples_Elementary.html#Modelica.Mechanics.MultiBody.Examples.Elementary.Surfaces">Examples.Elementary.Surfaces</a>.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_MultiBody_Icons.html#Modelica.Mechanics.MultiBody.Icons.Surface">Modelica.Mechanics.MultiBody.Icons.Surface</a> (Surface icon), <a href="Modelica_Utilities_Internal_PartialModelicaServices_Animation.html#Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialSurface">Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialSurface</a> (Interface for 3D animation of surfaces), <a href="../../ModelicaServices%201.1/help/ModelicaServices_Animation.html#ModelicaServices.Animation.Surface">ModelicaServices.Animation.Surface</a> (Animation of a moveable, parameterized surface; the surface characteristic is provided by a function).</p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="28%" />
<col width="35%" />
<col width="11%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Surface frame</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation">Orientation</a></td>
<td align="left">R</td>
<td align="left">Frames.nullRotation()</td>
<td align="left">Orientation object to rotate the world frame into the surface frame</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_0[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to origin of surface frame, resolved in world frame [m]</td>
</tr>
<tr class="even">
<td align="left">Surface properties</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">nu</td>
<td align="left">2</td>
<td align="left">Number of points in u-Dimension</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">nv</td>
<td align="left">2</td>
<td align="left">Number of points in v-Dimension</td>
</tr>
<tr class="odd">
<td align="left">replaceable function surfaceCharacteristic</td>
<td align="left"><a href="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.partialSurfaceCharacteristic">partialSurfaceCharacteristic</a></td>
<td align="left">Function defining the surface characteristic</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Material properties</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">wireframe</td>
<td align="left">false</td>
<td align="left">= true: 3D model will be displayed without faces</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">multiColoredSurface</td>
<td align="left">false</td>
<td align="left">= true: Color is defined for each surface point</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">color[3]</td>
<td align="left">{255,0,0}</td>
<td align="left">Color of surface</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.SpecularCoefficient">SpecularCoefficient</a></td>
<td align="left">specularCoefficient</td>
<td align="left">0.7</td>
<td align="left">Reflection of ambient light (= 0: light is completely absorbed)</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">transparency</td>
<td align="left">0</td>
<td align="left">Transparency of shape: 0 (= opaque) ... 1 (= fully transparent)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>model Surface 
  &quot;Visualizing a moveable, parameterized surface; the surface characteristic is provided by a function&quot;
  extends Modelica.Mechanics.MultiBody.Icons.Surface;
  extends Modelica.Utilities.Internal.PartialModelicaServices.Animation.PartialSurface;
  extends ModelicaServices.Animation.Surface;
equation 

end Surface;</code></pre>
<hr />
<h1 id="image27-modelica.mechanics.multibody.visualizers.advanced.pipewithscalarfield"><img src="Modelica.Mechanics.MultiBody.Visualizers.Advanced.PipeWithScalarFieldI.png" alt="image27" /> <a href="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced">Modelica.Mechanics.MultiBody.Visualizers.Advanced</a>.PipeWithScalarField</h1>
<p><strong>Visualizing a pipe with a scalar field</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p>Model <strong>PipeWithScalarField</strong> visualizes a pipe and a scalar field along the pipe axis. The latter is shown by mapping scalar field to color values with a color map and utilizing this color at the perimeter associated with the corresponding axis location. Typically the scalar field value is a temperature, but might be also another quantity. Predefined color maps are available from <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors_ColorMaps.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps">MultiBody.Visualizers.Colors.ColorMaps</a> and can be selected via parameter &quot;colorMap&quot;. A color map with the corresponding scalar field values can be exported as vector-graphics in svg-format with function <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg">MultiBody.Visualizers.Colors.colorMapToSvg</a>. The position and orientation of the center of the circle at the left end of the pipe is defined via parameters &quot;r_0&quot; and &quot;R&quot;, respectively. The pipe axis is oriented along the x-axis of the local coordinate system described by &quot;R&quot;, see figure below:</p>
<blockquote>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/PipeWithScalarField.png" alt="image28" /><p class="caption">image28</p>
</div>
</blockquote>
<p>The color coding is shown in the next figure. It was generated with <a href="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg">MultiBody.Visualizers.Colors.colorMapToSvg</a> using the following call:</p>
<blockquote>
<pre><code>colorMapToSvg(Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMap.jet(),
              height=50, nScalars=6, T_max=100, caption=&quot;Temperature in C&quot;);</code></pre>
<div class="figure">
<img src="../Resources/Images/MultiBody/Visualizers/PipeWithScalarField-ColorMap.png" alt="image29" /><p class="caption">image29</p>
</div>
</blockquote>
<p>::</p>
<h2 id="parameters-4">Parameters</h2>
<table>
<col width="43%" />
<col width="8%" />
<col width="12%" />
<col width="35%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Surface frame</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation">Orientation</a></td>
<td align="left">R</td>
<td align="left">Frames.nullRotation()</td>
<td align="left">Orientation object to rotate the world frame into the surface frame</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">r_0[3]</td>
<td align="left">{0,0,0}</td>
<td align="left">Position vector from origin of world frame to origin of surface frame, resolved in world frame [m]</td>
</tr>
<tr class="even">
<td align="left">Surface properties</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Radius">Radius</a></td>
<td align="left">rOuter</td>
<td align="left">
</td>
<td align="left">Outer radius of pipe [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">length</td>
<td align="left">
</td>
<td align="left">Length of pipe [m]</td>
</tr>
<tr class="odd">
<td align="left">Integer</td>
<td align="left">n_rOuter</td>
<td align="left">30</td>
<td align="left">Number of points along outer radius</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">n_length</td>
<td align="left">10</td>
<td align="left">Number of points along length</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.SpecularCoefficient">SpecularCoefficient</a></td>
<td align="left">specularCoefficient</td>
<td align="left">0.7</td>
<td align="left">Reflection of ambient light (= 0: light is completely absorbed)</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">transparency</td>
<td align="left">0</td>
<td align="left">Transparency of shape: 0 (= opaque) ... 1 (= fully transparent)</td>
</tr>
<tr class="odd">
<td align="left">Color coding</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">xsi[:]</td>
<td align="left">Modelica.Math.Vectors.relNod...</td>
<td align="left">[:] Relative position along the pipe with x[1] = 0, x[end] = 1</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">T[size(xsi, 1)]</td>
<td align="left">
</td>
<td align="left">[:] Scalar values at position xsi*length (will be visualized by color)</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">T_min</td>
<td align="left">
</td>
<td align="left">Minimum value of T that corresponds to colorMap[1,:]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">T_max</td>
<td align="left">
</td>
<td align="left">Maximum value of T that corresponds to colorMap[end,:]</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">n_colors</td>
<td align="left">64</td>
<td align="left">Number of colors in the colorMap</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>model PipeWithScalarField &quot;Visualizing a pipe with a scalar field&quot;
  input Frames.Orientation R=Frames.nullRotation() 
    &quot;Orientation object to rotate the world frame into the surface frame&quot;;
  input Modelica.SIunits.Position r_0[3]={0,0,0} 
    &quot;Position vector from origin of world frame to origin of surface frame, resolved in world frame&quot;;

  parameter Modelica.SIunits.Radius rOuter &quot;Outer radius of pipe&quot;;
  parameter Modelica.SIunits.Length length &quot;Length of pipe&quot;;
  parameter Integer n_rOuter=30 &quot;Number of points along outer radius&quot;;
  parameter Integer n_length=10 &quot;Number of points along length&quot;;
  parameter Types.SpecularCoefficient specularCoefficient = 0.7 
    &quot;Reflection of ambient light (= 0: light is completely absorbed)&quot;;
  parameter Real transparency=0 
    &quot;Transparency of shape: 0 (= opaque) ... 1 (= fully transparent)&quot;;

  parameter Real xsi[:](min=0,max=1)= Modelica.Math.Vectors.relNodePositions(12) 
    &quot;[:] Relative position along the pipe with x[1] = 0, x[end] = 1&quot;;
  input Real T[size(xsi,1)] 
    &quot;[:] Scalar values at position xsi*length (will be visualized by color)&quot;;
  parameter Real T_min &quot;Minimum value of T that corresponds to colorMap[1,:]&quot;;
  parameter Real T_max &quot;Maximum value of T that corresponds to colorMap[end,:]&quot;;
  parameter Integer n_colors=64 &quot;Number of colors in the colorMap&quot;;
  replaceable function colorMap =
      Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps.jet
        constrainedby Modelica.Mechanics.MultiBody.Interfaces.partialColorMap 
    &quot;Function defining the color map&quot;;
protected 
  parameter Real colorMapData[n_colors,3] = colorMap(n_colors);
  Surface surface(
    R=R,
    r_0=r_0,
    nu=n_length,
    nv=n_rOuter,
    wireframe=false,
    multiColoredSurface=true,
    specularCoefficient=specularCoefficient,
    transparency=transparency,
    redeclare function surfaceCharacteristic =
        Modelica.Mechanics.MultiBody.Visualizers.Advanced.SurfaceCharacteristics.pipeWithScalarField
        (rOuter=rOuter,
         length=length,
         xsi=xsi,
         T=T,
         T_min=T_min,
         T_max=T_max,
         colorMap=colorMapData));
end PipeWithScalarField;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:40 2010.</p>
</body>
</html>
