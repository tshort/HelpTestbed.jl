<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Modelica.Mechanics.Translational.Components</title>
</head>
<body>
<div id="header">
<h1 class="title">Modelica.Mechanics.Translational.Components</h1>
</div>
<h1 id="modelica.mechanics.translational.components"><a href="Modelica_Mechanics_Translational.html#Modelica.Mechanics.Translational">Modelica.Mechanics.Translational</a>.Components</h1>
<p><strong>Components for 1D translational mechanical drive trains</strong></p>
<h2 id="information">Information</h2>
<p>::</p>
<p>This package contains basic components 1D mechanical translational drive trains.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).</p>
<h2 id="package-content">Package Content</h2>
<table>
<col width="63%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.FixedS.png" alt="image14" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Fixed">Fixed</a></td>
<td align="left">Fixed flange</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.MassS.png" alt="image15" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Mass">Mass</a></td>
<td align="left">Sliding mass with inertia</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.RodS.png" alt="image16" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Rod">Rod</a></td>
<td align="left">Rod without inertia</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.SpringS.png" alt="image17" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Spring">Spring</a></td>
<td align="left">Linear 1D translational spring</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.DamperS.png" alt="image18" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Damper">Damper</a></td>
<td align="left">Linear 1D translational damper</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.SpringDamperS.png" alt="image19" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.SpringDamper">SpringDamper</a></td>
<td align="left">Linear 1D translational spring and damper in parallel</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.ElastoGapS.png" alt="image20" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.ElastoGap">ElastoGap</a></td>
<td align="left">1D translational spring damper combination with gap</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.SupportFrictionS.png" alt="image21" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.SupportFriction">SupportFriction</a></td>
<td align="left">Coulomb friction in support</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.BrakeS.png" alt="image22" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Brake">Brake</a></td>
<td align="left">Brake basend on Coulomb friction</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.IdealGearR2TS.png" alt="image23" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.IdealGearR2T">IdealGearR2T</a></td>
<td align="left">Gearbox transforming rotational into translational motion</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.IdealRollingWheelS.png" alt="image24" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.IdealRollingWheel">IdealRollingWheel</a></td>
<td align="left">Simple 1-dim. model of an ideal rolling wheel without inertia</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.InitializeFlangeS.png" alt="image25" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange">InitializeFlange</a></td>
<td align="left">Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)</td>
</tr>
<tr class="odd">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.MassWithStopAndFrictionS.png" alt="image26" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction">MassWithStopAndFriction</a></td>
<td align="left">Sliding mass with hard stop and Stribeck friction</td>
</tr>
<tr class="even">
<td align="left"><img src="Modelica.Mechanics.Translational.Components.RelativeStatesS.png" alt="image27" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.RelativeStates">RelativeStates</a></td>
<td align="left">Definition of relative state variables</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="image28-modelica.mechanics.translational.components.fixed"><img src="Modelica.Mechanics.Translational.Components.FixedI.png" alt="image28" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Fixed</h1>
<p><strong>Fixed flange</strong></p>
<h2 id="information-1">Information</h2>
<p>::</p>
<p>The <em>flange</em> of a 1D translational mechanical system <em>fixed</em> at an position s0 in the <em>housing</em>. May be used:</p>
<ul>
<li>to connect a compliant element, such as a spring or a damper, between a sliding mass and the housing.</li>
<li>to fix a rigid element, such as a sliding mass, at a specific position.</li>
</ul>
<p>::</p>
<h2 id="parameters">Parameters</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="9%" />
<col width="32%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">s0</td>
<td align="left">0</td>
<td align="left">Fixed offset position of housing [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors">Connectors</h2>
<table>
<col width="81%" />
<col width="7%" />
<col width="10%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition">Modelica definition</h2>
<pre><code>model Fixed &quot;Fixed flange&quot;
  parameter SI.Position s0=0 &quot;Fixed offset position of housing&quot;;

  Interfaces.Flange_b flange;
equation 
  flange.s = s0;
end Fixed;</code></pre>
<hr />
<h1 id="image29-modelica.mechanics.translational.components.mass"><img src="Modelica.Mechanics.Translational.Components.MassI.png" alt="image29" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Mass</h1>
<p><strong>Sliding mass with inertia</strong></p>
<h2 id="information-2">Information</h2>
<p>::</p>
<p>Sliding mass with <em>inertia, without friction</em> and two rigidly connected flanges.</p>
<p>The sliding mass has the length L, the position coordinate s is in the middle. Sign convention: A positive force at flange flange_a moves the sliding mass in the positive direction. A negative force at flange flange_a moves the sliding mass to the negative direction.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid">Translational.Interfaces.PartialRigid</a> (Rigid connection of two translational 1D flanges ).</p>
<h2 id="parameters-1">Parameters</h2>
<table>
<col width="31%" />
<col width="8%" />
<col width="12%" />
<col width="47%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Mass">Mass</a></td>
<td align="left">m</td>
<td align="left">
</td>
<td align="left">Mass of the sliding mass [kg]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">L</td>
<td align="left">0</td>
<td align="left">Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.default</td>
<td align="left">Priority to use s and v as states</td>
</tr>
</tbody>
</table>
<h2 id="connectors-1">Connectors</h2>
<table>
<col width="67%" />
<col width="7%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of translational component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-1">Modelica definition</h2>
<pre><code>model Mass &quot;Sliding mass with inertia&quot;
  parameter SI.Mass m(min=0, start=1) &quot;Mass of the sliding mass&quot;;
  parameter StateSelect stateSelect=StateSelect.default 
    &quot;Priority to use s and v as states&quot;;
  extends Translational.Interfaces.PartialRigid(L=0,s(start=0, stateSelect=stateSelect));
  SI.Velocity v(start=0, stateSelect=stateSelect) 
    &quot;Absolute velocity of component&quot;;
  SI.Acceleration a(start=0) &quot;Absolute acceleration of component&quot;;

equation 
  v = der(s);
  a = der(v);
  m*a = flange_a.f + flange_b.f;
end Mass;</code></pre>
<hr />
<h1 id="image30-modelica.mechanics.translational.components.rod"><img src="Modelica.Mechanics.Translational.Components.RodI.png" alt="image30" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Rod</h1>
<p><strong>Rod without inertia</strong></p>
<h2 id="information-3">Information</h2>
<p>::</p>
<p>Rod <em>without inertia</em> and two rigidly connected flanges.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid">Translational.Interfaces.PartialRigid</a> (Rigid connection of two translational 1D flanges ).</p>
<h2 id="parameters-2">Parameters</h2>
<table>
<col width="35%" />
<col width="5%" />
<col width="6%" />
<col width="52%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">L</td>
<td align="left">
</td>
<td align="left">Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-2">Connectors</h2>
<table>
<col width="67%" />
<col width="7%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of translational component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-2">Modelica definition</h2>
<pre><code>model Rod &quot;Rod without inertia&quot;
  extends Translational.Interfaces.PartialRigid;

equation 
  0 = flange_a.f + flange_b.f;
end Rod;</code></pre>
<hr />
<h1 id="image31-modelica.mechanics.translational.components.spring"><img src="Modelica.Mechanics.Translational.Components.SpringI.png" alt="image31" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Spring</h1>
<p><strong>Linear 1D translational spring</strong></p>
<h2 id="information-4">Information</h2>
<p>::</p>
<p>A <em>linear 1D translational spring</em>. The component can be connected either between two sliding masses, or between a sliding mass and the housing (model Fixed), to describe a coupling of the sliding mass with the housing via a spring.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliant">Translational.Interfaces.PartialCompliant</a> (Compliant connection of two translational 1D flanges).</p>
<h2 id="parameters-3">Parameters</h2>
<table>
<col width="55%" />
<col width="8%" />
<col width="6%" />
<col width="29%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant">TranslationalSpringConstant</a></td>
<td align="left">c</td>
<td align="left">
</td>
<td align="left">Spring constant [N/m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_rel0</td>
<td align="left">0</td>
<td align="left">Unstretched spring length [m]</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_rel.start</td>
<td align="left">0</td>
<td align="left">Relative distance (= flange_b.s - flange_a.s) [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-3">Connectors</h2>
<table>
<col width="61%" />
<col width="7%" />
<col width="31%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of compliant 1-dim. translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of compliant 1-dim. translational component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-3">Modelica definition</h2>
<pre><code>model Spring &quot;Linear 1D translational spring&quot;
  extends Translational.Interfaces.PartialCompliant;
  parameter SI.TranslationalSpringConstant c(final min=0, start = 1) 
    &quot;Spring constant &quot;;
  parameter SI.Distance s_rel0=0 &quot;Unstretched spring length&quot;;

equation 
  f = c*(s_rel - s_rel0);
end Spring;</code></pre>
<hr />
<h1 id="image32-modelica.mechanics.translational.components.damper"><img src="Modelica.Mechanics.Translational.Components.DamperI.png" alt="image32" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Damper</h1>
<p><strong>Linear 1D translational damper</strong></p>
<h2 id="information-5">Information</h2>
<p>::</p>
<p><em>Linear, velocity dependent damper</em> element. It can be either connected between a sliding mass and the housing (model Fixed), or between two sliding masses.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates">Translational.Interfaces.PartialCompliantWithRelativeStates</a> (Base model for the compliant connection of two translational 1-dim. shaft flanges where the relative position and relative velocities are used as states), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models).</p>
<h2 id="parameters-4">Parameters</h2>
<table>
<col width="52%" />
<col width="8%" />
<col width="11%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant">TranslationalDampingConstant</a></td>
<td align="left">d</td>
<td align="left">
</td>
<td align="left">Damping constant [N.s/m]</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_rel.start</td>
<td align="left">0</td>
<td align="left">Relative distance (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_rel.start</td>
<td align="left">0</td>
<td align="left">Relative velocity (= der(s_rel)) [m/s]</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.prefer</td>
<td align="left">Priority to use phi_rel and w_rel as states</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_nominal</td>
<td align="left">1e-4</td>
<td align="left">Nominal value of s_rel (used for scaling) [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-4">Connectors</h2>
<table>
<col width="57%" />
<col width="6%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of compliant 1-dim. translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of compliant 1-dim. transational component</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-4">Modelica definition</h2>
<pre><code>model Damper &quot;Linear 1D translational damper&quot;
  extends Translational.Interfaces.PartialCompliantWithRelativeStates;
  parameter SI.TranslationalDampingConstant d(final min=0, start = 0) 
    &quot;Damping constant&quot;;
  extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;
equation 
  f = d*v_rel;
  lossPower = f*v_rel;
end Damper;</code></pre>
<hr />
<h1 id="image33-modelica.mechanics.translational.components.springdamper"><img src="Modelica.Mechanics.Translational.Components.SpringDamperI.png" alt="image33" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.SpringDamper</h1>
<p><strong>Linear 1D translational spring and damper in parallel</strong></p>
<h2 id="information-6">Information</h2>
<p>::</p>
<p>A <em>spring and damper element connected in parallel</em>. The component can be connected either between two sliding masses to describe the elasticity and damping, or between a sliding mass and the housing (model Fixed), to describe a coupling of the sliding mass with the housing via a spring/damper.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates">Translational.Interfaces.PartialCompliantWithRelativeStates</a> (Base model for the compliant connection of two translational 1-dim. shaft flanges where the relative position and relative velocities are used as states), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models).</p>
<h2 id="parameters-5">Parameters</h2>
<table>
<col width="52%" />
<col width="8%" />
<col width="11%" />
<col width="27%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant">TranslationalSpringConstant</a></td>
<td align="left">c</td>
<td align="left">
</td>
<td align="left">Dpring constant [N/m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant">TranslationalDampingConstant</a></td>
<td align="left">d</td>
<td align="left">
</td>
<td align="left">Damping constant [N.s/m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">s_rel0</td>
<td align="left">0</td>
<td align="left">Unstretched spring length [m]</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_rel.start</td>
<td align="left">0</td>
<td align="left">Relative distance (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_rel.start</td>
<td align="left">0</td>
<td align="left">Relative velocity (= der(s_rel)) [m/s]</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.prefer</td>
<td align="left">Priority to use phi_rel and w_rel as states</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_nominal</td>
<td align="left">1e-4</td>
<td align="left">Nominal value of s_rel (used for scaling) [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-5">Connectors</h2>
<table>
<col width="57%" />
<col width="6%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of compliant 1-dim. translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of compliant 1-dim. transational component</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-5">Modelica definition</h2>
<pre><code>model SpringDamper 
  &quot;Linear 1D translational spring and damper in parallel&quot;
  extends Translational.Interfaces.PartialCompliantWithRelativeStates;
  parameter SI.TranslationalSpringConstant c(final min=0, start = 1) 
    &quot;Dpring constant&quot;;
  parameter SI.TranslationalDampingConstant d(final min=0, start = 1) 
    &quot;Damping constant&quot;;
  parameter SI.Position s_rel0=0 &quot;Unstretched spring length&quot;;
  extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;
protected 
  Modelica.SIunits.Force f_c &quot;Spring force&quot;;
  Modelica.SIunits.Force f_d &quot;Damping force&quot;;
equation 
  f_c = c*(s_rel - s_rel0);
  f_d = d*v_rel;
  f = f_c + f_d;
  lossPower = f_d*v_rel;
end SpringDamper;</code></pre>
<hr />
<h1 id="image34-modelica.mechanics.translational.components.elastogap"><img src="Modelica.Mechanics.Translational.Components.ElastoGapI.png" alt="image34" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.ElastoGap</h1>
<p><strong>1D translational spring damper combination with gap</strong></p>
<h2 id="information-7">Information</h2>
<p>::</p>
<p>This component models a spring damper combination that can lift off. It can be connected between a sliding mass and the housing (model <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Fixed">Fixed</a>), to describe the contact of a sliding mass with the housing.</p>
<p>As long as s_rel &gt; s_rel0, no force is exerted (s_rel = flange_b.s -flange_a.s). If s_rel ≤ s_rel0, the contact force is basically computed with a linear spring/damper characteristic. With parameter n≥1 (exponent of spring force), a nonlinear spring force can be modeled:</p>
<pre><code>desiredContactForce = c*|s_rel - s_rel0|^n + d*der(s_rel)</code></pre>
<p>Note, Hertzian contact is described by:</p>
<ul>
<li>Contact between two metallic spheres: n=1.5</li>
<li>Contact between two metallic plates: n=1</li>
</ul>
<p>The above force law leads to the following difficulties:</p>
<ol>
<li>If the damper force becomes larger as the spring force and with opposite sign, the contact force would be &quot;pulling/sticking&quot; which is unphysical, since during contact only pushing forces can occur.</li>
<li>When contact occurs with a non-zero relative speed (which is the usual situation), the damping force has a non-zero value and therefore the contact force changes discontinuously at s_rel = s_rel0. Again, this is not physical because the force can only change continuously. (Note, this component is not an idealized model where a steep characteristic is approximated by a discontinuity, but it shall model the steep characteristic.)</li>
</ol>
<p>In the literature there are several proposals to fix problem (2). Especially, often the following model is used (see, e.g., Lankarani, Nikravesh: Continuous Contact Force Models for Impact Analysis in Multibody Systems, Nonlinear Dynamics 5, pp. 193-207, 1994, <a href="http://www.springerlink.com/content/h50x61270q06p65n/fulltext.pdf">pdf-download</a>):</p>
<pre><code>f = c*s_rel^n + (d*s_rel^n)*der(s_rel)</code></pre>
<p>However, this and other models proposed in literature violate issue (1), i.e., unphysical pulling forces can occur (if d*<strong>der</strong>(s_rel) becomes large enough). Note, if the force law is of the form &quot;f = f_c + f_d&quot;, then a necessary condition is that |f_d| ≤ |f_c|, otherwise (1) and (2) are violated. For this reason, the most simplest approach is used in the ElastoGap model to fix both problems by using this necessary condition in the force law directly. If s_rel0 = 0, the equations are:</p>
<pre><code>if s_rel ≥ 0 then
   f = 0;    // contact force
else
   f_c  = -c*|s_rel|^n;          // contact spring force (Hertzian contact force)
   f_d2 = d*der(s_rel);         // linear contact damper force
   f_d  = if f_d2 &lt;  f_c then  f_c else
          if f_d2 &gt; -f_c then -f_c else f_d2;  // bounded damper force
   f    = f_c + f_d;            // contact force
end if;</code></pre>
<p>Note, since |f_d| ≤ |f_c|, pulling forces cannot occur and the contact force is always continuous, especially around the start of the penetration at s_rel = s_rel0.</p>
<p>In the next figure, a typical simulation with the ElastoGap model is shown (<a href="Modelica_Mechanics_Translational_Examples.html#Modelica.Mechanics.Translational.Examples.ElastoGap">Examples.ElastoGap</a>) where the different effects are visualized:</p>
<ol>
<li>Curve 1 (elastoGap1.f) is the unmodified contact force, i.e., the linear spring/damper characteristic. A pulling/sticking force is present at the end of the contact.</li>
<li>Curve 2 (elastoGap2.f) is the contact force, where the force is explicitly set to zero when pulling/sticking occurs. The contact force is discontinuous when contact starts.</li>
<li>Curve 3 (elastoGap3.f) is the ElastoGap model of this library. No discontinuity and no pulling/sticking occurs.</li>
</ol>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates">Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates</a> (Base model for the compliant connection of two translational 1-dim. shaft flanges where the relative position and relative velocities are used as states), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models).</p>
<h2 id="parameters-6">Parameters</h2>
<table>
<col width="38%" />
<col width="9%" />
<col width="13%" />
<col width="38%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Real</td>
<td align="left">c</td>
<td align="left">
</td>
<td align="left">Spring constant [N/m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">d</td>
<td align="left">
</td>
<td align="left">Damping constant [N/ (m/s)]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">s_rel0</td>
<td align="left">0</td>
<td align="left">Unstretched spring length [m]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">n</td>
<td align="left">1</td>
<td align="left">Exponent of spring force ( f_c = -c*|s_rel-s_rel0|^n )</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="even">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_rel.start</td>
<td align="left">0</td>
<td align="left">Relative distance (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_rel.start</td>
<td align="left">0</td>
<td align="left">Relative velocity (= der(s_rel)) [m/s]</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.prefer</td>
<td align="left">Priority to use phi_rel and w_rel as states</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">s_nominal</td>
<td align="left">1e-4</td>
<td align="left">Nominal value of s_rel (used for scaling) [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-6">Connectors</h2>
<table>
<col width="57%" />
<col width="6%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of compliant 1-dim. translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of compliant 1-dim. transational component</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-6">Modelica definition</h2>
<pre><code>model ElastoGap &quot;1D translational spring damper combination with gap&quot;
  extends Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates;
  parameter Real c(final unit=&quot;N/m&quot;, final min=0, start=1) &quot;Spring constant&quot;;
  parameter Real d(final unit=&quot;N/ (m/s)&quot;, final min=0, start=1) 
    &quot;Damping constant&quot;;
  parameter Modelica.SIunits.Position s_rel0=0 &quot;Unstretched spring length&quot;;
  parameter Real n(final min=1) = 1 
    &quot;Exponent of spring force ( f_c = -c*|s_rel-s_rel0|^n )&quot;;
  extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;

/*
Please note that initialization might fail due to the nonlinear spring characteristic
(spring force is zero for s_rel &gt; s_rel0)
if a positive force is acting on the element and no other force balances this force
(e.g., when setting both initial velocity and acceleration to 0)
*/
  Boolean contact &quot;=true, if contact, otherwise no contact&quot;;
protected 
  Modelica.SIunits.Force f_c &quot;Spring force&quot;;
  Modelica.SIunits.Force f_d2 &quot;Linear damping force&quot;;
  Modelica.SIunits.Force f_d 
    &quot;Linear damping force which is limited by spring force (|f_d| &lt;= |f_c|)&quot;;
equation 
  // Modify contact force, so that it is only &quot;pushing&quot; and not
  // &quot;pulling/sticking&quot; and that it is continous
  contact = s_rel &lt; s_rel0;
  f_c  = smooth(1, noEvent( if contact then -c*abs(s_rel - s_rel0)^n else 0));
  f_d2 = if contact then d*v_rel else 0;
  f_d  = smooth(0, noEvent( if contact then (if f_d2 &lt;  f_c then  f_c else 
                                             if f_d2 &gt; -f_c then -f_c else f_d2) else 0));
  f = f_c + f_d;
  lossPower = f_d*v_rel;
end ElastoGap;</code></pre>
<hr />
<h1 id="image35-modelica.mechanics.translational.components.supportfriction"><img src="Modelica.Mechanics.Translational.Components.SupportFrictionI.png" alt="image35" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.SupportFriction</h1>
<p><strong>Coulomb friction in support</strong></p>
<h2 id="information-8">Information</h2>
<p>::</p>
<p>This element describes <strong>Coulomb friction</strong> in <strong>support</strong>, i.e., a frictional force acting between a flange and the housing. The positive sliding friction force &quot;f&quot; has to be defined by table &quot;f_pos&quot; as function of the absolute velocity &quot;v&quot;. E.g.</p>
<pre><code>v |   f</code></pre>
<blockquote>
<dl>
<dt>---+----- 0 | 0</dt>
<dd><p>1 | 2 2 | 5 3 | 8</p>
</dd>
</dl>
</blockquote>
<p>gives the following table:</p>
<pre><code>f_pos = [0, 0; 1, 2; 2, 5; 3, 8];</code></pre>
<p>Currently, only linear interpolation in the table is supported. Outside of the table, extrapolation through the last two table entries is used. It is assumed that the negative sliding friction force has the same characteristic with negative values. Friction is modelled in the following way:</p>
<p>When the absolute velocity &quot;v&quot; is not zero, the friction force is a function of v and of a constant normal force. This dependency is defined via table f_pos and can be determined by measurements, e.g., by driving the gear with constant velocity and measuring the needed driving force (= friction force).</p>
<p>When the absolute velocity becomes zero, the elements connected by the friction element become stuck, i.e., the absolute position remains constant. In this phase the friction force is calculated from a force balance due to the requirement, that the absolute acceleration shall be zero. The elements begin to slide when the friction force exceeds a threshold value, called the maximum static friction force, computed via:</p>
<pre><code>maximum_static_friction = peak * sliding_friction(v=0)  (peak &gt;= 1)</code></pre>
<p>This procedure is implemented in a &quot;clean&quot; way by state events and leads to continuous/discrete systems of equations if friction elements are dynamically coupled which have to be solved by appropriate numerical methods. The method is described in:</p>
<p>Otter M., Elmqvist H., and Mattsson S.E. (1999):</p>
<p><strong>Hybrid Modeling in Modelica based on the Synchronous Data Flow Principle</strong>. CACSD'99, Aug. 22.-26, Hawaii.</p>
<p>More precise friction models take into account the elasticity of the material when the two elements are &quot;stuck&quot;, as well as other effects, like hysteresis. This has the advantage that the friction element can be completely described by a differential equation without events. The drawback is that the system becomes stiff (about 10-20 times slower simulation) and that more material constants have to be supplied which requires more sophisticated identification. For more details, see the following references, especially (Armstrong and Canudas de Witt 1996):</p>
<p>Armstrong B. (1991):</p>
<p><strong>Control of Machines with Friction</strong>. Kluwer Academic Press, Boston MA.</p>
<p>Armstrong B., and Canudas de Wit C. (1996):</p>
<p><strong>Friction Modeling and Compensation.</strong> The Control Handbook, edited by W.S.Levine, CRC Press, pp. 1369-1382.</p>
<p>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995):</p>
<p><strong>A new model for control of systems with friction.</strong> IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2">Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2</a> (Partial model for a component with one translational 1-dim. shaft flange and a support used for textual modeling, i.e., for elementary models), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models), <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialFriction">Translational.Interfaces.PartialFriction</a> (Base model of Coulomb friction elements).</p>
<h2 id="parameters-7">Parameters</h2>
<table>
<col width="38%" />
<col width="13%" />
<col width="8%" />
<col width="39%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useSupport</td>
<td align="left">false</td>
<td align="left">= true, if support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">f_pos[:, 2]</td>
<td align="left">[0, 1]</td>
<td align="left">[v, f] Positive sliding friction characteristic (v&gt;=0)</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">1</td>
<td align="left">peak*f_pos[1,2] = Maximum friction force for v==0</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">startForward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">true, if v_rel=0 and start of forward sliding</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">startBackward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">true, if v_rel=0 and start of backward sliding</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">locked.start</td>
<td align="left">false</td>
<td align="left">true, if v_rel=0 and not sliding</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_small</td>
<td align="left">1e-3</td>
<td align="left">Relative velocity near to zero (see model info text) [m/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-7">Connectors</h2>
<table>
<col width="57%" />
<col width="6%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Flange of left shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Flange of right shaft</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support">Support</a></td>
<td align="left">support</td>
<td align="left">Support/housing of component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-7">Modelica definition</h2>
<pre><code>model SupportFriction &quot;Coulomb friction in support&quot;

  extends Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2;
  extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;

  parameter Real f_pos[:, 2]=[0, 1] 
    &quot;[v, f] Positive sliding friction characteristic (v&gt;=0)&quot;;
  parameter Real peak(final min=1) = 1 
    &quot;peak*f_pos[1,2] = Maximum friction force for v==0&quot;;
  extends Translational.Interfaces.PartialFriction;

  SI.Position s;
  SI.Force f &quot;Friction force&quot;;
  SI.Velocity v &quot;Absolute velocity of flange_a and flange_b&quot;;
  SI.Acceleration a &quot;Absolute acceleration of flange_a and flange_b&quot;;
equation 
  // Constant auxiliary variables
  f0 = Modelica.Math.tempInterpol1(0, f_pos, 2);
  f0_max = peak*f0;
  free = false;

  s = s_a - s_support;
  s_a = s_b;

// velocity and acceleration of flanges
  v = der(s);
  a = der(v);
  v_relfric = v;
  a_relfric = a;

// Friction force
  flange_a.f + flange_b.f - f = 0;

// Friction force
  f = if locked then sa*unitForce else 
     (if startForward then          Modelica.Math.tempInterpol1( v, f_pos, 2) else 
      if startBackward then        -Modelica.Math.tempInterpol1(-v, f_pos, 2) else 
      if pre(mode) == Forward then  Modelica.Math.tempInterpol1( v, f_pos, 2) else 
                                   -Modelica.Math.tempInterpol1(-v, f_pos, 2));

  lossPower = f*v_relfric;
end SupportFriction;</code></pre>
<hr />
<h1 id="image36-modelica.mechanics.translational.components.brake"><img src="Modelica.Mechanics.Translational.Components.BrakeI.png" alt="image36" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.Brake</h1>
<p><strong>Brake basend on Coulomb friction</strong></p>
<h2 id="information-9">Information</h2>
<p>::</p>
<p>This component models a <strong>brake</strong>, i.e., a component where a frictional force is acting between the housing and a flange and a controlled normal force presses the flange to the housing in order to increase friction. The normal force fn has to be provided as input signal f_normalized in a normalized form (0 ≤ f_normalized ≤ 1), fn = fn_max*f_normalized, where fn_max has to be provided as parameter. Friction in the brake is modelled in the following way:</p>
<p>When the absolute velocity &quot;v&quot; is not zero, the friction force is a function of the velocity dependent friction coefficient mue(v) , of the normal force &quot;fn&quot;, and of a geometry constant &quot;cgeo&quot; which takes into account the geometry of the device and the assumptions on the friction distributions:</p>
<pre><code>frictional_force = cgeo * mue(v) * fn</code></pre>
<p>Typical values of coefficients of friction:</p>
<pre><code>dry operation   :  mue = 0.2 .. 0.4
operating in oil:  mue = 0.05 .. 0.1</code></pre>
<p>The positive part of the friction characteristic <strong>mue</strong>(v), v &gt;= 0, is defined via table mue_pos (first column = v, second column = mue). Currently, only linear interpolation in the table is supported.</p>
<p>When the absolute velocity becomes zero, the elements connected by the friction element become stuck, i.e., the absolute position remains constant. In this phase the friction force is calculated from a force balance due to the requirement, that the absolute acceleration shall be zero. The elements begin to slide when the friction force exceeds a threshold value, called the maximum static friction force, computed via:</p>
<pre><code>frictional_force = peak * cgeo * mue(w=0) * fn   (peak &gt;= 1)</code></pre>
<p>This procedure is implemented in a &quot;clean&quot; way by state events and leads to continuous/discrete systems of equations if friction elements are dynamically coupled. The method is described in:</p>
<p>Otter M., Elmqvist H., and Mattsson S.E. (1999):</p>
<p><strong>Hybrid Modeling in Modelica based on the Synchronous Data Flow Principle</strong>. CACSD'99, Aug. 22.-26, Hawaii.</p>
<p>More precise friction models take into account the elasticity of the material when the two elements are &quot;stuck&quot;, as well as other effects, like hysteresis. This has the advantage that the friction element can be completely described by a differential equation without events. The drawback is that the system becomes stiff (about 10-20 times slower simulation) and that more material constants have to be supplied which requires more sophisticated identification. For more details, see the following references, especially (Armstrong and Canudas de Witt 1996):</p>
<p>Armstrong B. (1991):</p>
<p><strong>Control of Machines with Friction</strong>. Kluwer Academic Press, Boston MA.</p>
<p>Armstrong B., and Canudas de Wit C. (1996):</p>
<p><strong>Friction Modeling and Compensation.</strong> The Control Handbook, edited by W.S.Levine, CRC Press, pp. 1369-1382.</p>
<p>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995):</p>
<p><strong>A new model for control of systems with friction.</strong> IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2">Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2</a> (Partial model for a component with one translational 1-dim. shaft flange and a support used for textual modeling, i.e., for elementary models), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models), <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialFriction">Translational.Interfaces.PartialFriction</a> (Base model of Coulomb friction elements).</p>
<h2 id="parameters-8">Parameters</h2>
<table>
<col width="38%" />
<col width="13%" />
<col width="8%" />
<col width="39%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useSupport</td>
<td align="left">false</td>
<td align="left">= true, if support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">mue_pos[:, 2]</td>
<td align="left">[0, 0.5]</td>
<td align="left">[v, f] Positive sliding friction characteristic (v&gt;=0)</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">peak</td>
<td align="left">1</td>
<td align="left">peak*mue_pos[1,2] = Maximum friction force for v==0</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">cgeo</td>
<td align="left">1</td>
<td align="left">Geometry constant containing friction distribution assumption</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Force">Force</a></td>
<td align="left">fn_max</td>
<td align="left">
</td>
<td align="left">Maximum normal force [N]</td>
</tr>
<tr class="odd">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">startForward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">true, if v_rel=0 and start of forward sliding</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">startBackward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">true, if v_rel=0 and start of backward sliding</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">locked.start</td>
<td align="left">false</td>
<td align="left">true, if v_rel=0 and not sliding</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_small</td>
<td align="left">1e-3</td>
<td align="left">Relative velocity near to zero (see model info text) [m/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-8">Connectors</h2>
<table>
<col width="51%" />
<col width="7%" />
<col width="41%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Flange of left shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Flange of right shaft</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support">Support</a></td>
<td align="left">support</td>
<td align="left">Support/housing of component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">f_normalized</td>
<td align="left">Normalized force signal 0..1 (normal force = fn_max*f_normalized; brake is active if &gt; 0)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-8">Modelica definition</h2>
<pre><code>model Brake &quot;Brake basend on Coulomb friction&quot;

  extends Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport2;
  extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;
  parameter Real mue_pos[:, 2]=[0, 0.5] 
    &quot;[v, f] Positive sliding friction characteristic (v&gt;=0)&quot;;
  parameter Real peak(final min=1) = 1 
    &quot;peak*mue_pos[1,2] = Maximum friction force for v==0&quot;;
  parameter Real cgeo(final min=0) = 1 
    &quot;Geometry constant containing friction distribution assumption&quot;;
  parameter SI.Force fn_max(final min=0, start=1) &quot;Maximum normal force&quot;;
  extends Translational.Interfaces.PartialFriction;

  SI.Position s;
  SI.Force f &quot;Brake friction force&quot;;
  SI.Velocity v &quot;Absolute velocity of flange_a and flange_b&quot;;
  SI.Acceleration a &quot;Absolute acceleration of flange_a and flange_b&quot;;

  Real mue0 &quot;Friction coefficient for v=0 and forward sliding&quot;;
  SI.Force fn &quot;Normal force (=fn_max*f_normalized)&quot;;

  // Constant auxiliary variable
  Modelica.Blocks.Interfaces.RealInput f_normalized 
    &quot;Normalized force signal 0..1 (normal force = fn_max*f_normalized; brake is active if &gt; 0)&quot;;

equation 
  mue0 = Modelica.Math.tempInterpol1(0, mue_pos, 2);

  s = s_a;
  s = s_b;

  // velocity and acceleration of flanges flange_a and flange_b
  v = der(s);
  a = der(v);
  v_relfric = v;
  a_relfric = a;

  // Friction force, normal force and friction force for v_rel=0
  flange_a.f + flange_b.f - f = 0;
  fn = fn_max*f_normalized;
  f0 = mue0*cgeo*fn;
  f0_max = peak*f0;
  free = fn &lt;= 0;

  // Friction force
  f = if locked then sa*unitForce else 
      if free then   0 else 
      cgeo*fn*(if startForward then          Modelica.Math.tempInterpol1( v, mue_pos, 2) else 
               if startBackward then        -Modelica.Math.tempInterpol1(-v, mue_pos, 2) else 
               if pre(mode) == Forward then  Modelica.Math.tempInterpol1( v, mue_pos, 2) else 
                                            -Modelica.Math.tempInterpol1(-v, mue_pos, 2));

  lossPower = f*v_relfric;
end Brake;</code></pre>
<hr />
<h1 id="image37-modelica.mechanics.translational.components.idealgearr2t"><img src="Modelica.Mechanics.Translational.Components.IdealGearR2TI.png" alt="image37" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.IdealGearR2T</h1>
<p><strong>Gearbox transforming rotational into translational motion</strong></p>
<h2 id="information-10">Information</h2>
<p>::</p>
<p>Couples rotational and translational motion, like a toothed wheel with a toothed rack, specifying the ratio of rotational / translational motion.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealGearR2T">Modelica.Mechanics.Rotational.Components.IdealGearR2T</a> (Gearbox transforming rotational into translational motion).</p>
<h2 id="parameters-9">Parameters</h2>
<table>
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="67%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useSupportR</td>
<td align="left">false</td>
<td align="left">= true, if rotational support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useSupportT</td>
<td align="left">false</td>
<td align="left">= true, if translational support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">ratio</td>
<td align="left">
</td>
<td align="left">Transmission ratio (flange_a.phi/flange_b.s) [rad/m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-9">Connectors</h2>
<table>
<col width="66%" />
<col width="7%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flangeR</td>
<td align="left">Flange of rotational shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flangeT</td>
<td align="left">Flange of translational rod</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Support">Support</a></td>
<td align="left">supportR</td>
<td align="left">Rotational support/housing of component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support">Support</a></td>
<td align="left">supportT</td>
<td align="left">Translational support/housing of component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-9">Modelica definition</h2>
<pre><code>model IdealGearR2T 
  &quot;Gearbox transforming rotational into translational motion&quot;
  extends Modelica.Mechanics.Rotational.Components.IdealGearR2T;
equation 

end IdealGearR2T;</code></pre>
<hr />
<h1 id="image38-modelica.mechanics.translational.components.idealrollingwheel"><img src="Modelica.Mechanics.Translational.Components.IdealRollingWheelI.png" alt="image38" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.IdealRollingWheel</h1>
<p><strong>Simple 1-dim. model of an ideal rolling wheel without inertia</strong></p>
<h2 id="information-11">Information</h2>
<p>::</p>
<p>Couples rotational and translational motion, like an ideal rolling wheel, specifying the wheel radius.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealRollingWheel">Modelica.Mechanics.Rotational.Components.IdealRollingWheel</a> (Simple 1-dim. model of an ideal rolling wheel without inertia).</p>
<h2 id="parameters-10">Parameters</h2>
<table>
<col width="37%" />
<col width="9%" />
<col width="6%" />
<col width="46%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useSupportR</td>
<td align="left">false</td>
<td align="left">= true, if rotational support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">useSupportT</td>
<td align="left">false</td>
<td align="left">= true, if translational support flange enabled, otherwise implicitly grounded</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Distance">Distance</a></td>
<td align="left">radius</td>
<td align="left">
</td>
<td align="left">Wheel radius [m]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-10">Connectors</h2>
<table>
<col width="66%" />
<col width="7%" />
<col width="25%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flangeR</td>
<td align="left">Flange of rotational shaft</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flangeT</td>
<td align="left">Flange of translational rod</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Support">Support</a></td>
<td align="left">supportR</td>
<td align="left">Rotational support/housing of component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support">Support</a></td>
<td align="left">supportT</td>
<td align="left">Translational support/housing of component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-10">Modelica definition</h2>
<pre><code>model IdealRollingWheel 
  &quot;Simple 1-dim. model of an ideal rolling wheel without inertia&quot;
  extends Modelica.Mechanics.Rotational.Components.IdealRollingWheel;
equation 

end IdealRollingWheel;</code></pre>
<hr />
<h1 id="image39-modelica.mechanics.translational.components.initializeflange"><img src="Modelica.Mechanics.Translational.Components.InitializeFlangeI.png" alt="image39" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.InitializeFlange</h1>
<p><strong>Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)</strong></p>
<h2 id="information-12">Information</h2>
<p>::</p>
<p>This component is used to optionally initialize the position, speed, and/or acceleration of the flange to which this component is connected. Via parameters use_s_start, use_v_start, use_a_start the corresponding input signals s_start, v_start, a_start are conditionally activated. If an input is activated, the corresponding flange property is initialized with the input value at start time.</p>
<p>For example, if &quot;use_s_start = true&quot;, then flange.s is initialized with the value of the input signal &quot;s_start&quot; at the start time.</p>
<p>Additionally, it is optionally possible to define the &quot;StateSelect&quot; attribute of the flange position and the flange speed via paramater &quot;stateSelection&quot;.</p>
<p>This component is especially useful when the initial values of a flange shall be set according to reference signals of a controller that are provided via a signal bus.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Modelica.Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="parameters-11">Parameters</h2>
<table>
<col width="10%" />
<col width="12%" />
<col width="16%" />
<col width="61%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_s_start</td>
<td align="left">true</td>
<td align="left">= true, if initial position is defined by input s_start, otherwise not initialized</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">use_v_start</td>
<td align="left">true</td>
<td align="left">= true, if initial speed is defined by input v_start, otherwise not initialized</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">use_a_start</td>
<td align="left">true</td>
<td align="left">= true, if initial acceleration is defined by input a_start, otherwise not initialized</td>
</tr>
<tr class="even">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.default</td>
<td align="left">Priority to use flange angle and speed as states</td>
</tr>
</tbody>
</table>
<h2 id="connectors-11">Connectors</h2>
<table>
<col width="68%" />
<col width="7%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">s_start</td>
<td align="left">Initial position of flange</td>
</tr>
<tr class="even">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">v_start</td>
<td align="left">Initial speed of flange</td>
</tr>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">a_start</td>
<td align="left">Initial angular acceleration of flange</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">Flange that is initialized</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-11">Modelica definition</h2>
<pre><code>model InitializeFlange 
  &quot;Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)&quot;
  extends Modelica.Blocks.Interfaces.BlockIcon;
  parameter Boolean use_s_start = true 
    &quot;= true, if initial position is defined by input s_start, otherwise not initialized&quot;;
  parameter Boolean use_v_start = true 
    &quot;= true, if initial speed is defined by input v_start, otherwise not initialized&quot;;
  parameter Boolean use_a_start = true 
    &quot;= true, if initial acceleration is defined by input a_start, otherwise not initialized&quot;;

  parameter StateSelect stateSelect=StateSelect.default 
    &quot;Priority to use flange angle and speed as states&quot;;

  Modelica.Blocks.Interfaces.RealInput s_start if use_s_start 
    &quot;Initial position of flange&quot;;
  Modelica.Blocks.Interfaces.RealInput v_start if use_v_start 
    &quot;Initial speed of flange&quot;;
  Modelica.Blocks.Interfaces.RealInput a_start if use_a_start 
    &quot;Initial angular acceleration of flange&quot;;
  Interfaces.Flange_b flange &quot;Flange that is initialized&quot;;

  Modelica.SIunits.Position s_flange(stateSelect=stateSelect)=flange.s 
    &quot;Flange position&quot;;
  Modelica.SIunits.Velocity v_flange(stateSelect=stateSelect)= der(s_flange) 
    &quot;= der(s_flange)&quot;;

protected 
  encapsulated model Set_s_start &quot;Set s_start&quot;
    import Modelica;
    extends Modelica.Blocks.Interfaces.BlockIcon;
    Modelica.Blocks.Interfaces.RealInput s_start &quot;Start position&quot;;

    Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
  initial equation 
    flange.s = s_start;
  equation 
    flange.f = 0;

  end Set_s_start;

  encapsulated model Set_v_start &quot;Set v_start&quot;
    import Modelica;
    extends Modelica.Blocks.Interfaces.BlockIcon;
    Modelica.Blocks.Interfaces.RealInput v_start &quot;Start velocity&quot;;

    Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
  initial equation 
    der(flange.s) = v_start;
  equation 
    flange.f = 0;

  end Set_v_start;

  encapsulated model Set_a_start &quot;Set a_start&quot;
    import Modelica;
    extends Modelica.Blocks.Interfaces.BlockIcon;
    Modelica.Blocks.Interfaces.RealInput a_start &quot;Start acceleration&quot;;

    Modelica.Mechanics.Translational.Interfaces.Flange_b flange(s(stateSelect=StateSelect.avoid));
    Modelica.SIunits.Velocity v = der(flange.s);
  initial equation 
    der(v) = a_start;
  equation 
    flange.f = 0;

  end Set_a_start;

  encapsulated model Set_flange_f &quot;Set flange_f to zero&quot;
    import Modelica;
    extends Modelica.Blocks.Interfaces.BlockIcon;
    Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
  equation 
    flange.f = 0;
  end Set_flange_f;
protected 
  Set_s_start set_s_start if use_s_start;
  Set_v_start set_v_start if use_v_start;
  Set_a_start set_a_start if use_a_start;
  Set_flange_f set_flange_f;
equation 
  connect(set_s_start.flange, flange);
  connect(set_v_start.flange, flange);
  connect(set_a_start.flange, flange);
  connect(set_flange_f.flange, flange);
  connect(s_start, set_s_start.s_start);
  connect(v_start, set_v_start.v_start);
  connect(a_start, set_a_start.a_start);
end InitializeFlange;</code></pre>
<hr />
<h1 id="image40-modelica.mechanics.translational.components.masswithstopandfriction"><img src="Modelica.Mechanics.Translational.Components.MassWithStopAndFrictionI.png" alt="image40" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.MassWithStopAndFriction</h1>
<p><strong>Sliding mass with hard stop and Stribeck friction</strong></p>
<h2 id="information-13">Information</h2>
<p>::</p>
<p>This element describes the <em>Stribeck friction characteristics</em> of a sliding mass, i. e. the frictional force acting between the sliding mass and the support. Included is a <em>hard stop</em> for the position. The surface is fixed and there is friction between sliding mass and surface. The frictional force f is given for positive velocity v by:</p>
<p>**</p>
<p>The distance between the left and the right connector is given by parameter L. The position of the center of gravity, coordinate s, is in the middle between the two flanges.</p>
<p>There are hard stops at smax and smin, i. e. if **</p>
<p>flange_a.s &gt;= smin</p>
<p>flange_b.s &lt;= xmax</p>
<p>the sliding mass can move freely.</p>
<p>When the absolute velocity becomes zero, the sliding mass becomes stuck, i.e., the absolute position remains constant. In this phase the friction force is calculated from a force balance due to the requirement that the absolute acceleration shall be zero. The elements begin to slide when the friction force exceeds a threshold value, called the maximum static friction force, computed via:</p>
<p>**</p>
<p><strong>This requires the states Stop.s and Stop.v</strong> . If these states are eliminated during the index reduction the model will not work. To avoid this any inertias should be connected via springs to the Stop element, other sliding masses, dampers or hydraulic chambers must be avoided.</p>
<p>For more details of the used friction model see the following reference:</p>
<dl>
<dt>Beater P. (1999):</dt>
<dd><p><a href="http://www.springer.de/cgi-bin/search_book.pl?isbn=3-540-65444-5">Entwurf hydraulischer Maschinen</a>. Springer Verlag Berlin Heidelberg New York.</p>
</dd>
</dl>
<p>The friction model is implemented in a &quot;clean&quot; way by state events and leads to continuous/discrete systems of equations which have to be solved by appropriate numerical methods. The method is described in:</p>
<dl>
<dt>Otter M., Elmqvist H., and Mattsson S.E. (1999):</dt>
<dd><p><em>Hybrid Modeling in Modelica based on the Synchronous Data Flow Principle</em>. CACSD'99, Aug. 22.-26, Hawaii.</p>
</dd>
</dl>
<p>More precise friction models take into account the elasticity of the material when the two elements are &quot;stuck&quot;, as well as other effects, like hysteresis. This has the advantage that the friction element can be completely described by a differential equation without events. The drawback is that the system becomes stiff (about 10-20 times slower simulation) and that more material constants have to be supplied which requires more sophisticated identification. For more details, see the following references, especially (Armstrong and Canudas de Witt 1996):</p>
<blockquote>
<dl>
<dt>Armstrong B. (1991):</dt>
<dd><p><em>Control of Machines with Friction</em>. Kluwer Academic Press, Boston MA.</p>
</dd>
</dl>
</blockquote>
<dl>
<dt>Armstrong B., and Canudas de Wit C. (1996):</dt>
<dd><p><em>Friction Modeling and Compensation.</em> The Control Handbook, edited by W.S.Levine, CRC Press, pp. 1369-1382.</p>
</dd>
<dt>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995):</dt>
<dd><p>A<em>new model for control of systems with friction.</em> IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.</p>
</dd>
</dl>
<h3 id="optional-heatport">Optional heatPort</h3>
<p>The dissipated energy is transported in form of heat to the optional heatPort connector that can be enabled via parameter &quot;useHeatPort&quot;. Independently whether the heatPort is or is not enabled, the dissipated power is defined with variable &quot;lossPower&quot;. If contact occurs at the hard stops, the lossPower is not correctly modelled at this time instant, because the hard stop would introduce a dirac impulse in the lossPower due to the discontinuously changing kinetic energy of the mass (lossPower is the derivative of the kinetic energy at the time instant of the impact).</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop">PartialFrictionWithStop</a> (Base model of Coulomb friction elements with stop), <a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT">Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT</a> (Partial model to include a conditional HeatPort in order to dissipate losses, used for textual modeling, i.e., for elementary models).</p>
<h2 id="parameters-12">Parameters</h2>
<table>
<col width="33%" />
<col width="12%" />
<col width="7%" />
<col width="47%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">smax</td>
<td align="left">
</td>
<td align="left">Right stop for (right end of) sliding mass [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">smin</td>
<td align="left">
</td>
<td align="left">Left stop for (left end of) sliding mass [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">L</td>
<td align="left">
</td>
<td align="left">Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Mass">Mass</a></td>
<td align="left">m</td>
<td align="left">
</td>
<td align="left">Mass [kg]</td>
</tr>
<tr class="odd">
<td align="left">Real</td>
<td align="left">F_prop</td>
<td align="left">
</td>
<td align="left">Velocity dependent friction [N.s/m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Force">Force</a></td>
<td align="left">F_Coulomb</td>
<td align="left">
</td>
<td align="left">Constant friction: Coulomb force [N]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Force">Force</a></td>
<td align="left">F_Stribeck</td>
<td align="left">
</td>
<td align="left">Stribeck effect [N]</td>
</tr>
<tr class="even">
<td align="left">Real</td>
<td align="left">fexp</td>
<td align="left">
</td>
<td align="left">Exponential decay [s/m]</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">useHeatPort</td>
<td align="left">false</td>
<td align="left">=true, if heatPort is enabled</td>
</tr>
<tr class="even">
<td align="left">Initialization</td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">startForward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small</td>
</tr>
<tr class="even">
<td align="left">Boolean</td>
<td align="left">startBackward.start</td>
<td align="left"><strong>false</strong></td>
<td align="left">= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small</td>
</tr>
<tr class="odd">
<td align="left">Boolean</td>
<td align="left">locked.start</td>
<td align="left">false</td>
<td align="left">true, if v_rel=0 and not sliding</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">s.start</td>
<td align="left">0</td>
<td align="left">Absolute position of center of component (s = flange_a.s + L/2 = flange_b.s - L/2) [m]</td>
</tr>
<tr class="odd">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_small</td>
<td align="left">1e-3</td>
<td align="left">Relative velocity near to zero (see model info text) [m/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-12">Connectors</h2>
<table>
<col width="57%" />
<col width="6%" />
<col width="36%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of translational component</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a">HeatPort_a</a></td>
<td align="left">heatPort</td>
<td align="left">Optional port to which dissipated losses are transported in form of heat</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-12">Modelica definition</h2>
<pre><code>model MassWithStopAndFriction 
  &quot;Sliding mass with hard stop and Stribeck friction&quot;
  extends PartialFrictionWithStop;
  SI.Velocity v(start=0, stateSelect = StateSelect.always) 
    &quot;Absolute velocity of flange_a and flange_b&quot;;
  SI.Acceleration a(start=0) &quot;Absolute acceleration of flange_a and flange_b&quot;;
  parameter Modelica.SIunits.Mass m(start=1) &quot;Mass&quot;;
  parameter Real F_prop(final unit=&quot;N.s/m&quot;, final min=0, start = 1) 
    &quot;Velocity dependent friction&quot;;
  parameter Modelica.SIunits.Force F_Coulomb(start=5) 
    &quot;Constant friction: Coulomb force&quot;;
  parameter Modelica.SIunits.Force F_Stribeck(start=10) &quot;Stribeck effect&quot;;
  parameter Real fexp(final unit=&quot;s/m&quot;, final min=0, start = 2) 
    &quot;Exponential decay&quot;;
extends Modelica.Thermal.HeatTransfer.Interfaces.PartialElementaryConditionalHeatPortWithoutT;
  Integer stopped = if s &lt;= smin + L/2 then -1 else if s &gt;= smax - L/2 then +1 else 0;
encapsulated partial model PartialFrictionWithStop 
    &quot;Base model of Coulomb friction elements with stop&quot;

    import SI = Modelica.SIunits;
    import Modelica.Mechanics.Translational.Interfaces.PartialRigid;
  parameter SI.Position smax(start= 25) 
      &quot;Right stop for (right end of) sliding mass&quot;;
  parameter SI.Position smin(start=-25) 
      &quot;Left stop for (left end of) sliding mass&quot;;
  parameter SI.Velocity v_small=1e-3 
      &quot;Relative velocity near to zero (see model info text)&quot;;
// Equations to define the following variables have to be defined in subclasses
  SI.Velocity v_relfric &quot;Relative velocity between frictional surfaces&quot;;
  SI.Acceleration a_relfric &quot;Relative acceleration between frictional surfaces&quot;;
  SI.Force f 
      &quot;Friction force (positive, if directed in opposite direction of v_rel)&quot;;
  SI.Force f0 &quot;Friction force for v=0 and forward sliding&quot;;
  SI.Force f0_max &quot;Maximum friction force for v=0 and locked&quot;;
  Boolean free &quot;true, if frictional element is not active&quot;;
// Equations to define the following variables are given in this class
  Real sa(unit=&quot;1&quot;) 
      &quot;Path parameter of friction characteristic f = f(a_relfric)&quot;;
  Boolean startForward(start=false, fixed=true) 
      &quot;= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small&quot;;
  Boolean startBackward(start=false, fixed=true) 
      &quot;= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small&quot;;
  Boolean locked(start=false) &quot;true, if v_rel=0 and not sliding&quot;;
  extends PartialRigid(s(start=0, stateSelect = StateSelect.always));
  constant Integer Unknown=3 &quot;Value of mode is not known&quot;;
  constant Integer Free=2 &quot;Element is not active&quot;;
  constant Integer Forward=1 &quot;v_rel &gt; 0 (forward sliding)&quot;;
  constant Integer Stuck=0 
      &quot;v_rel = 0 (forward sliding, locked or backward sliding)&quot;;
  constant Integer Backward=-1 &quot;v_rel &lt; 0 (backward sliding)&quot;;
  Integer mode(
    final min=Backward,
    final max=Unknown,
    start=Unknown, fixed=true);
  protected 
  constant SI.Acceleration unitAcceleration = 1;
  constant SI.Force unitForce = 1;
equation 
/* Friction characteristic
   (locked is introduced to help the Modelica translator determining
   the different structural configurations,
   if for each configuration special code shall be generated)
*/
  startForward = pre(mode) == Stuck and (sa &gt; f0_max/unitForce and s &lt; (smax - L/2) or 
        pre(startForward) and sa &gt; f0/unitForce and s &lt; (smax - L/2)) or pre(mode)
     == Backward and v_relfric &gt; v_small or initial() and (v_relfric &gt; 0);
  startBackward = pre(mode) == Stuck and (sa &lt; -f0_max/unitForce and s &gt; (smin + L/2) or 
        pre(startBackward) and sa &lt; -f0/unitForce and s &gt; (smin + L/2)) or pre(mode)
     == Forward and v_relfric &lt; -v_small or initial() and (v_relfric &lt; 0);
  locked = not free and 
    not (pre(mode) == Forward or startForward or pre(mode) == Backward or startBackward);

  a_relfric/unitAcceleration = if locked then               0 else 
                               if free then                 sa else 
                               if startForward then         sa - f0_max/unitForce else 
                               if startBackward then        sa + f0_max/unitForce else 
                               if pre(mode) == Forward then sa - f0_max/unitForce else 
                                                            sa + f0_max/unitForce;

/* Friction torque has to be defined in a subclass. Example for a clutch:
   f = if locked then sa else
       if free then   0 else
       cgeo*fn*(if startForward then          Math.tempInterpol1( v_relfric, mue_pos, 2) else
                if startBackward then        -Math.tempInterpol1(-v_relfric, mue_pos, 2) else
                if pre(mode) == Forward then  Math.tempInterpol1( v_relfric, mue_pos, 2) else
                                             -Math.tempInterpol1(-v_relfric, mue_pos, 2));
*/
// finite state machine to determine configuration
  mode = if free then Free else 
    (if (pre(mode) == Forward  or pre(mode) == Free or startForward)  and v_relfric &gt; 0 and s &lt; (smax - L/2) then 
       Forward else 
     if (pre(mode) == Backward or pre(mode) == Free or startBackward) and v_relfric &lt; 0 and s &gt; (smin + L/2) then 
       Backward else 
       Stuck);
end PartialFrictionWithStop;
equation 
  // Constant auxiliary variables
  f0 = (F_Coulomb + F_Stribeck);
  f0_max = f0*1.001;
  free = f0 &lt;= 0 and F_prop &lt;= 0 and s &gt; smin + L/2 and s &lt; smax - L/2;
  // Velocity and acceleration of flanges
  v = der(s);
  a = der(v);
  v_relfric = v;
  a_relfric = a;
// Equilibrium of forces
  0 = flange_a.f + flange_b.f - f - m*der(v);
// Friction force
  f = if locked then sa*unitForce else 
      if free then   0 else 
                    (if startForward then         F_prop*v + F_Coulomb + F_Stribeck else 
                     if startBackward then        F_prop*v - F_Coulomb - F_Stribeck else 
                     if pre(mode) == Forward then F_prop*v + F_Coulomb + F_Stribeck*exp(-fexp*abs(v)) else 
                                                  F_prop*v - F_Coulomb - F_Stribeck*exp(-fexp*abs(v)));
  lossPower = f*v_relfric;

// Define events for hard stops and reinitilize the state variables velocity v and position s
algorithm 
  when (initial()) then
    assert(s &gt; smin + L/2 or s &gt;= smin + L/2 and v &gt;= 0,
      &quot;Error in initialization of hard stop. (s - L/2) must be &gt;= smin\n&quot;+
      &quot;(s=&quot; + String(s) + &quot;, L=&quot; + String(L) + &quot;, smin=&quot; + String(smin) + &quot;)&quot;);
    assert(s &lt; smax - L/2 or s &lt;= smax - L/2 and v &lt;= 0,
      &quot;Error in initialization of hard stop. (s + L/2) must be &lt;= smax\n&quot;+
      &quot;(s=&quot; + String(s) + &quot;, L=&quot; + String(L) + &quot;, smax=&quot; + String(smax) + &quot;)&quot;);
  end when;
  when stopped &lt;&gt; 0 then
    reinit(s, if stopped &lt; 0 then smin + L/2 else smax - L/2);
    if (not initial() or stopped*v&gt;0) then
       reinit(v, 0);
    end if;
  end when;
/*
  when not (s &lt; smax - L/2) then
    reinit(s, smax - L/2);
    if (not initial() or v&gt;0) then
      reinit(v, 0);
    end if;
  end when;

  when not (s &gt; smin + L/2) then
    reinit(s, smin + L/2);
    if (not initial() or v&lt;0) then
      reinit(v, 0);
    end if;
  end when;
*/
end MassWithStopAndFriction;</code></pre>
<hr />
<h1 id="image41-modelica.mechanics.translational.components.relativestates"><img src="Modelica.Mechanics.Translational.Components.RelativeStatesI.png" alt="image41" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components">Modelica.Mechanics.Translational.Components</a>.RelativeStates</h1>
<p><strong>Definition of relative state variables</strong></p>
<h2 id="information-14">Information</h2>
<p>::</p>
<p>Usually, the absolute position and the absolute velocity of Modelica.Mechanics.Translational.Inertia models are used as state variables. In some circumstances, relative quantities are better suited, e.g., because it may be easier to supply initial values. In such cases, model <strong>RelativeStates</strong> allows the definition of state variables in the following way:</p>
<ul>
<li>Connect an instance of this model between two flange connectors.</li>
<li>The <strong>relative position</strong> and the <strong>relative velocity</strong> between the two connectors are used as <strong>state variables</strong>.</li>
</ul>
<p>An example is given in the next figure</p>
<p>Here, the relative position and the relative velocity between the two masses are used as state variables. Additionally, the simulator selects either the absolute position and absolute velocity of model mass1 or of model mass2 as state variables.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialTwoFlanges">Translational.Interfaces.PartialTwoFlanges</a> (Component with two translational 1D flanges ).</p>
<h2 id="parameters-13">Parameters</h2>
<table>
<col width="13%" />
<col width="13%" />
<col width="18%" />
<col width="55%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">StateSelect</td>
<td align="left">stateSelect</td>
<td align="left">StateSelect.prefer</td>
<td align="left">Priority to use the relative angle and relative speed as states</td>
</tr>
</tbody>
</table>
<h2 id="connectors-13">Connectors</h2>
<table>
<col width="53%" />
<col width="6%" />
<col width="40%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">(left) driving flange (flange axis directed in to cut plane, e. g. from left to right)</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">(right) driven flange (flange axis directed out of cut plane)</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-13">Modelica definition</h2>
<pre><code>model RelativeStates &quot;Definition of relative state variables&quot;
  extends Translational.Interfaces.PartialTwoFlanges;
  parameter StateSelect stateSelect=StateSelect.prefer 
    &quot;Priority to use the relative angle and relative speed as states&quot;;
  SI.Position s_rel(start=0, stateSelect=StateSelect.prefer) 
    &quot;Relative position used as state variable&quot;;
  SI.Velocity v_rel(start=0, stateSelect=StateSelect.prefer) 
    &quot;Relative velocity used as state variable&quot;;
  SI.Acceleration a_rel(start=0) &quot;Relative angular acceleration&quot;;

equation 
  s_rel = flange_b.s - flange_a.s;
  v_rel = der(s_rel);
  a_rel = der(v_rel);
  flange_a.f = 0;
  flange_b.f = 0;
end RelativeStates;</code></pre>
<hr />
<h1 id="modelica.mechanics.translational.components.initializeflange.set_s_start-modelica.mechanics.translational.components.initializeflange.set_s_start"><img src="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" alt="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_start" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange">Modelica.Mechanics.Translational.Components.InitializeFlange</a>.Set_s_start</h1>
<p><strong>Set s_start</strong></p>
<h2 id="information-15">Information</h2>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Modelica.Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="connectors-14">Connectors</h2>
<table>
<col width="79%" />
<col width="8%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">s_start</td>
<td align="left">Start position</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-14">Modelica definition</h2>
<pre><code>encapsulated model Set_s_start &quot;Set s_start&quot;
  import Modelica;
  extends Modelica.Blocks.Interfaces.BlockIcon;
  Modelica.Blocks.Interfaces.RealInput s_start &quot;Start position&quot;;

  Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
initial equation 
  flange.s = s_start;
equation 
  flange.f = 0;

end Set_s_start;</code></pre>
<hr />
<h1 id="modelica.mechanics.translational.components.initializeflange.set_v_start-modelica.mechanics.translational.components.initializeflange.set_v_start"><img src="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" alt="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_start" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange">Modelica.Mechanics.Translational.Components.InitializeFlange</a>.Set_v_start</h1>
<p><strong>Set v_start</strong></p>
<h2 id="information-16">Information</h2>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Modelica.Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="connectors-15">Connectors</h2>
<table>
<col width="79%" />
<col width="8%" />
<col width="12%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">v_start</td>
<td align="left">Start velocity</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-15">Modelica definition</h2>
<pre><code>encapsulated model Set_v_start &quot;Set v_start&quot;
  import Modelica;
  extends Modelica.Blocks.Interfaces.BlockIcon;
  Modelica.Blocks.Interfaces.RealInput v_start &quot;Start velocity&quot;;

  Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
initial equation 
  der(flange.s) = v_start;
equation 
  flange.f = 0;

end Set_v_start;</code></pre>
<hr />
<h1 id="modelica.mechanics.translational.components.initializeflange.set_a_start-modelica.mechanics.translational.components.initializeflange.set_a_start"><img src="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" alt="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_start" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange">Modelica.Mechanics.Translational.Components.InitializeFlange</a>.Set_a_start</h1>
<p><strong>Set a_start</strong></p>
<h2 id="information-17">Information</h2>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Modelica.Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="connectors-16">Connectors</h2>
<table>
<col width="77%" />
<col width="8%" />
<col width="14%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput">RealInput</a></td>
<td align="left">a_start</td>
<td align="left">Start acceleration</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-16">Modelica definition</h2>
<pre><code>encapsulated model Set_a_start &quot;Set a_start&quot;
  import Modelica;
  extends Modelica.Blocks.Interfaces.BlockIcon;
  Modelica.Blocks.Interfaces.RealInput a_start &quot;Start acceleration&quot;;

  Modelica.Mechanics.Translational.Interfaces.Flange_b flange(s(stateSelect=StateSelect.avoid));
  Modelica.SIunits.Velocity v = der(flange.s);
initial equation 
  der(v) = a_start;
equation 
  flange.f = 0;

end Set_a_start;</code></pre>
<hr />
<h1 id="modelica.mechanics.translational.components.initializeflange.set_flange_f-modelica.mechanics.translational.components.initializeflange.set_flange_f"><img src="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_fI.png" alt="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_f" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange">Modelica.Mechanics.Translational.Components.InitializeFlange</a>.Set_flange_f</h1>
<p><strong>Set flange_f to zero</strong></p>
<h2 id="information-18">Information</h2>
<p>Extends from <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon">Modelica.Blocks.Interfaces.BlockIcon</a> (Basic graphical layout of input/output block).</p>
<h2 id="connectors-17">Connectors</h2>
<table>
<col width="81%" />
<col width="7%" />
<col width="10%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange</td>
<td align="left">
</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-17">Modelica definition</h2>
<pre><code>encapsulated model Set_flange_f &quot;Set flange_f to zero&quot;
  import Modelica;
  extends Modelica.Blocks.Interfaces.BlockIcon;
  Modelica.Mechanics.Translational.Interfaces.Flange_b flange;
equation 
  flange.f = 0;
end Set_flange_f;</code></pre>
<hr />
<h1 id="modelica.mechanics.translational.components.masswithstopandfriction.partialfrictionwithstop-modelica.mechanics.translational.components.masswithstopandfriction.partialfrictionwithstop"><img src="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStopI.png" alt="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop" /> <a href="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction">Modelica.Mechanics.Translational.Components.MassWithStopAndFriction</a>.PartialFrictionWithStop</h1>
<p><strong>Base model of Coulomb friction elements with stop</strong></p>
<h2 id="information-19">Information</h2>
<p>::</p>
<p>Basic model for Coulomb friction that models the stuck phase in a reliable way. Additionally, a left and right stop are handled.</p>
<p>::</p>
<p>Extends from <a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid">PartialRigid</a> (Rigid connection of two translational 1D flanges ).</p>
<h2 id="parameters-14">Parameters</h2>
<table>
<col width="36%" />
<col width="7%" />
<col width="6%" />
<col width="50%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">smax</td>
<td align="left">
</td>
<td align="left">Right stop for (right end of) sliding mass [m]</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Position">Position</a></td>
<td align="left">smin</td>
<td align="left">
</td>
<td align="left">Left stop for (left end of) sliding mass [m]</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Length">Length</a></td>
<td align="left">L</td>
<td align="left">
</td>
<td align="left">Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</td>
</tr>
<tr class="even">
<td align="left"><strong>Advanced</strong></td>
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
</td>
</tr>
<tr class="odd">
<td align="left"><a href="Modelica_SIunits.html#Modelica.SIunits.Velocity">Velocity</a></td>
<td align="left">v_small</td>
<td align="left">1e-3</td>
<td align="left">Relative velocity near to zero (see model info text) [m/s]</td>
</tr>
</tbody>
</table>
<h2 id="connectors-18">Connectors</h2>
<table>
<col width="67%" />
<col width="7%" />
<col width="24%" />
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a">Flange_a</a></td>
<td align="left">flange_a</td>
<td align="left">Left flange of translational component</td>
</tr>
<tr class="even">
<td align="left"><a href="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b">Flange_b</a></td>
<td align="left">flange_b</td>
<td align="left">Right flange of translational component</td>
</tr>
</tbody>
</table>
<h2 id="modelica-definition-18">Modelica definition</h2>
<pre><code>encapsulated partial model PartialFrictionWithStop 
  &quot;Base model of Coulomb friction elements with stop&quot;

    import SI = Modelica.SIunits;
    import Modelica.Mechanics.Translational.Interfaces.PartialRigid;
  parameter SI.Position smax(start= 25) 
    &quot;Right stop for (right end of) sliding mass&quot;;
  parameter SI.Position smin(start=-25) 
    &quot;Left stop for (left end of) sliding mass&quot;;
  parameter SI.Velocity v_small=1e-3 
    &quot;Relative velocity near to zero (see model info text)&quot;;
// Equations to define the following variables have to be defined in subclasses
  SI.Velocity v_relfric &quot;Relative velocity between frictional surfaces&quot;;
  SI.Acceleration a_relfric &quot;Relative acceleration between frictional surfaces&quot;;
  SI.Force f 
    &quot;Friction force (positive, if directed in opposite direction of v_rel)&quot;;
  SI.Force f0 &quot;Friction force for v=0 and forward sliding&quot;;
  SI.Force f0_max &quot;Maximum friction force for v=0 and locked&quot;;
  Boolean free &quot;true, if frictional element is not active&quot;;
// Equations to define the following variables are given in this class
  Real sa(unit=&quot;1&quot;) 
    &quot;Path parameter of friction characteristic f = f(a_relfric)&quot;;
  Boolean startForward(start=false, fixed=true) 
    &quot;= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small&quot;;
  Boolean startBackward(start=false, fixed=true) 
    &quot;= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small&quot;;
  Boolean locked(start=false) &quot;true, if v_rel=0 and not sliding&quot;;
  extends PartialRigid(s(start=0, stateSelect = StateSelect.always));
  constant Integer Unknown=3 &quot;Value of mode is not known&quot;;
  constant Integer Free=2 &quot;Element is not active&quot;;
  constant Integer Forward=1 &quot;v_rel &gt; 0 (forward sliding)&quot;;
  constant Integer Stuck=0 
    &quot;v_rel = 0 (forward sliding, locked or backward sliding)&quot;;
  constant Integer Backward=-1 &quot;v_rel &lt; 0 (backward sliding)&quot;;
  Integer mode(
    final min=Backward,
    final max=Unknown,
    start=Unknown, fixed=true);
protected 
  constant SI.Acceleration unitAcceleration = 1;
  constant SI.Force unitForce = 1;
equation 
/* Friction characteristic
   (locked is introduced to help the Modelica translator determining
   the different structural configurations,
   if for each configuration special code shall be generated)
*/
  startForward = pre(mode) == Stuck and (sa &gt; f0_max/unitForce and s &lt; (smax - L/2) or 
        pre(startForward) and sa &gt; f0/unitForce and s &lt; (smax - L/2)) or pre(mode)
     == Backward and v_relfric &gt; v_small or initial() and (v_relfric &gt; 0);
  startBackward = pre(mode) == Stuck and (sa &lt; -f0_max/unitForce and s &gt; (smin + L/2) or 
        pre(startBackward) and sa &lt; -f0/unitForce and s &gt; (smin + L/2)) or pre(mode)
     == Forward and v_relfric &lt; -v_small or initial() and (v_relfric &lt; 0);
  locked = not free and 
    not (pre(mode) == Forward or startForward or pre(mode) == Backward or startBackward);

  a_relfric/unitAcceleration = if locked then               0 else 
                               if free then                 sa else 
                               if startForward then         sa - f0_max/unitForce else 
                               if startBackward then        sa + f0_max/unitForce else 
                               if pre(mode) == Forward then sa - f0_max/unitForce else 
                                                            sa + f0_max/unitForce;

/* Friction torque has to be defined in a subclass. Example for a clutch:
   f = if locked then sa else
       if free then   0 else
       cgeo*fn*(if startForward then          Math.tempInterpol1( v_relfric, mue_pos, 2) else
                if startBackward then        -Math.tempInterpol1(-v_relfric, mue_pos, 2) else
                if pre(mode) == Forward then  Math.tempInterpol1( v_relfric, mue_pos, 2) else
                                             -Math.tempInterpol1(-v_relfric, mue_pos, 2));
*/
// finite state machine to determine configuration
  mode = if free then Free else 
    (if (pre(mode) == Forward  or pre(mode) == Free or startForward)  and v_relfric &gt; 0 and s &lt; (smax - L/2) then 
       Forward else 
     if (pre(mode) == Backward or pre(mode) == Free or startBackward) and v_relfric &lt; 0 and s &gt; (smin + L/2) then 
       Backward else 
       Stuck);
end PartialFrictionWithStop;</code></pre>
<hr />
<p><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:51 2010.</p>
</body>
</html>
